var N2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var C6=N2((R6,pp)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function If(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var uS={exports:{}},Rf={},hS={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=Symbol.for("react.element"),O2=Symbol.for("react.portal"),B2=Symbol.for("react.fragment"),L2=Symbol.for("react.strict_mode"),U2=Symbol.for("react.profiler"),z2=Symbol.for("react.provider"),G2=Symbol.for("react.context"),$2=Symbol.for("react.forward_ref"),H2=Symbol.for("react.suspense"),j2=Symbol.for("react.memo"),V2=Symbol.for("react.lazy"),Ix=Symbol.iterator;function W2(t){return t===null||typeof t!="object"?null:(t=Ix&&t[Ix]||t["@@iterator"],typeof t=="function"?t:null)}var cS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dS=Object.assign,fS={};function el(t,e,r){this.props=t,this.context=e,this.refs=fS,this.updater=r||cS}el.prototype.isReactComponent={};el.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};el.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pS(){}pS.prototype=el.prototype;function cv(t,e,r){this.props=t,this.context=e,this.refs=fS,this.updater=r||cS}var dv=cv.prototype=new pS;dv.constructor=cv;dS(dv,el.prototype);dv.isPureReactComponent=!0;var Rx=Array.isArray,mS=Object.prototype.hasOwnProperty,fv={current:null},gS={key:!0,ref:!0,__self:!0,__source:!0};function yS(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)mS.call(e,n)&&!gS.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];i.children=h}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:sh,type:t,key:s,ref:o,props:i,_owner:fv.current}}function X2(t,e){return{$$typeof:sh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pv(t){return typeof t=="object"&&t!==null&&t.$$typeof===sh}function Y2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var kx=/\/+/g;function Rm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Y2(""+t.key):e.toString(36)}function sd(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sh:case O2:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Rm(o,0):n,Rx(i)?(r="",t!=null&&(r=t.replace(kx,"$&/")+"/"),sd(i,e,r,"",function(c){return c})):i!=null&&(pv(i)&&(i=X2(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kx,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Rx(t))for(var l=0;l<t.length;l++){s=t[l];var h=n+Rm(s,l);o+=sd(s,e,r,h,i)}else if(h=W2(t),typeof h=="function")for(t=h.call(t),l=0;!(s=t.next()).done;)s=s.value,h=n+Rm(s,l++),o+=sd(s,e,r,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ac(t,e,r){if(t==null)return t;var n=[],i=0;return sd(t,n,"","",function(s){return e.call(r,s,i++)}),n}function Q2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hr={current:null},od={transition:null},q2={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:od,ReactCurrentOwner:fv};function vS(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:ac,forEach:function(t,e,r){ac(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ac(t,function(){e++}),e},toArray:function(t){return ac(t,function(e){return e})||[]},only:function(t){if(!pv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=el;Me.Fragment=B2;Me.Profiler=U2;Me.PureComponent=cv;Me.StrictMode=L2;Me.Suspense=H2;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q2;Me.act=vS;Me.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=dS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=fv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)mS.call(e,h)&&!gS.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&l!==void 0?l[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:sh,type:t.type,key:i,ref:s,props:n,_owner:o}};Me.createContext=function(t){return t={$$typeof:G2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:z2,_context:t},t.Consumer=t};Me.createElement=yS;Me.createFactory=function(t){var e=yS.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:$2,render:t}};Me.isValidElement=pv;Me.lazy=function(t){return{$$typeof:V2,_payload:{_status:-1,_result:t},_init:Q2}};Me.memo=function(t,e){return{$$typeof:j2,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=od.transition;od.transition={};try{t()}finally{od.transition=e}};Me.unstable_act=vS;Me.useCallback=function(t,e){return hr.current.useCallback(t,e)};Me.useContext=function(t){return hr.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return hr.current.useDeferredValue(t)};Me.useEffect=function(t,e){return hr.current.useEffect(t,e)};Me.useId=function(){return hr.current.useId()};Me.useImperativeHandle=function(t,e,r){return hr.current.useImperativeHandle(t,e,r)};Me.useInsertionEffect=function(t,e){return hr.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return hr.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return hr.current.useMemo(t,e)};Me.useReducer=function(t,e,r){return hr.current.useReducer(t,e,r)};Me.useRef=function(t){return hr.current.useRef(t)};Me.useState=function(t){return hr.current.useState(t)};Me.useSyncExternalStore=function(t,e,r){return hr.current.useSyncExternalStore(t,e,r)};Me.useTransition=function(){return hr.current.useTransition()};Me.version="18.3.1";hS.exports=Me;var X=hS.exports;const ii=If(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2=X,Z2=Symbol.for("react.element"),J2=Symbol.for("react.fragment"),eR=Object.prototype.hasOwnProperty,tR=K2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rR={key:!0,ref:!0,__self:!0,__source:!0};function _S(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)eR.call(e,n)&&!rR.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Z2,type:t,key:s,ref:o,props:i,_owner:tR.current}}Rf.Fragment=J2;Rf.jsx=_S;Rf.jsxs=_S;uS.exports=Rf;var Y=uS.exports,xS={exports:{}},Br={},wS={exports:{}},bS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,j){var N=M.length;M.push(j);e:for(;0<N;){var $=N-1>>>1,se=M[$];if(0<i(se,j))M[$]=j,M[N]=se,N=$;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var j=M[0],N=M.pop();if(N!==j){M[0]=N;e:for(var $=0,se=M.length,Ce=se>>>1;$<Ce;){var Ee=2*($+1)-1,He=M[Ee],Ie=Ee+1,$e=M[Ie];if(0>i(He,N))Ie<se&&0>i($e,He)?(M[$]=$e,M[Ie]=N,$=Ie):(M[$]=He,M[Ee]=N,$=Ee);else if(Ie<se&&0>i($e,N))M[$]=$e,M[Ie]=N,$=Ie;else break e}}return j}function i(M,j){var N=M.sortIndex-j.sortIndex;return N!==0?N:M.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var h=[],c=[],f=1,p=null,m=3,v=!1,_=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var j=r(c);j!==null;){if(j.callback===null)n(c);else if(j.startTime<=M)n(c),j.sortIndex=j.expirationTime,e(h,j);else break;j=r(c)}}function A(M){if(b=!1,w(M),!_)if(r(h)!==null)_=!0,_e(P);else{var j=r(c);j!==null&&de(A,j.startTime-M)}}function P(M,j){_=!1,b&&(b=!1,x(k),k=-1),v=!0;var N=m;try{for(w(j),p=r(h);p!==null&&(!(p.expirationTime>j)||M&&!re());){var $=p.callback;if(typeof $=="function"){p.callback=null,m=p.priorityLevel;var se=$(p.expirationTime<=j);j=t.unstable_now(),typeof se=="function"?p.callback=se:p===r(h)&&n(h),w(j)}else n(h);p=r(h)}if(p!==null)var Ce=!0;else{var Ee=r(c);Ee!==null&&de(A,Ee.startTime-j),Ce=!1}return Ce}finally{p=null,m=N,v=!1}}var D=!1,R=null,k=-1,L=5,z=-1;function re(){return!(t.unstable_now()-z<L)}function Z(){if(R!==null){var M=t.unstable_now();z=M;var j=!0;try{j=R(!0,M)}finally{j?B():(D=!1,R=null)}}else D=!1}var B;if(typeof E=="function")B=function(){E(Z)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=Z,B=function(){ue.postMessage(null)}}else B=function(){T(Z,0)};function _e(M){R=M,D||(D=!0,B())}function de(M,j){k=T(function(){M(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,_e(P))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var N=m;m=j;try{return M()}finally{m=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,j){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var N=m;m=M;try{return j()}finally{m=N}},t.unstable_scheduleCallback=function(M,j,N){var $=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?$+N:$):N=$,M){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=N+se,M={id:f++,callback:j,priorityLevel:M,startTime:N,expirationTime:se,sortIndex:-1},N>$?(M.sortIndex=N,e(c,M),r(h)===null&&M===r(c)&&(b?(x(k),k=-1):b=!0,de(A,N-$))):(M.sortIndex=se,e(h,M),_||v||(_=!0,_e(P))),M},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(M){var j=m;return function(){var N=m;m=j;try{return M.apply(this,arguments)}finally{m=N}}}})(bS);wS.exports=bS;var nR=wS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR=X,Or=nR;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ES=new Set,Eu={};function Co(t,e){$a(t,e),$a(t+"Capture",e)}function $a(t,e){for(Eu[t]=e,t=0;t<e.length;t++)ES.add(e[t])}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n0=Object.prototype.hasOwnProperty,sR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Dx={};function oR(t){return n0.call(Dx,t)?!0:n0.call(Mx,t)?!1:sR.test(t)?Dx[t]=!0:(Mx[t]=!0,!1)}function aR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lR(t,e,r,n){if(e===null||typeof e>"u"||aR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cr(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new cr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new cr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new cr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new cr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new cr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new cr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new cr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new cr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new cr(t,5,!1,t.toLowerCase(),null,!1,!1)});var mv=/[\-:]([a-z])/g;function gv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mv,gv);Yt[e]=new cr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mv,gv);Yt[e]=new cr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mv,gv);Yt[e]=new cr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new cr(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new cr(t,1,!1,t.toLowerCase(),null,!0,!0)});function yv(t,e,r,n){var i=Yt.hasOwnProperty(e)?Yt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lR(e,r,i,n)&&(r=null),n||i===null?oR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var zi=iR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lc=Symbol.for("react.element"),ua=Symbol.for("react.portal"),ha=Symbol.for("react.fragment"),vv=Symbol.for("react.strict_mode"),i0=Symbol.for("react.profiler"),SS=Symbol.for("react.provider"),TS=Symbol.for("react.context"),_v=Symbol.for("react.forward_ref"),s0=Symbol.for("react.suspense"),o0=Symbol.for("react.suspense_list"),xv=Symbol.for("react.memo"),ns=Symbol.for("react.lazy"),AS=Symbol.for("react.offscreen"),Fx=Symbol.iterator;function Pl(t){return t===null||typeof t!="object"?null:(t=Fx&&t[Fx]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,km;function Wl(t){if(km===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);km=e&&e[1]||""}return`
`+km+t}var Mm=!1;function Dm(t,e){if(!t||Mm)return"";Mm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var h=`
`+i[o].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=o&&0<=l);break}}}finally{Mm=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Wl(t):""}function uR(t){switch(t.tag){case 5:return Wl(t.type);case 16:return Wl("Lazy");case 13:return Wl("Suspense");case 19:return Wl("SuspenseList");case 0:case 2:case 15:return t=Dm(t.type,!1),t;case 11:return t=Dm(t.type.render,!1),t;case 1:return t=Dm(t.type,!0),t;default:return""}}function a0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ha:return"Fragment";case ua:return"Portal";case i0:return"Profiler";case vv:return"StrictMode";case s0:return"Suspense";case o0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TS:return(t.displayName||"Context")+".Consumer";case SS:return(t._context.displayName||"Context")+".Provider";case _v:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xv:return e=t.displayName||null,e!==null?e:a0(t.type)||"Memo";case ns:e=t._payload,t=t._init;try{return a0(t(e))}catch{}}return null}function hR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return a0(e);case 8:return e===vv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cR(t){var e=CS(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uc(t){t._valueTracker||(t._valueTracker=cR(t))}function PS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=CS(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Rd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function l0(t,e){var r=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Nx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ps(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IS(t,e){e=e.checked,e!=null&&yv(t,"checked",e,!1)}function u0(t,e){IS(t,e);var r=Ps(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?h0(t,e.type,r):e.hasOwnProperty("defaultValue")&&h0(t,e.type,Ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ox(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function h0(t,e,r){(e!=="number"||Rd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Xl=Array.isArray;function Sa(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ps(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function c0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(K(92));if(Xl(r)){if(1<r.length)throw Error(K(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ps(r)}}function RS(t,e){var r=Ps(e.value),n=Ps(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Lx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function d0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hc,MS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hc=hc||document.createElement("div"),hc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Su(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dR=["Webkit","ms","Moz","O"];Object.keys(ou).forEach(function(t){dR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ou[e]=ou[t]})});function DS(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ou.hasOwnProperty(t)&&ou[t]?(""+e).trim():e+"px"}function FS(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=DS(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var fR=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function f0(t,e){if(e){if(fR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function p0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m0=null;function wv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var g0=null,Ta=null,Aa=null;function Ux(t){if(t=lh(t)){if(typeof g0!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Nf(e),g0(t.stateNode,t.type,e))}}function NS(t){Ta?Aa?Aa.push(t):Aa=[t]:Ta=t}function OS(){if(Ta){var t=Ta,e=Aa;if(Aa=Ta=null,Ux(t),e)for(t=0;t<e.length;t++)Ux(e[t])}}function BS(t,e){return t(e)}function LS(){}var Fm=!1;function US(t,e,r){if(Fm)return t(e,r);Fm=!0;try{return BS(t,e,r)}finally{Fm=!1,(Ta!==null||Aa!==null)&&(LS(),OS())}}function Tu(t,e){var r=t.stateNode;if(r===null)return null;var n=Nf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(K(231,e,typeof r));return r}var y0=!1;if(Di)try{var Il={};Object.defineProperty(Il,"passive",{get:function(){y0=!0}}),window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{y0=!1}function pR(t,e,r,n,i,s,o,l,h){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(f){this.onError(f)}}var au=!1,kd=null,Md=!1,v0=null,mR={onError:function(t){au=!0,kd=t}};function gR(t,e,r,n,i,s,o,l,h){au=!1,kd=null,pR.apply(mR,arguments)}function yR(t,e,r,n,i,s,o,l,h){if(gR.apply(this,arguments),au){if(au){var c=kd;au=!1,kd=null}else throw Error(K(198));Md||(Md=!0,v0=c)}}function Po(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function zS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zx(t){if(Po(t)!==t)throw Error(K(188))}function vR(t){var e=t.alternate;if(!e){if(e=Po(t),e===null)throw Error(K(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return zx(i),t;if(s===n)return zx(i),e;s=s.sibling}throw Error(K(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o)throw Error(K(189))}}if(r.alternate!==n)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?t:e}function GS(t){return t=vR(t),t!==null?$S(t):null}function $S(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$S(t);if(e!==null)return e;t=t.sibling}return null}var HS=Or.unstable_scheduleCallback,Gx=Or.unstable_cancelCallback,_R=Or.unstable_shouldYield,xR=Or.unstable_requestPaint,xt=Or.unstable_now,wR=Or.unstable_getCurrentPriorityLevel,bv=Or.unstable_ImmediatePriority,jS=Or.unstable_UserBlockingPriority,Dd=Or.unstable_NormalPriority,bR=Or.unstable_LowPriority,VS=Or.unstable_IdlePriority,kf=null,si=null;function ER(t){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(kf,t,void 0,(t.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:AR,SR=Math.log,TR=Math.LN2;function AR(t){return t>>>=0,t===0?32:31-(SR(t)/TR|0)|0}var cc=64,dc=4194304;function Yl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fd(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=Yl(l):(s&=o,s!==0&&(n=Yl(s)))}else o=r&~i,o!==0?n=Yl(o):s!==0&&(n=Yl(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-An(e),i=1<<r,n|=t[r],e&=~i;return n}function CR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-An(s),l=1<<o,h=i[o];h===-1?(!(l&r)||l&n)&&(i[o]=CR(l,e)):h<=e&&(t.expiredLanes|=l),s&=~l}}function _0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WS(){var t=cc;return cc<<=1,!(cc&4194240)&&(cc=64),t}function Nm(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function oh(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-An(e),t[e]=r}function IR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-An(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Ev(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-An(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var We=0;function XS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YS,Sv,QS,qS,KS,x0=!1,fc=[],vs=null,_s=null,xs=null,Au=new Map,Cu=new Map,as=[],RR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $x(t,e){switch(t){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":Au.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(e.pointerId)}}function Rl(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lh(e),e!==null&&Sv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kR(t,e,r,n,i){switch(e){case"focusin":return vs=Rl(vs,t,e,r,n,i),!0;case"dragenter":return _s=Rl(_s,t,e,r,n,i),!0;case"mouseover":return xs=Rl(xs,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Au.set(s,Rl(Au.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Cu.set(s,Rl(Cu.get(s)||null,t,e,r,n,i)),!0}return!1}function ZS(t){var e=uo(t.target);if(e!==null){var r=Po(e);if(r!==null){if(e=r.tag,e===13){if(e=zS(r),e!==null){t.blockedOn=e,KS(t.priority,function(){QS(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ad(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=w0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);m0=n,r.target.dispatchEvent(n),m0=null}else return e=lh(r),e!==null&&Sv(e),t.blockedOn=r,!1;e.shift()}return!0}function Hx(t,e,r){ad(t)&&r.delete(e)}function MR(){x0=!1,vs!==null&&ad(vs)&&(vs=null),_s!==null&&ad(_s)&&(_s=null),xs!==null&&ad(xs)&&(xs=null),Au.forEach(Hx),Cu.forEach(Hx)}function kl(t,e){t.blockedOn===e&&(t.blockedOn=null,x0||(x0=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,MR)))}function Pu(t){function e(i){return kl(i,t)}if(0<fc.length){kl(fc[0],t);for(var r=1;r<fc.length;r++){var n=fc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(vs!==null&&kl(vs,t),_s!==null&&kl(_s,t),xs!==null&&kl(xs,t),Au.forEach(e),Cu.forEach(e),r=0;r<as.length;r++)n=as[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<as.length&&(r=as[0],r.blockedOn===null);)ZS(r),r.blockedOn===null&&as.shift()}var Ca=zi.ReactCurrentBatchConfig,Nd=!0;function DR(t,e,r,n){var i=We,s=Ca.transition;Ca.transition=null;try{We=1,Tv(t,e,r,n)}finally{We=i,Ca.transition=s}}function FR(t,e,r,n){var i=We,s=Ca.transition;Ca.transition=null;try{We=4,Tv(t,e,r,n)}finally{We=i,Ca.transition=s}}function Tv(t,e,r,n){if(Nd){var i=w0(t,e,r,n);if(i===null)Vm(t,e,n,Od,r),$x(t,n);else if(kR(i,t,e,r,n))n.stopPropagation();else if($x(t,n),e&4&&-1<RR.indexOf(t)){for(;i!==null;){var s=lh(i);if(s!==null&&YS(s),s=w0(t,e,r,n),s===null&&Vm(t,e,n,Od,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Vm(t,e,n,null,r)}}var Od=null;function w0(t,e,r,n){if(Od=null,t=wv(n),t=uo(t),t!==null)if(e=Po(t),e===null)t=null;else if(r=e.tag,r===13){if(t=zS(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Od=t,null}function JS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wR()){case bv:return 1;case jS:return 4;case Dd:case bR:return 16;case VS:return 536870912;default:return 16}default:return 16}}var hs=null,Av=null,ld=null;function eT(){if(ld)return ld;var t,e=Av,r=e.length,n,i="value"in hs?hs.value:hs.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return ld=i.slice(t,1<n?1-n:void 0)}function ud(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pc(){return!0}function jx(){return!1}function Lr(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pc:jx,this.isPropagationStopped=jx,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),e}var tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cv=Lr(tl),ah=ct({},tl,{view:0,detail:0}),NR=Lr(ah),Om,Bm,Ml,Mf=ct({},ah,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ml&&(Ml&&t.type==="mousemove"?(Om=t.screenX-Ml.screenX,Bm=t.screenY-Ml.screenY):Bm=Om=0,Ml=t),Om)},movementY:function(t){return"movementY"in t?t.movementY:Bm}}),Vx=Lr(Mf),OR=ct({},Mf,{dataTransfer:0}),BR=Lr(OR),LR=ct({},ah,{relatedTarget:0}),Lm=Lr(LR),UR=ct({},tl,{animationName:0,elapsedTime:0,pseudoElement:0}),zR=Lr(UR),GR=ct({},tl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$R=Lr(GR),HR=ct({},tl,{data:0}),Wx=Lr(HR),jR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WR[t])?!!e[t]:!1}function Pv(){return XR}var YR=ct({},ah,{key:function(t){if(t.key){var e=jR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ud(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pv,charCode:function(t){return t.type==="keypress"?ud(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ud(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QR=Lr(YR),qR=ct({},Mf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xx=Lr(qR),KR=ct({},ah,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pv}),ZR=Lr(KR),JR=ct({},tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),ek=Lr(JR),tk=ct({},Mf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rk=Lr(tk),nk=[9,13,27,32],Iv=Di&&"CompositionEvent"in window,lu=null;Di&&"documentMode"in document&&(lu=document.documentMode);var ik=Di&&"TextEvent"in window&&!lu,tT=Di&&(!Iv||lu&&8<lu&&11>=lu),Yx=" ",Qx=!1;function rT(t,e){switch(t){case"keyup":return nk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ca=!1;function sk(t,e){switch(t){case"compositionend":return nT(e);case"keypress":return e.which!==32?null:(Qx=!0,Yx);case"textInput":return t=e.data,t===Yx&&Qx?null:t;default:return null}}function ok(t,e){if(ca)return t==="compositionend"||!Iv&&rT(t,e)?(t=eT(),ld=Av=hs=null,ca=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tT&&e.locale!=="ko"?null:e.data;default:return null}}var ak={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ak[t.type]:e==="textarea"}function iT(t,e,r,n){NS(n),e=Bd(e,"onChange"),0<e.length&&(r=new Cv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var uu=null,Iu=null;function lk(t){mT(t,0)}function Df(t){var e=pa(t);if(PS(e))return t}function uk(t,e){if(t==="change")return e}var sT=!1;if(Di){var Um;if(Di){var zm="oninput"in document;if(!zm){var Kx=document.createElement("div");Kx.setAttribute("oninput","return;"),zm=typeof Kx.oninput=="function"}Um=zm}else Um=!1;sT=Um&&(!document.documentMode||9<document.documentMode)}function Zx(){uu&&(uu.detachEvent("onpropertychange",oT),Iu=uu=null)}function oT(t){if(t.propertyName==="value"&&Df(Iu)){var e=[];iT(e,Iu,t,wv(t)),US(lk,e)}}function hk(t,e,r){t==="focusin"?(Zx(),uu=e,Iu=r,uu.attachEvent("onpropertychange",oT)):t==="focusout"&&Zx()}function ck(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Df(Iu)}function dk(t,e){if(t==="click")return Df(e)}function fk(t,e){if(t==="input"||t==="change")return Df(e)}function pk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:pk;function Ru(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!n0.call(e,i)||!Rn(t[i],e[i]))return!1}return!0}function Jx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ew(t,e){var r=Jx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jx(r)}}function aT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lT(){for(var t=window,e=Rd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Rd(t.document)}return e}function Rv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mk(t){var e=lT(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&aT(r.ownerDocument.documentElement,r)){if(n!==null&&Rv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=ew(r,s);var o=ew(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gk=Di&&"documentMode"in document&&11>=document.documentMode,da=null,b0=null,hu=null,E0=!1;function tw(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;E0||da==null||da!==Rd(n)||(n=da,"selectionStart"in n&&Rv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hu&&Ru(hu,n)||(hu=n,n=Bd(b0,"onSelect"),0<n.length&&(e=new Cv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=da)))}function mc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var fa={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionend:mc("Transition","TransitionEnd")},Gm={},uT={};Di&&(uT=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function Ff(t){if(Gm[t])return Gm[t];if(!fa[t])return t;var e=fa[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in uT)return Gm[t]=e[r];return t}var hT=Ff("animationend"),cT=Ff("animationiteration"),dT=Ff("animationstart"),fT=Ff("transitionend"),pT=new Map,rw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(t,e){pT.set(t,e),Co(e,[t])}for(var $m=0;$m<rw.length;$m++){var Hm=rw[$m],yk=Hm.toLowerCase(),vk=Hm[0].toUpperCase()+Hm.slice(1);Ms(yk,"on"+vk)}Ms(hT,"onAnimationEnd");Ms(cT,"onAnimationIteration");Ms(dT,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(fT,"onTransitionEnd");$a("onMouseEnter",["mouseout","mouseover"]);$a("onMouseLeave",["mouseout","mouseover"]);$a("onPointerEnter",["pointerout","pointerover"]);$a("onPointerLeave",["pointerout","pointerover"]);Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Co("onBeforeInput",["compositionend","keypress","textInput","paste"]);Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_k=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function nw(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,yR(n,e,void 0,t),t.currentTarget=null}function mT(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],h=l.instance,c=l.currentTarget;if(l=l.listener,h!==s&&i.isPropagationStopped())break e;nw(i,l,c),s=h}else for(o=0;o<n.length;o++){if(l=n[o],h=l.instance,c=l.currentTarget,l=l.listener,h!==s&&i.isPropagationStopped())break e;nw(i,l,c),s=h}}}if(Md)throw t=v0,Md=!1,v0=null,t}function Ke(t,e){var r=e[P0];r===void 0&&(r=e[P0]=new Set);var n=t+"__bubble";r.has(n)||(gT(e,t,2,!1),r.add(n))}function jm(t,e,r){var n=0;e&&(n|=4),gT(r,t,n,e)}var gc="_reactListening"+Math.random().toString(36).slice(2);function ku(t){if(!t[gc]){t[gc]=!0,ES.forEach(function(r){r!=="selectionchange"&&(_k.has(r)||jm(r,!1,t),jm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gc]||(e[gc]=!0,jm("selectionchange",!1,e))}}function gT(t,e,r,n){switch(JS(e)){case 1:var i=DR;break;case 4:i=FR;break;default:i=Tv}r=i.bind(null,e,r,t),i=void 0,!y0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Vm(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;o=o.return}for(;l!==null;){if(o=uo(l),o===null)return;if(h=o.tag,h===5||h===6){n=s=o;continue e}l=l.parentNode}}n=n.return}US(function(){var c=s,f=wv(r),p=[];e:{var m=pT.get(t);if(m!==void 0){var v=Cv,_=t;switch(t){case"keypress":if(ud(r)===0)break e;case"keydown":case"keyup":v=QR;break;case"focusin":_="focus",v=Lm;break;case"focusout":_="blur",v=Lm;break;case"beforeblur":case"afterblur":v=Lm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=BR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ZR;break;case hT:case cT:case dT:v=zR;break;case fT:v=ek;break;case"scroll":v=NR;break;case"wheel":v=rk;break;case"copy":case"cut":case"paste":v=$R;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Xx}var b=(e&4)!==0,T=!b&&t==="scroll",x=b?m!==null?m+"Capture":null:m;b=[];for(var E=c,w;E!==null;){w=E;var A=w.stateNode;if(w.tag===5&&A!==null&&(w=A,x!==null&&(A=Tu(E,x),A!=null&&b.push(Mu(E,A,w)))),T)break;E=E.return}0<b.length&&(m=new v(m,_,null,r,f),p.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&r!==m0&&(_=r.relatedTarget||r.fromElement)&&(uo(_)||_[Fi]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(_=r.relatedTarget||r.toElement,v=c,_=_?uo(_):null,_!==null&&(T=Po(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(b=Vx,A="onMouseLeave",x="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=Xx,A="onPointerLeave",x="onPointerEnter",E="pointer"),T=v==null?m:pa(v),w=_==null?m:pa(_),m=new b(A,E+"leave",v,r,f),m.target=T,m.relatedTarget=w,A=null,uo(f)===c&&(b=new b(x,E+"enter",_,r,f),b.target=w,b.relatedTarget=T,A=b),T=A,v&&_)t:{for(b=v,x=_,E=0,w=b;w;w=Xo(w))E++;for(w=0,A=x;A;A=Xo(A))w++;for(;0<E-w;)b=Xo(b),E--;for(;0<w-E;)x=Xo(x),w--;for(;E--;){if(b===x||x!==null&&b===x.alternate)break t;b=Xo(b),x=Xo(x)}b=null}else b=null;v!==null&&iw(p,m,v,b,!1),_!==null&&T!==null&&iw(p,T,_,b,!0)}}e:{if(m=c?pa(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var P=uk;else if(qx(m))if(sT)P=fk;else{P=ck;var D=hk}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=dk);if(P&&(P=P(t,c))){iT(p,P,r,f);break e}D&&D(t,m,c),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&h0(m,"number",m.value)}switch(D=c?pa(c):window,t){case"focusin":(qx(D)||D.contentEditable==="true")&&(da=D,b0=c,hu=null);break;case"focusout":hu=b0=da=null;break;case"mousedown":E0=!0;break;case"contextmenu":case"mouseup":case"dragend":E0=!1,tw(p,r,f);break;case"selectionchange":if(gk)break;case"keydown":case"keyup":tw(p,r,f)}var R;if(Iv)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else ca?rT(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(tT&&r.locale!=="ko"&&(ca||k!=="onCompositionStart"?k==="onCompositionEnd"&&ca&&(R=eT()):(hs=f,Av="value"in hs?hs.value:hs.textContent,ca=!0)),D=Bd(c,k),0<D.length&&(k=new Wx(k,t,null,r,f),p.push({event:k,listeners:D}),R?k.data=R:(R=nT(r),R!==null&&(k.data=R)))),(R=ik?sk(t,r):ok(t,r))&&(c=Bd(c,"onBeforeInput"),0<c.length&&(f=new Wx("onBeforeInput","beforeinput",null,r,f),p.push({event:f,listeners:c}),f.data=R))}mT(p,e)})}function Mu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Bd(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tu(t,r),s!=null&&n.unshift(Mu(t,s,i)),s=Tu(t,e),s!=null&&n.push(Mu(t,s,i))),t=t.return}return n}function Xo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iw(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,h=l.alternate,c=l.stateNode;if(h!==null&&h===n)break;l.tag===5&&c!==null&&(l=c,i?(h=Tu(r,s),h!=null&&o.unshift(Mu(r,h,l))):i||(h=Tu(r,s),h!=null&&o.push(Mu(r,h,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var xk=/\r\n?/g,wk=/\u0000|\uFFFD/g;function sw(t){return(typeof t=="string"?t:""+t).replace(xk,`
`).replace(wk,"")}function yc(t,e,r){if(e=sw(e),sw(t)!==e&&r)throw Error(K(425))}function Ld(){}var S0=null,T0=null;function A0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var C0=typeof setTimeout=="function"?setTimeout:void 0,bk=typeof clearTimeout=="function"?clearTimeout:void 0,ow=typeof Promise=="function"?Promise:void 0,Ek=typeof queueMicrotask=="function"?queueMicrotask:typeof ow<"u"?function(t){return ow.resolve(null).then(t).catch(Sk)}:C0;function Sk(t){setTimeout(function(){throw t})}function Wm(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Pu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Pu(e)}function ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var rl=Math.random().toString(36).slice(2),ri="__reactFiber$"+rl,Du="__reactProps$"+rl,Fi="__reactContainer$"+rl,P0="__reactEvents$"+rl,Tk="__reactListeners$"+rl,Ak="__reactHandles$"+rl;function uo(t){var e=t[ri];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Fi]||r[ri]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=aw(t);t!==null;){if(r=t[ri])return r;t=aw(t)}return e}t=r,r=t.parentNode}return null}function lh(t){return t=t[ri]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Nf(t){return t[Du]||null}var I0=[],ma=-1;function Ds(t){return{current:t}}function Je(t){0>ma||(t.current=I0[ma],I0[ma]=null,ma--)}function Ye(t,e){ma++,I0[ma]=t.current,t.current=e}var Is={},rr=Ds(Is),xr=Ds(!1),_o=Is;function Ha(t,e){var r=t.type.contextTypes;if(!r)return Is;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function wr(t){return t=t.childContextTypes,t!=null}function Ud(){Je(xr),Je(rr)}function lw(t,e,r){if(rr.current!==Is)throw Error(K(168));Ye(rr,e),Ye(xr,r)}function yT(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(K(108,hR(t)||"Unknown",i));return ct({},r,n)}function zd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,_o=rr.current,Ye(rr,t),Ye(xr,xr.current),!0}function uw(t,e,r){var n=t.stateNode;if(!n)throw Error(K(169));r?(t=yT(t,e,_o),n.__reactInternalMemoizedMergedChildContext=t,Je(xr),Je(rr),Ye(rr,t)):Je(xr),Ye(xr,r)}var Si=null,Of=!1,Xm=!1;function vT(t){Si===null?Si=[t]:Si.push(t)}function Ck(t){Of=!0,vT(t)}function Fs(){if(!Xm&&Si!==null){Xm=!0;var t=0,e=We;try{var r=Si;for(We=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Si=null,Of=!1}catch(i){throw Si!==null&&(Si=Si.slice(t+1)),HS(bv,Fs),i}finally{We=e,Xm=!1}}return null}var ga=[],ya=0,Gd=null,$d=0,qr=[],Kr=0,xo=null,Ti=1,Ai="";function Zs(t,e){ga[ya++]=$d,ga[ya++]=Gd,Gd=t,$d=e}function _T(t,e,r){qr[Kr++]=Ti,qr[Kr++]=Ai,qr[Kr++]=xo,xo=t;var n=Ti;t=Ai;var i=32-An(n)-1;n&=~(1<<i),r+=1;var s=32-An(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ti=1<<32-An(e)+i|r<<i|n,Ai=s+t}else Ti=1<<s|r<<i|n,Ai=t}function kv(t){t.return!==null&&(Zs(t,1),_T(t,1,0))}function Mv(t){for(;t===Gd;)Gd=ga[--ya],ga[ya]=null,$d=ga[--ya],ga[ya]=null;for(;t===xo;)xo=qr[--Kr],qr[Kr]=null,Ai=qr[--Kr],qr[Kr]=null,Ti=qr[--Kr],qr[Kr]=null}var Fr=null,Mr=null,it=!1,_n=null;function xT(t,e){var r=en(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function hw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fr=t,Mr=ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fr=t,Mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=xo!==null?{id:Ti,overflow:Ai}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=en(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Fr=t,Mr=null,!0):!1;default:return!1}}function R0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function k0(t){if(it){var e=Mr;if(e){var r=e;if(!hw(t,e)){if(R0(t))throw Error(K(418));e=ws(r.nextSibling);var n=Fr;e&&hw(t,e)?xT(n,r):(t.flags=t.flags&-4097|2,it=!1,Fr=t)}}else{if(R0(t))throw Error(K(418));t.flags=t.flags&-4097|2,it=!1,Fr=t}}}function cw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fr=t}function vc(t){if(t!==Fr)return!1;if(!it)return cw(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!A0(t.type,t.memoizedProps)),e&&(e=Mr)){if(R0(t))throw wT(),Error(K(418));for(;e;)xT(t,e),e=ws(e.nextSibling)}if(cw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Mr=ws(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Mr=null}}else Mr=Fr?ws(t.stateNode.nextSibling):null;return!0}function wT(){for(var t=Mr;t;)t=ws(t.nextSibling)}function ja(){Mr=Fr=null,it=!1}function Dv(t){_n===null?_n=[t]:_n.push(t)}var Pk=zi.ReactCurrentBatchConfig;function Dl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var n=r.stateNode}if(!n)throw Error(K(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,t))}return t}function _c(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dw(t){var e=t._init;return e(t._payload)}function bT(t){function e(x,E){if(t){var w=x.deletions;w===null?(x.deletions=[E],x.flags|=16):w.push(E)}}function r(x,E){if(!t)return null;for(;E!==null;)e(x,E),E=E.sibling;return null}function n(x,E){for(x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function i(x,E){return x=Ts(x,E),x.index=0,x.sibling=null,x}function s(x,E,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<E?(x.flags|=2,E):w):(x.flags|=2,E)):(x.flags|=1048576,E)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,E,w,A){return E===null||E.tag!==6?(E=eg(w,x.mode,A),E.return=x,E):(E=i(E,w),E.return=x,E)}function h(x,E,w,A){var P=w.type;return P===ha?f(x,E,w.props.children,A,w.key):E!==null&&(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ns&&dw(P)===E.type)?(A=i(E,w.props),A.ref=Dl(x,E,w),A.return=x,A):(A=gd(w.type,w.key,w.props,null,x.mode,A),A.ref=Dl(x,E,w),A.return=x,A)}function c(x,E,w,A){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=tg(w,x.mode,A),E.return=x,E):(E=i(E,w.children||[]),E.return=x,E)}function f(x,E,w,A,P){return E===null||E.tag!==7?(E=po(w,x.mode,A,P),E.return=x,E):(E=i(E,w),E.return=x,E)}function p(x,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=eg(""+E,x.mode,w),E.return=x,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lc:return w=gd(E.type,E.key,E.props,null,x.mode,w),w.ref=Dl(x,null,E),w.return=x,w;case ua:return E=tg(E,x.mode,w),E.return=x,E;case ns:var A=E._init;return p(x,A(E._payload),w)}if(Xl(E)||Pl(E))return E=po(E,x.mode,w,null),E.return=x,E;_c(x,E)}return null}function m(x,E,w,A){var P=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:l(x,E,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lc:return w.key===P?h(x,E,w,A):null;case ua:return w.key===P?c(x,E,w,A):null;case ns:return P=w._init,m(x,E,P(w._payload),A)}if(Xl(w)||Pl(w))return P!==null?null:f(x,E,w,A,null);_c(x,w)}return null}function v(x,E,w,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(w)||null,l(E,x,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case lc:return x=x.get(A.key===null?w:A.key)||null,h(E,x,A,P);case ua:return x=x.get(A.key===null?w:A.key)||null,c(E,x,A,P);case ns:var D=A._init;return v(x,E,w,D(A._payload),P)}if(Xl(A)||Pl(A))return x=x.get(w)||null,f(E,x,A,P,null);_c(E,A)}return null}function _(x,E,w,A){for(var P=null,D=null,R=E,k=E=0,L=null;R!==null&&k<w.length;k++){R.index>k?(L=R,R=null):L=R.sibling;var z=m(x,R,w[k],A);if(z===null){R===null&&(R=L);break}t&&R&&z.alternate===null&&e(x,R),E=s(z,E,k),D===null?P=z:D.sibling=z,D=z,R=L}if(k===w.length)return r(x,R),it&&Zs(x,k),P;if(R===null){for(;k<w.length;k++)R=p(x,w[k],A),R!==null&&(E=s(R,E,k),D===null?P=R:D.sibling=R,D=R);return it&&Zs(x,k),P}for(R=n(x,R);k<w.length;k++)L=v(R,x,k,w[k],A),L!==null&&(t&&L.alternate!==null&&R.delete(L.key===null?k:L.key),E=s(L,E,k),D===null?P=L:D.sibling=L,D=L);return t&&R.forEach(function(re){return e(x,re)}),it&&Zs(x,k),P}function b(x,E,w,A){var P=Pl(w);if(typeof P!="function")throw Error(K(150));if(w=P.call(w),w==null)throw Error(K(151));for(var D=P=null,R=E,k=E=0,L=null,z=w.next();R!==null&&!z.done;k++,z=w.next()){R.index>k?(L=R,R=null):L=R.sibling;var re=m(x,R,z.value,A);if(re===null){R===null&&(R=L);break}t&&R&&re.alternate===null&&e(x,R),E=s(re,E,k),D===null?P=re:D.sibling=re,D=re,R=L}if(z.done)return r(x,R),it&&Zs(x,k),P;if(R===null){for(;!z.done;k++,z=w.next())z=p(x,z.value,A),z!==null&&(E=s(z,E,k),D===null?P=z:D.sibling=z,D=z);return it&&Zs(x,k),P}for(R=n(x,R);!z.done;k++,z=w.next())z=v(R,x,k,z.value,A),z!==null&&(t&&z.alternate!==null&&R.delete(z.key===null?k:z.key),E=s(z,E,k),D===null?P=z:D.sibling=z,D=z);return t&&R.forEach(function(Z){return e(x,Z)}),it&&Zs(x,k),P}function T(x,E,w,A){if(typeof w=="object"&&w!==null&&w.type===ha&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case lc:e:{for(var P=w.key,D=E;D!==null;){if(D.key===P){if(P=w.type,P===ha){if(D.tag===7){r(x,D.sibling),E=i(D,w.props.children),E.return=x,x=E;break e}}else if(D.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ns&&dw(P)===D.type){r(x,D.sibling),E=i(D,w.props),E.ref=Dl(x,D,w),E.return=x,x=E;break e}r(x,D);break}else e(x,D);D=D.sibling}w.type===ha?(E=po(w.props.children,x.mode,A,w.key),E.return=x,x=E):(A=gd(w.type,w.key,w.props,null,x.mode,A),A.ref=Dl(x,E,w),A.return=x,x=A)}return o(x);case ua:e:{for(D=w.key;E!==null;){if(E.key===D)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){r(x,E.sibling),E=i(E,w.children||[]),E.return=x,x=E;break e}else{r(x,E);break}else e(x,E);E=E.sibling}E=tg(w,x.mode,A),E.return=x,x=E}return o(x);case ns:return D=w._init,T(x,E,D(w._payload),A)}if(Xl(w))return _(x,E,w,A);if(Pl(w))return b(x,E,w,A);_c(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(r(x,E.sibling),E=i(E,w),E.return=x,x=E):(r(x,E),E=eg(w,x.mode,A),E.return=x,x=E),o(x)):r(x,E)}return T}var Va=bT(!0),ET=bT(!1),Hd=Ds(null),jd=null,va=null,Fv=null;function Nv(){Fv=va=jd=null}function Ov(t){var e=Hd.current;Je(Hd),t._currentValue=e}function M0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Pa(t,e){jd=t,Fv=va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vr=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(Fv!==t)if(t={context:t,memoizedValue:e,next:null},va===null){if(jd===null)throw Error(K(308));va=t,jd.dependencies={lanes:0,firstContext:t}}else va=va.next=t;return e}var ho=null;function Bv(t){ho===null?ho=[t]:ho.push(t)}function ST(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Bv(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ni(t,n)}function Ni(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var is=!1;function Lv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Le&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ni(t,r)}return i=n.interleaved,i===null?(e.next=e,Bv(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ni(t,r)}function hd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ev(t,r)}}function fw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Vd(t,e,r,n){var i=t.updateQueue;is=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var h=l,c=h.next;h.next=null,o===null?s=c:o.next=c,o=h;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=h))}if(s!==null){var p=i.baseState;o=0,f=c=h=null,l=s;do{var m=l.lane,v=l.eventTime;if((n&m)===m){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,b=l;switch(m=e,v=r,b.tag){case 1:if(_=b.payload,typeof _=="function"){p=_.call(v,p,m);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,m=typeof _=="function"?_.call(v,p,m):_,m==null)break e;p=ct({},p,m);break e;case 2:is=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,h=p):f=f.next=v,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(f===null&&(h=p),i.baseState=h,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bo|=o,t.lanes=o,t.memoizedState=p}}function pw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(K(191,i));i.call(n)}}}var uh={},oi=Ds(uh),Fu=Ds(uh),Nu=Ds(uh);function co(t){if(t===uh)throw Error(K(174));return t}function Uv(t,e){switch(Ye(Nu,e),Ye(Fu,t),Ye(oi,uh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:d0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=d0(e,t)}Je(oi),Ye(oi,e)}function Wa(){Je(oi),Je(Fu),Je(Nu)}function AT(t){co(Nu.current);var e=co(oi.current),r=d0(e,t.type);e!==r&&(Ye(Fu,t),Ye(oi,r))}function zv(t){Fu.current===t&&(Je(oi),Je(Fu))}var lt=Ds(0);function Wd(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ym=[];function Gv(){for(var t=0;t<Ym.length;t++)Ym[t]._workInProgressVersionPrimary=null;Ym.length=0}var cd=zi.ReactCurrentDispatcher,Qm=zi.ReactCurrentBatchConfig,wo=0,ht=null,Pt=null,Ot=null,Xd=!1,cu=!1,Ou=0,Ik=0;function Jt(){throw Error(K(321))}function $v(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Rn(t[r],e[r]))return!1;return!0}function Hv(t,e,r,n,i,s){if(wo=s,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cd.current=t===null||t.memoizedState===null?Dk:Fk,t=r(n,i),cu){s=0;do{if(cu=!1,Ou=0,25<=s)throw Error(K(301));s+=1,Ot=Pt=null,e.updateQueue=null,cd.current=Nk,t=r(n,i)}while(cu)}if(cd.current=Yd,e=Pt!==null&&Pt.next!==null,wo=0,Ot=Pt=ht=null,Xd=!1,e)throw Error(K(300));return t}function jv(){var t=Ou!==0;return Ou=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ht.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function on(){if(Pt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Pt.next;var e=Ot===null?ht.memoizedState:Ot.next;if(e!==null)Ot=e,Pt=t;else{if(t===null)throw Error(K(310));Pt=t,t={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Ot===null?ht.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Bu(t,e){return typeof e=="function"?e(t):e}function qm(t){var e=on(),r=e.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var n=Pt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=o=null,h=null,c=s;do{var f=c.lane;if((wo&f)===f)h!==null&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};h===null?(l=h=p,o=n):h=h.next=p,ht.lanes|=f,bo|=f}c=c.next}while(c!==null&&c!==s);h===null?o=n:h.next=l,Rn(n,e.memoizedState)||(vr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=h,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,ht.lanes|=s,bo|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Km(t){var e=on(),r=e.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rn(s,e.memoizedState)||(vr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function CT(){}function PT(t,e){var r=ht,n=on(),i=e(),s=!Rn(n.memoizedState,i);if(s&&(n.memoizedState=i,vr=!0),n=n.queue,Vv(kT.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ot!==null&&Ot.memoizedState.tag&1){if(r.flags|=2048,Lu(9,RT.bind(null,r,n,i,e),void 0,null),Ut===null)throw Error(K(349));wo&30||IT(r,e,i)}return i}function IT(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function RT(t,e,r,n){e.value=r,e.getSnapshot=n,MT(e)&&DT(t)}function kT(t,e,r){return r(function(){MT(e)&&DT(t)})}function MT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Rn(t,r)}catch{return!0}}function DT(t){var e=Ni(t,1);e!==null&&Cn(e,t,1,-1)}function mw(t){var e=Kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:t},e.queue=t,t=t.dispatch=Mk.bind(null,ht,t),[e.memoizedState,t]}function Lu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function FT(){return on().memoizedState}function dd(t,e,r,n){var i=Kn();ht.flags|=t,i.memoizedState=Lu(1|e,r,void 0,n===void 0?null:n)}function Bf(t,e,r,n){var i=on();n=n===void 0?null:n;var s=void 0;if(Pt!==null){var o=Pt.memoizedState;if(s=o.destroy,n!==null&&$v(n,o.deps)){i.memoizedState=Lu(e,r,s,n);return}}ht.flags|=t,i.memoizedState=Lu(1|e,r,s,n)}function gw(t,e){return dd(8390656,8,t,e)}function Vv(t,e){return Bf(2048,8,t,e)}function NT(t,e){return Bf(4,2,t,e)}function OT(t,e){return Bf(4,4,t,e)}function BT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LT(t,e,r){return r=r!=null?r.concat([t]):null,Bf(4,4,BT.bind(null,e,t),r)}function Wv(){}function UT(t,e){var r=on();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$v(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function zT(t,e){var r=on();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$v(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function GT(t,e,r){return wo&21?(Rn(r,e)||(r=WS(),ht.lanes|=r,bo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vr=!0),t.memoizedState=r)}function Rk(t,e){var r=We;We=r!==0&&4>r?r:4,t(!0);var n=Qm.transition;Qm.transition={};try{t(!1),e()}finally{We=r,Qm.transition=n}}function $T(){return on().memoizedState}function kk(t,e,r){var n=Ss(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HT(t))jT(e,r);else if(r=ST(t,e,r,n),r!==null){var i=lr();Cn(r,t,n,i),VT(r,e,n)}}function Mk(t,e,r){var n=Ss(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HT(t))jT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(i.hasEagerState=!0,i.eagerState=l,Rn(l,o)){var h=e.interleaved;h===null?(i.next=i,Bv(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}r=ST(t,e,i,n),r!==null&&(i=lr(),Cn(r,t,n,i),VT(r,e,n))}}function HT(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function jT(t,e){cu=Xd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function VT(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ev(t,r)}}var Yd={readContext:sn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},Dk={readContext:sn,useCallback:function(t,e){return Kn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:gw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,dd(4194308,4,BT.bind(null,e,t),r)},useLayoutEffect:function(t,e){return dd(4194308,4,t,e)},useInsertionEffect:function(t,e){return dd(4,2,t,e)},useMemo:function(t,e){var r=Kn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Kn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=kk.bind(null,ht,t),[n.memoizedState,t]},useRef:function(t){var e=Kn();return t={current:t},e.memoizedState=t},useState:mw,useDebugValue:Wv,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=mw(!1),e=t[0];return t=Rk.bind(null,t[1]),Kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ht,i=Kn();if(it){if(r===void 0)throw Error(K(407));r=r()}else{if(r=e(),Ut===null)throw Error(K(349));wo&30||IT(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,gw(kT.bind(null,n,s,t),[t]),n.flags|=2048,Lu(9,RT.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Kn(),e=Ut.identifierPrefix;if(it){var r=Ai,n=Ti;r=(n&~(1<<32-An(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ou++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ik++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fk={readContext:sn,useCallback:UT,useContext:sn,useEffect:Vv,useImperativeHandle:LT,useInsertionEffect:NT,useLayoutEffect:OT,useMemo:zT,useReducer:qm,useRef:FT,useState:function(){return qm(Bu)},useDebugValue:Wv,useDeferredValue:function(t){var e=on();return GT(e,Pt.memoizedState,t)},useTransition:function(){var t=qm(Bu)[0],e=on().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:PT,useId:$T,unstable_isNewReconciler:!1},Nk={readContext:sn,useCallback:UT,useContext:sn,useEffect:Vv,useImperativeHandle:LT,useInsertionEffect:NT,useLayoutEffect:OT,useMemo:zT,useReducer:Km,useRef:FT,useState:function(){return Km(Bu)},useDebugValue:Wv,useDeferredValue:function(t){var e=on();return Pt===null?e.memoizedState=t:GT(e,Pt.memoizedState,t)},useTransition:function(){var t=Km(Bu)[0],e=on().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:PT,useId:$T,unstable_isNewReconciler:!1};function yn(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function D0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ct({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Lf={isMounted:function(t){return(t=t._reactInternals)?Po(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=lr(),i=Ss(t),s=Ri(n,i);s.payload=e,r!=null&&(s.callback=r),e=bs(t,s,i),e!==null&&(Cn(e,t,i,n),hd(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=lr(),i=Ss(t),s=Ri(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=bs(t,s,i),e!==null&&(Cn(e,t,i,n),hd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=lr(),n=Ss(t),i=Ri(r,n);i.tag=2,e!=null&&(i.callback=e),e=bs(t,i,n),e!==null&&(Cn(e,t,n,r),hd(e,t,n))}};function yw(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ru(r,n)||!Ru(i,s):!0}function WT(t,e,r){var n=!1,i=Is,s=e.contextType;return typeof s=="object"&&s!==null?s=sn(s):(i=wr(e)?_o:rr.current,n=e.contextTypes,s=(n=n!=null)?Ha(t,i):Is),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function vw(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Lf.enqueueReplaceState(e,e.state,null)}function F0(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Lv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=sn(s):(s=wr(e)?_o:rr.current,i.context=Ha(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(D0(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lf.enqueueReplaceState(i,i.state,null),Vd(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Xa(t,e){try{var r="",n=e;do r+=uR(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zm(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function N0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Ok=typeof WeakMap=="function"?WeakMap:Map;function XT(t,e,r){r=Ri(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){qd||(qd=!0,V0=n),N0(t,e)},r}function YT(t,e,r){r=Ri(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){N0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){N0(t,e),typeof n!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function _w(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Ok;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=qk.bind(null,t,e,r),e.then(t,t))}function xw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ww(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ri(-1,1),e.tag=2,bs(r,e,1))),r.lanes|=1),t)}var Bk=zi.ReactCurrentOwner,vr=!1;function or(t,e,r,n){e.child=t===null?ET(e,null,r,n):Va(e,t.child,r,n)}function bw(t,e,r,n,i){r=r.render;var s=e.ref;return Pa(e,i),n=Hv(t,e,r,n,s,i),r=jv(),t!==null&&!vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Oi(t,e,i)):(it&&r&&kv(e),e.flags|=1,or(t,e,n,i),e.child)}function Ew(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!e1(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,QT(t,e,s,n,i)):(t=gd(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Ru,r(o,n)&&t.ref===e.ref)return Oi(t,e,i)}return e.flags|=1,t=Ts(s,n),t.ref=e.ref,t.return=e,e.child=t}function QT(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Ru(s,n)&&t.ref===e.ref)if(vr=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(vr=!0);else return e.lanes=t.lanes,Oi(t,e,i)}return O0(t,e,r,n,i)}function qT(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(xa,kr),kr|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(xa,kr),kr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ye(xa,kr),kr|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ye(xa,kr),kr|=n;return or(t,e,i,r),e.child}function KT(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function O0(t,e,r,n,i){var s=wr(r)?_o:rr.current;return s=Ha(e,s),Pa(e,i),r=Hv(t,e,r,n,s,i),n=jv(),t!==null&&!vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Oi(t,e,i)):(it&&n&&kv(e),e.flags|=1,or(t,e,r,i),e.child)}function Sw(t,e,r,n,i){if(wr(r)){var s=!0;zd(e)}else s=!1;if(Pa(e,i),e.stateNode===null)fd(t,e),WT(e,r,n),F0(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var h=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=sn(c):(c=wr(r)?_o:rr.current,c=Ha(e,c));var f=r.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||h!==c)&&vw(e,o,n,c),is=!1;var m=e.memoizedState;o.state=m,Vd(e,n,o,i),h=e.memoizedState,l!==n||m!==h||xr.current||is?(typeof f=="function"&&(D0(e,r,f,n),h=e.memoizedState),(l=is||yw(e,r,l,n,m,h,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=h),o.props=n,o.state=h,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,TT(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:yn(e.type,l),o.props=c,p=e.pendingProps,m=o.context,h=r.contextType,typeof h=="object"&&h!==null?h=sn(h):(h=wr(r)?_o:rr.current,h=Ha(e,h));var v=r.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==h)&&vw(e,o,n,h),is=!1,m=e.memoizedState,o.state=m,Vd(e,n,o,i);var _=e.memoizedState;l!==p||m!==_||xr.current||is?(typeof v=="function"&&(D0(e,r,v,n),_=e.memoizedState),(c=is||yw(e,r,c,n,m,_,h)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,_,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,_,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=_),o.props=n,o.state=_,o.context=h,n=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return B0(t,e,r,n,s,i)}function B0(t,e,r,n,i,s){KT(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&uw(e,r,!1),Oi(t,e,s);n=e.stateNode,Bk.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Va(e,t.child,null,s),e.child=Va(e,null,l,s)):or(t,e,l,s),e.memoizedState=n.state,i&&uw(e,r,!0),e.child}function ZT(t){var e=t.stateNode;e.pendingContext?lw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lw(t,e.context,!1),Uv(t,e.containerInfo)}function Tw(t,e,r,n,i){return ja(),Dv(i),e.flags|=256,or(t,e,r,n),e.child}var L0={dehydrated:null,treeContext:null,retryLane:0};function U0(t){return{baseLanes:t,cachePool:null,transitions:null}}function JT(t,e,r){var n=e.pendingProps,i=lt.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(lt,i&1),t===null)return k0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gf(o,n,0,null),t=po(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=U0(r),e.memoizedState=L0,t):Xv(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Lk(t,e,o,n,l,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,l=i.sibling;var h={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=h,e.deletions=null):(n=Ts(i,h),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ts(l,s):(s=po(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?U0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=L0,n}return s=t.child,t=s.sibling,n=Ts(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Xv(t,e){return e=Gf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xc(t,e,r,n){return n!==null&&Dv(n),Va(e,t.child,null,r),t=Xv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lk(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Zm(Error(K(422))),xc(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Gf({mode:"visible",children:n.children},i,0,null),s=po(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Va(e,t.child,null,o),e.child.memoizedState=U0(o),e.memoizedState=L0,s);if(!(e.mode&1))return xc(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(K(419)),n=Zm(s,n,void 0),xc(t,e,o,n)}if(l=(o&t.childLanes)!==0,vr||l){if(n=Ut,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ni(t,i),Cn(n,t,i,-1))}return Jv(),n=Zm(Error(K(421))),xc(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Kk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mr=ws(i.nextSibling),Fr=e,it=!0,_n=null,t!==null&&(qr[Kr++]=Ti,qr[Kr++]=Ai,qr[Kr++]=xo,Ti=t.id,Ai=t.overflow,xo=e),e=Xv(e,n.children),e.flags|=4096,e)}function Aw(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),M0(t.return,e,r)}function Jm(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function eA(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(or(t,e,n.children,r),n=lt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Aw(t,r,e);else if(t.tag===19)Aw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ye(lt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Wd(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Jm(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wd(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Jm(e,!0,r,null,s);break;case"together":Jm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Oi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),bo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,r=Ts(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ts(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Uk(t,e,r){switch(e.tag){case 3:ZT(e),ja();break;case 5:AT(e);break;case 1:wr(e.type)&&zd(e);break;case 4:Uv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ye(Hd,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ye(lt,lt.current&1),e.flags|=128,null):r&e.child.childLanes?JT(t,e,r):(Ye(lt,lt.current&1),t=Oi(t,e,r),t!==null?t.sibling:null);Ye(lt,lt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eA(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(lt,lt.current),n)break;return null;case 22:case 23:return e.lanes=0,qT(t,e,r)}return Oi(t,e,r)}var tA,z0,rA,nA;tA=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};z0=function(){};rA=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,co(oi.current);var s=null;switch(r){case"input":i=l0(t,i),n=l0(t,n),s=[];break;case"select":i=ct({},i,{value:void 0}),n=ct({},n,{value:void 0}),s=[];break;case"textarea":i=c0(t,i),n=c0(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ld)}f0(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Eu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var h=n[c];if(l=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&h!==l&&(h!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in h)h.hasOwnProperty(o)&&l[o]!==h[o]&&(r||(r={}),r[o]=h[o])}else r||(s||(s=[]),s.push(c,r)),r=h;else c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,l=l?l.__html:void 0,h!=null&&l!==h&&(s=s||[]).push(c,h)):c==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(c,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(c)?(h!=null&&c==="onScroll"&&Ke("scroll",t),s||l===h||(s=[])):(s=s||[]).push(c,h))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};nA=function(t,e,r,n){r!==n&&(e.flags|=4)};function Fl(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function er(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function zk(t,e,r){var n=e.pendingProps;switch(Mv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(e),null;case 1:return wr(e.type)&&Ud(),er(e),null;case 3:return n=e.stateNode,Wa(),Je(xr),Je(rr),Gv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(vc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(Y0(_n),_n=null))),z0(t,e),er(e),null;case 5:zv(e);var i=co(Nu.current);if(r=e.type,t!==null&&e.stateNode!=null)rA(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(K(166));return er(e),null}if(t=co(oi.current),vc(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[ri]=e,n[Du]=s,t=(e.mode&1)!==0,r){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(i=0;i<Ql.length;i++)Ke(Ql[i],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":Nx(n,s),Ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",n);break;case"textarea":Bx(n,s),Ke("invalid",n)}f0(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&yc(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&yc(n.textContent,l,t),i=["children",""+l]):Eu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ke("scroll",n)}switch(r){case"input":uc(n),Ox(n,s,!0);break;case"textarea":uc(n),Lx(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ld)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kS(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ri]=e,t[Du]=n,tA(t,e,!1,!1),e.stateNode=t;e:{switch(o=p0(r,n),r){case"dialog":Ke("cancel",t),Ke("close",t),i=n;break;case"iframe":case"object":case"embed":Ke("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ql.length;i++)Ke(Ql[i],t);i=n;break;case"source":Ke("error",t),i=n;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),i=n;break;case"details":Ke("toggle",t),i=n;break;case"input":Nx(t,n),i=l0(t,n),Ke("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ct({},n,{value:void 0}),Ke("invalid",t);break;case"textarea":Bx(t,n),i=c0(t,n),Ke("invalid",t);break;default:i=n}f0(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];s==="style"?FS(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&MS(t,h)):s==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&Su(t,h):typeof h=="number"&&Su(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Eu.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Ke("scroll",t):h!=null&&yv(t,s,h,o))}switch(r){case"input":uc(t),Ox(t,n,!1);break;case"textarea":uc(t),Lx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ps(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Sa(t,!!n.multiple,s,!1):n.defaultValue!=null&&Sa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ld)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return er(e),null;case 6:if(t&&e.stateNode!=null)nA(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(K(166));if(r=co(Nu.current),co(oi.current),vc(e)){if(n=e.stateNode,r=e.memoizedProps,n[ri]=e,(s=n.nodeValue!==r)&&(t=Fr,t!==null))switch(t.tag){case 3:yc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yc(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ri]=e,e.stateNode=n}return er(e),null;case 13:if(Je(lt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Mr!==null&&e.mode&1&&!(e.flags&128))wT(),ja(),e.flags|=98560,s=!1;else if(s=vc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[ri]=e}else ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;er(e),s=!1}else _n!==null&&(Y0(_n),_n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?It===0&&(It=3):Jv())),e.updateQueue!==null&&(e.flags|=4),er(e),null);case 4:return Wa(),z0(t,e),t===null&&ku(e.stateNode.containerInfo),er(e),null;case 10:return Ov(e.type._context),er(e),null;case 17:return wr(e.type)&&Ud(),er(e),null;case 19:if(Je(lt),s=e.memoizedState,s===null)return er(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Fl(s,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wd(t),o!==null){for(e.flags|=128,Fl(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ye(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&xt()>Ya&&(e.flags|=128,n=!0,Fl(s,!1),e.lanes=4194304)}else{if(!n)if(t=Wd(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Fl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!it)return er(e),null}else 2*xt()-s.renderingStartTime>Ya&&r!==1073741824&&(e.flags|=128,n=!0,Fl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xt(),e.sibling=null,r=lt.current,Ye(lt,n?r&1|2:r&1),e):(er(e),null);case 22:case 23:return Zv(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?kr&1073741824&&(er(e),e.subtreeFlags&6&&(e.flags|=8192)):er(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function Gk(t,e){switch(Mv(e),e.tag){case 1:return wr(e.type)&&Ud(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wa(),Je(xr),Je(rr),Gv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zv(e),null;case 13:if(Je(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(lt),null;case 4:return Wa(),null;case 10:return Ov(e.type._context),null;case 22:case 23:return Zv(),null;case 24:return null;default:return null}}var wc=!1,tr=!1,$k=typeof WeakSet=="function"?WeakSet:Set,ce=null;function _a(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){mt(t,e,n)}else r.current=null}function G0(t,e,r){try{r()}catch(n){mt(t,e,n)}}var Cw=!1;function Hk(t,e){if(S0=Nd,t=lT(),Rv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,h=-1,c=0,f=0,p=t,m=null;t:for(;;){for(var v;p!==r||i!==0&&p.nodeType!==3||(l=o+i),p!==s||n!==0&&p.nodeType!==3||(h=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===r&&++c===i&&(l=o),m===s&&++f===n&&(h=o),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}r=l===-1||h===-1?null:{start:l,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(T0={focusedElem:t,selectionRange:r},Nd=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,T=_.memoizedState,x=e.stateNode,E=x.getSnapshotBeforeUpdate(e.elementType===e.type?b:yn(e.type,b),T);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(A){mt(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return _=Cw,Cw=!1,_}function du(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&G0(e,r,s)}i=i.next}while(i!==n)}}function Uf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function $0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function iA(t){var e=t.alternate;e!==null&&(t.alternate=null,iA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[Du],delete e[P0],delete e[Tk],delete e[Ak])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sA(t){return t.tag===5||t.tag===3||t.tag===4}function Pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function H0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ld));else if(n!==4&&(t=t.child,t!==null))for(H0(t,e,r),t=t.sibling;t!==null;)H0(t,e,r),t=t.sibling}function j0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(j0(t,e,r),t=t.sibling;t!==null;)j0(t,e,r),t=t.sibling}var Vt=null,vn=!1;function Zi(t,e,r){for(r=r.child;r!==null;)oA(t,e,r),r=r.sibling}function oA(t,e,r){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(kf,r)}catch{}switch(r.tag){case 5:tr||_a(r,e);case 6:var n=Vt,i=vn;Vt=null,Zi(t,e,r),Vt=n,vn=i,Vt!==null&&(vn?(t=Vt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Vt.removeChild(r.stateNode));break;case 18:Vt!==null&&(vn?(t=Vt,r=r.stateNode,t.nodeType===8?Wm(t.parentNode,r):t.nodeType===1&&Wm(t,r),Pu(t)):Wm(Vt,r.stateNode));break;case 4:n=Vt,i=vn,Vt=r.stateNode.containerInfo,vn=!0,Zi(t,e,r),Vt=n,vn=i;break;case 0:case 11:case 14:case 15:if(!tr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&G0(r,e,o),i=i.next}while(i!==n)}Zi(t,e,r);break;case 1:if(!tr&&(_a(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){mt(r,e,l)}Zi(t,e,r);break;case 21:Zi(t,e,r);break;case 22:r.mode&1?(tr=(n=tr)||r.memoizedState!==null,Zi(t,e,r),tr=n):Zi(t,e,r);break;default:Zi(t,e,r)}}function Iw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new $k),e.forEach(function(n){var i=Zk.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function dn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,vn=!1;break e;case 3:Vt=l.stateNode.containerInfo,vn=!0;break e;case 4:Vt=l.stateNode.containerInfo,vn=!0;break e}l=l.return}if(Vt===null)throw Error(K(160));oA(s,o,i),Vt=null,vn=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(c){mt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aA(e,t),e=e.sibling}function aA(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),jn(t),n&4){try{du(3,t,t.return),Uf(3,t)}catch(b){mt(t,t.return,b)}try{du(5,t,t.return)}catch(b){mt(t,t.return,b)}}break;case 1:dn(e,t),jn(t),n&512&&r!==null&&_a(r,r.return);break;case 5:if(dn(e,t),jn(t),n&512&&r!==null&&_a(r,r.return),t.flags&32){var i=t.stateNode;try{Su(i,"")}catch(b){mt(t,t.return,b)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&IS(i,s),p0(l,o);var c=p0(l,s);for(o=0;o<h.length;o+=2){var f=h[o],p=h[o+1];f==="style"?FS(i,p):f==="dangerouslySetInnerHTML"?MS(i,p):f==="children"?Su(i,p):yv(i,f,p,c)}switch(l){case"input":u0(i,s);break;case"textarea":RS(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Sa(i,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?Sa(i,!!s.multiple,s.defaultValue,!0):Sa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Du]=s}catch(b){mt(t,t.return,b)}}break;case 6:if(dn(e,t),jn(t),n&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){mt(t,t.return,b)}}break;case 3:if(dn(e,t),jn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Pu(e.containerInfo)}catch(b){mt(t,t.return,b)}break;case 4:dn(e,t),jn(t);break;case 13:dn(e,t),jn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qv=xt())),n&4&&Iw(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(tr=(c=tr)||f,dn(e,t),tr=c):dn(e,t),jn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(ce=t,f=t.child;f!==null;){for(p=ce=f;ce!==null;){switch(m=ce,v=m.child,m.tag){case 0:case 11:case 14:case 15:du(4,m,m.return);break;case 1:_a(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(b){mt(n,r,b)}}break;case 5:_a(m,m.return);break;case 22:if(m.memoizedState!==null){kw(p);continue}}v!==null?(v.return=m,ce=v):kw(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,h=p.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,l.style.display=DS("display",o))}catch(b){mt(t,t.return,b)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(b){mt(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:dn(e,t),jn(t),n&4&&Iw(t);break;case 21:break;default:dn(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(sA(r)){var n=r;break e}r=r.return}throw Error(K(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Su(i,""),n.flags&=-33);var s=Pw(t);j0(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Pw(t);H0(t,l,o);break;default:throw Error(K(161))}}catch(h){mt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jk(t,e,r){ce=t,lA(t)}function lA(t,e,r){for(var n=(t.mode&1)!==0;ce!==null;){var i=ce,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||wc;if(!o){var l=i.alternate,h=l!==null&&l.memoizedState!==null||tr;l=wc;var c=tr;if(wc=o,(tr=h)&&!c)for(ce=i;ce!==null;)o=ce,h=o.child,o.tag===22&&o.memoizedState!==null?Mw(i):h!==null?(h.return=o,ce=h):Mw(i);for(;s!==null;)ce=s,lA(s),s=s.sibling;ce=i,wc=l,tr=c}Rw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ce=s):Rw(t)}}function Rw(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||Uf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!tr)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:yn(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&pw(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}pw(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Pu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}tr||e.flags&512&&$0(e)}catch(m){mt(e,e.return,m)}}if(e===t){ce=null;break}if(r=e.sibling,r!==null){r.return=e.return,ce=r;break}ce=e.return}}function kw(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ce=r;break}ce=e.return}}function Mw(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Uf(4,e)}catch(h){mt(e,r,h)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(h){mt(e,i,h)}}var s=e.return;try{$0(e)}catch(h){mt(e,s,h)}break;case 5:var o=e.return;try{$0(e)}catch(h){mt(e,o,h)}}}catch(h){mt(e,e.return,h)}if(e===t){ce=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ce=l;break}ce=e.return}}var Vk=Math.ceil,Qd=zi.ReactCurrentDispatcher,Yv=zi.ReactCurrentOwner,nn=zi.ReactCurrentBatchConfig,Le=0,Ut=null,St=null,Xt=0,kr=0,xa=Ds(0),It=0,Uu=null,bo=0,zf=0,Qv=0,fu=null,yr=null,qv=0,Ya=1/0,bi=null,qd=!1,V0=null,Es=null,bc=!1,cs=null,Kd=0,pu=0,W0=null,pd=-1,md=0;function lr(){return Le&6?xt():pd!==-1?pd:pd=xt()}function Ss(t){return t.mode&1?Le&2&&Xt!==0?Xt&-Xt:Pk.transition!==null?(md===0&&(md=WS()),md):(t=We,t!==0||(t=window.event,t=t===void 0?16:JS(t.type)),t):1}function Cn(t,e,r,n){if(50<pu)throw pu=0,W0=null,Error(K(185));oh(t,r,n),(!(Le&2)||t!==Ut)&&(t===Ut&&(!(Le&2)&&(zf|=r),It===4&&ls(t,Xt)),br(t,n),r===1&&Le===0&&!(e.mode&1)&&(Ya=xt()+500,Of&&Fs()))}function br(t,e){var r=t.callbackNode;PR(t,e);var n=Fd(t,t===Ut?Xt:0);if(n===0)r!==null&&Gx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Gx(r),e===1)t.tag===0?Ck(Dw.bind(null,t)):vT(Dw.bind(null,t)),Ek(function(){!(Le&6)&&Fs()}),r=null;else{switch(XS(n)){case 1:r=bv;break;case 4:r=jS;break;case 16:r=Dd;break;case 536870912:r=VS;break;default:r=Dd}r=gA(r,uA.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function uA(t,e){if(pd=-1,md=0,Le&6)throw Error(K(327));var r=t.callbackNode;if(Ia()&&t.callbackNode!==r)return null;var n=Fd(t,t===Ut?Xt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Zd(t,n);else{e=n;var i=Le;Le|=2;var s=cA();(Ut!==t||Xt!==e)&&(bi=null,Ya=xt()+500,fo(t,e));do try{Yk();break}catch(l){hA(t,l)}while(!0);Nv(),Qd.current=s,Le=i,St!==null?e=0:(Ut=null,Xt=0,e=It)}if(e!==0){if(e===2&&(i=_0(t),i!==0&&(n=i,e=X0(t,i))),e===1)throw r=Uu,fo(t,0),ls(t,n),br(t,xt()),r;if(e===6)ls(t,n);else{if(i=t.current.alternate,!(n&30)&&!Wk(i)&&(e=Zd(t,n),e===2&&(s=_0(t),s!==0&&(n=s,e=X0(t,s))),e===1))throw r=Uu,fo(t,0),ls(t,n),br(t,xt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(K(345));case 2:Js(t,yr,bi);break;case 3:if(ls(t,n),(n&130023424)===n&&(e=qv+500-xt(),10<e)){if(Fd(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){lr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=C0(Js.bind(null,t,yr,bi),e);break}Js(t,yr,bi);break;case 4:if(ls(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-An(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vk(n/1960))-n,10<n){t.timeoutHandle=C0(Js.bind(null,t,yr,bi),n);break}Js(t,yr,bi);break;case 5:Js(t,yr,bi);break;default:throw Error(K(329))}}}return br(t,xt()),t.callbackNode===r?uA.bind(null,t):null}function X0(t,e){var r=fu;return t.current.memoizedState.isDehydrated&&(fo(t,e).flags|=256),t=Zd(t,e),t!==2&&(e=yr,yr=r,e!==null&&Y0(e)),t}function Y0(t){yr===null?yr=t:yr.push.apply(yr,t)}function Wk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Rn(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~Qv,e&=~zf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-An(e),n=1<<r;t[r]=-1,e&=~n}}function Dw(t){if(Le&6)throw Error(K(327));Ia();var e=Fd(t,0);if(!(e&1))return br(t,xt()),null;var r=Zd(t,e);if(t.tag!==0&&r===2){var n=_0(t);n!==0&&(e=n,r=X0(t,n))}if(r===1)throw r=Uu,fo(t,0),ls(t,e),br(t,xt()),r;if(r===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Js(t,yr,bi),br(t,xt()),null}function Kv(t,e){var r=Le;Le|=1;try{return t(e)}finally{Le=r,Le===0&&(Ya=xt()+500,Of&&Fs())}}function Eo(t){cs!==null&&cs.tag===0&&!(Le&6)&&Ia();var e=Le;Le|=1;var r=nn.transition,n=We;try{if(nn.transition=null,We=1,t)return t()}finally{We=n,nn.transition=r,Le=e,!(Le&6)&&Fs()}}function Zv(){kr=xa.current,Je(xa)}function fo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,bk(r)),St!==null)for(r=St.return;r!==null;){var n=r;switch(Mv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ud();break;case 3:Wa(),Je(xr),Je(rr),Gv();break;case 5:zv(n);break;case 4:Wa();break;case 13:Je(lt);break;case 19:Je(lt);break;case 10:Ov(n.type._context);break;case 22:case 23:Zv()}r=r.return}if(Ut=t,St=t=Ts(t.current,null),Xt=kr=e,It=0,Uu=null,Qv=zf=bo=0,yr=fu=null,ho!==null){for(e=0;e<ho.length;e++)if(r=ho[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}ho=null}return t}function hA(t,e){do{var r=St;try{if(Nv(),cd.current=Yd,Xd){for(var n=ht.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Xd=!1}if(wo=0,Ot=Pt=ht=null,cu=!1,Ou=0,Yv.current=null,r===null||r.return===null){It=1,Uu=e,St=null;break}e:{var s=t,o=r.return,l=r,h=e;if(e=Xt,l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var c=h,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=xw(o);if(v!==null){v.flags&=-257,ww(v,o,l,s,e),v.mode&1&&_w(s,c,e),e=v,h=c;var _=e.updateQueue;if(_===null){var b=new Set;b.add(h),e.updateQueue=b}else _.add(h);break e}else{if(!(e&1)){_w(s,c,e),Jv();break e}h=Error(K(426))}}else if(it&&l.mode&1){var T=xw(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),ww(T,o,l,s,e),Dv(Xa(h,l));break e}}s=h=Xa(h,l),It!==4&&(It=2),fu===null?fu=[s]:fu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=XT(s,h,e);fw(s,x);break e;case 1:l=h;var E=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Es===null||!Es.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=YT(s,l,e);fw(s,A);break e}}s=s.return}while(s!==null)}fA(r)}catch(P){e=P,St===r&&r!==null&&(St=r=r.return);continue}break}while(!0)}function cA(){var t=Qd.current;return Qd.current=Yd,t===null?Yd:t}function Jv(){(It===0||It===3||It===2)&&(It=4),Ut===null||!(bo&268435455)&&!(zf&268435455)||ls(Ut,Xt)}function Zd(t,e){var r=Le;Le|=2;var n=cA();(Ut!==t||Xt!==e)&&(bi=null,fo(t,e));do try{Xk();break}catch(i){hA(t,i)}while(!0);if(Nv(),Le=r,Qd.current=n,St!==null)throw Error(K(261));return Ut=null,Xt=0,It}function Xk(){for(;St!==null;)dA(St)}function Yk(){for(;St!==null&&!_R();)dA(St)}function dA(t){var e=mA(t.alternate,t,kr);t.memoizedProps=t.pendingProps,e===null?fA(t):St=e,Yv.current=null}function fA(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Gk(r,e),r!==null){r.flags&=32767,St=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,St=null;return}}else if(r=zk(r,e,kr),r!==null){St=r;return}if(e=e.sibling,e!==null){St=e;return}St=e=t}while(e!==null);It===0&&(It=5)}function Js(t,e,r){var n=We,i=nn.transition;try{nn.transition=null,We=1,Qk(t,e,r,n)}finally{nn.transition=i,We=n}return null}function Qk(t,e,r,n){do Ia();while(cs!==null);if(Le&6)throw Error(K(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(IR(t,s),t===Ut&&(St=Ut=null,Xt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bc||(bc=!0,gA(Dd,function(){return Ia(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=nn.transition,nn.transition=null;var o=We;We=1;var l=Le;Le|=4,Yv.current=null,Hk(t,r),aA(r,t),mk(T0),Nd=!!S0,T0=S0=null,t.current=r,jk(r),xR(),Le=l,We=o,nn.transition=s}else t.current=r;if(bc&&(bc=!1,cs=t,Kd=i),s=t.pendingLanes,s===0&&(Es=null),ER(r.stateNode),br(t,xt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(qd)throw qd=!1,t=V0,V0=null,t;return Kd&1&&t.tag!==0&&Ia(),s=t.pendingLanes,s&1?t===W0?pu++:(pu=0,W0=t):pu=0,Fs(),null}function Ia(){if(cs!==null){var t=XS(Kd),e=nn.transition,r=We;try{if(nn.transition=null,We=16>t?16:t,cs===null)var n=!1;else{if(t=cs,cs=null,Kd=0,Le&6)throw Error(K(331));var i=Le;for(Le|=4,ce=t.current;ce!==null;){var s=ce,o=s.child;if(ce.flags&16){var l=s.deletions;if(l!==null){for(var h=0;h<l.length;h++){var c=l[h];for(ce=c;ce!==null;){var f=ce;switch(f.tag){case 0:case 11:case 15:du(8,f,s)}var p=f.child;if(p!==null)p.return=f,ce=p;else for(;ce!==null;){f=ce;var m=f.sibling,v=f.return;if(iA(f),f===c){ce=null;break}if(m!==null){m.return=v,ce=m;break}ce=v}}}var _=s.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var T=b.sibling;b.sibling=null,b=T}while(b!==null)}}ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ce=o;else e:for(;ce!==null;){if(s=ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:du(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,ce=x;break e}ce=s.return}}var E=t.current;for(ce=E;ce!==null;){o=ce;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ce=w;else e:for(o=E;ce!==null;){if(l=ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Uf(9,l)}}catch(P){mt(l,l.return,P)}if(l===o){ce=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,ce=A;break e}ce=l.return}}if(Le=i,Fs(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(kf,t)}catch{}n=!0}return n}finally{We=r,nn.transition=e}}return!1}function Fw(t,e,r){e=Xa(r,e),e=XT(t,e,1),t=bs(t,e,1),e=lr(),t!==null&&(oh(t,1,e),br(t,e))}function mt(t,e,r){if(t.tag===3)Fw(t,t,r);else for(;e!==null;){if(e.tag===3){Fw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Es===null||!Es.has(n))){t=Xa(r,t),t=YT(e,t,1),e=bs(e,t,1),t=lr(),e!==null&&(oh(e,1,t),br(e,t));break}}e=e.return}}function qk(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=lr(),t.pingedLanes|=t.suspendedLanes&r,Ut===t&&(Xt&r)===r&&(It===4||It===3&&(Xt&130023424)===Xt&&500>xt()-qv?fo(t,0):Qv|=r),br(t,e)}function pA(t,e){e===0&&(t.mode&1?(e=dc,dc<<=1,!(dc&130023424)&&(dc=4194304)):e=1);var r=lr();t=Ni(t,e),t!==null&&(oh(t,e,r),br(t,r))}function Kk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),pA(t,r)}function Zk(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(K(314))}n!==null&&n.delete(e),pA(t,r)}var mA;mA=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||xr.current)vr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return vr=!1,Uk(t,e,r);vr=!!(t.flags&131072)}else vr=!1,it&&e.flags&1048576&&_T(e,$d,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;fd(t,e),t=e.pendingProps;var i=Ha(e,rr.current);Pa(e,r),i=Hv(null,e,n,t,i,r);var s=jv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wr(n)?(s=!0,zd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Lv(e),i.updater=Lf,e.stateNode=i,i._reactInternals=e,F0(e,n,t,r),e=B0(null,e,n,!0,s,r)):(e.tag=0,it&&s&&kv(e),or(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(fd(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=eM(n),t=yn(n,t),i){case 0:e=O0(null,e,n,t,r);break e;case 1:e=Sw(null,e,n,t,r);break e;case 11:e=bw(null,e,n,t,r);break e;case 14:e=Ew(null,e,n,yn(n.type,t),r);break e}throw Error(K(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:yn(n,i),O0(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:yn(n,i),Sw(t,e,n,i,r);case 3:e:{if(ZT(e),t===null)throw Error(K(387));n=e.pendingProps,s=e.memoizedState,i=s.element,TT(t,e),Vd(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Xa(Error(K(423)),e),e=Tw(t,e,n,r,i);break e}else if(n!==i){i=Xa(Error(K(424)),e),e=Tw(t,e,n,r,i);break e}else for(Mr=ws(e.stateNode.containerInfo.firstChild),Fr=e,it=!0,_n=null,r=ET(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ja(),n===i){e=Oi(t,e,r);break e}or(t,e,n,r)}e=e.child}return e;case 5:return AT(e),t===null&&k0(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,A0(n,i)?o=null:s!==null&&A0(n,s)&&(e.flags|=32),KT(t,e),or(t,e,o,r),e.child;case 6:return t===null&&k0(e),null;case 13:return JT(t,e,r);case 4:return Uv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Va(e,null,n,r):or(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:yn(n,i),bw(t,e,n,i,r);case 7:return or(t,e,e.pendingProps,r),e.child;case 8:return or(t,e,e.pendingProps.children,r),e.child;case 12:return or(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ye(Hd,n._currentValue),n._currentValue=o,s!==null)if(Rn(s.value,o)){if(s.children===i.children&&!xr.current){e=Oi(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var h=l.firstContext;h!==null;){if(h.context===n){if(s.tag===1){h=Ri(-1,r&-r),h.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?h.next=h:(h.next=f.next,f.next=h),c.pending=h}}s.lanes|=r,h=s.alternate,h!==null&&(h.lanes|=r),M0(s.return,r,e),l.lanes|=r;break}h=h.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),M0(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}or(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Pa(e,r),i=sn(i),n=n(i),e.flags|=1,or(t,e,n,r),e.child;case 14:return n=e.type,i=yn(n,e.pendingProps),i=yn(n.type,i),Ew(t,e,n,i,r);case 15:return QT(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:yn(n,i),fd(t,e),e.tag=1,wr(n)?(t=!0,zd(e)):t=!1,Pa(e,r),WT(e,n,i),F0(e,n,i,r),B0(null,e,n,!0,t,r);case 19:return eA(t,e,r);case 22:return qT(t,e,r)}throw Error(K(156,e.tag))};function gA(t,e){return HS(t,e)}function Jk(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,r,n){return new Jk(t,e,r,n)}function e1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eM(t){if(typeof t=="function")return e1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_v)return 11;if(t===xv)return 14}return 2}function Ts(t,e){var r=t.alternate;return r===null?(r=en(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function gd(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")e1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ha:return po(r.children,i,s,e);case vv:o=8,i|=8;break;case i0:return t=en(12,r,e,i|2),t.elementType=i0,t.lanes=s,t;case s0:return t=en(13,r,e,i),t.elementType=s0,t.lanes=s,t;case o0:return t=en(19,r,e,i),t.elementType=o0,t.lanes=s,t;case AS:return Gf(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SS:o=10;break e;case TS:o=9;break e;case _v:o=11;break e;case xv:o=14;break e;case ns:o=16,n=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=en(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function po(t,e,r,n){return t=en(7,t,n,e),t.lanes=r,t}function Gf(t,e,r,n){return t=en(22,t,n,e),t.elementType=AS,t.lanes=r,t.stateNode={isHidden:!1},t}function eg(t,e,r){return t=en(6,t,null,e),t.lanes=r,t}function tg(t,e,r){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tM(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nm(0),this.expirationTimes=Nm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nm(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function t1(t,e,r,n,i,s,o,l,h){return t=new tM(t,e,r,l,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=en(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lv(s),t}function rM(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ua,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function yA(t){if(!t)return Is;t=t._reactInternals;e:{if(Po(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var r=t.type;if(wr(r))return yT(t,r,e)}return e}function vA(t,e,r,n,i,s,o,l,h){return t=t1(r,n,!0,t,i,s,o,l,h),t.context=yA(null),r=t.current,n=lr(),i=Ss(r),s=Ri(n,i),s.callback=e??null,bs(r,s,i),t.current.lanes=i,oh(t,i,n),br(t,n),t}function $f(t,e,r,n){var i=e.current,s=lr(),o=Ss(i);return r=yA(r),e.context===null?e.context=r:e.pendingContext=r,e=Ri(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=bs(i,e,o),t!==null&&(Cn(t,i,o,s),hd(t,i,o)),o}function Jd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function r1(t,e){Nw(t,e),(t=t.alternate)&&Nw(t,e)}function nM(){return null}var _A=typeof reportError=="function"?reportError:function(t){console.error(t)};function n1(t){this._internalRoot=t}Hf.prototype.render=n1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));$f(t,e,null,null)};Hf.prototype.unmount=n1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Eo(function(){$f(null,t,null,null)}),e[Fi]=null}};function Hf(t){this._internalRoot=t}Hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=qS();t={blockedOn:null,target:t,priority:e};for(var r=0;r<as.length&&e!==0&&e<as[r].priority;r++);as.splice(r,0,t),r===0&&ZS(t)}};function i1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ow(){}function iM(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Jd(o);s.call(c)}}var o=vA(e,n,t,0,null,!1,!1,"",Ow);return t._reactRootContainer=o,t[Fi]=o.current,ku(t.nodeType===8?t.parentNode:t),Eo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var c=Jd(h);l.call(c)}}var h=t1(t,0,!1,null,null,!1,!1,"",Ow);return t._reactRootContainer=h,t[Fi]=h.current,ku(t.nodeType===8?t.parentNode:t),Eo(function(){$f(e,h,r,n)}),h}function Vf(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var h=Jd(o);l.call(h)}}$f(e,o,t,i)}else o=iM(r,e,t,i,n);return Jd(o)}YS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Yl(e.pendingLanes);r!==0&&(Ev(e,r|1),br(e,xt()),!(Le&6)&&(Ya=xt()+500,Fs()))}break;case 13:Eo(function(){var n=Ni(t,1);if(n!==null){var i=lr();Cn(n,t,1,i)}}),r1(t,1)}};Sv=function(t){if(t.tag===13){var e=Ni(t,134217728);if(e!==null){var r=lr();Cn(e,t,134217728,r)}r1(t,134217728)}};QS=function(t){if(t.tag===13){var e=Ss(t),r=Ni(t,e);if(r!==null){var n=lr();Cn(r,t,e,n)}r1(t,e)}};qS=function(){return We};KS=function(t,e){var r=We;try{return We=t,e()}finally{We=r}};g0=function(t,e,r){switch(e){case"input":if(u0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Nf(n);if(!i)throw Error(K(90));PS(n),u0(n,i)}}}break;case"textarea":RS(t,r);break;case"select":e=r.value,e!=null&&Sa(t,!!r.multiple,e,!1)}};BS=Kv;LS=Eo;var sM={usingClientEntryPoint:!1,Events:[lh,pa,Nf,NS,OS,Kv]},Nl={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oM={bundleType:Nl.bundleType,version:Nl.version,rendererPackageName:Nl.rendererPackageName,rendererConfig:Nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GS(t),t===null?null:t.stateNode},findFiberByHostInstance:Nl.findFiberByHostInstance||nM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{kf=Ec.inject(oM),si=Ec}catch{}}Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sM;Br.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!i1(e))throw Error(K(200));return rM(t,e,null,r)};Br.createRoot=function(t,e){if(!i1(t))throw Error(K(299));var r=!1,n="",i=_A;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=t1(t,1,!1,null,null,r,!1,n,i),t[Fi]=e.current,ku(t.nodeType===8?t.parentNode:t),new n1(e)};Br.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=GS(e),t=t===null?null:t.stateNode,t};Br.flushSync=function(t){return Eo(t)};Br.hydrate=function(t,e,r){if(!jf(e))throw Error(K(200));return Vf(null,t,e,!0,r)};Br.hydrateRoot=function(t,e,r){if(!i1(t))throw Error(K(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=_A;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=vA(e,null,t,1,r??null,i,!1,s,o),t[Fi]=e.current,ku(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Hf(e)};Br.render=function(t,e,r){if(!jf(e))throw Error(K(200));return Vf(null,t,e,!1,r)};Br.unmountComponentAtNode=function(t){if(!jf(t))throw Error(K(40));return t._reactRootContainer?(Eo(function(){Vf(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};Br.unstable_batchedUpdates=Kv;Br.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!jf(r))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Vf(t,e,r,!1,n)};Br.version="18.3.1-next-f1338f8080-20240426";function xA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xA)}catch(t){console.error(t)}}xA(),xS.exports=Br;var wA=xS.exports,bA,Bw=wA;bA=Bw.createRoot,Bw.hydrateRoot;var EA={exports:{}},Io=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(Io||{}),SA=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(SA||{}),Q0=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Q0||{}),be=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(be||{}),En=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(En||{}),ee=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(ee||{}),Ra=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Ra||{}),ve=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(ve||{}),ae=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(ae||{}),Ci=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Ci||{}),ki=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(ki||{}),ui=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(ui||{}),_r=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(_r||{}),ei=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(ei||{}),s1=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(s1||{}),tn=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(tn||{}),Ct=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Ct||{}),Et=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(Et||{}),ai=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(ai||{});const aM={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},le={ADAPTER:aM,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var rg=/iPhone/i,Lw=/iPod/i,Uw=/iPad/i,zw=/\biOS-universal(?:.+)Mac\b/i,ng=/\bAndroid(?:.+)Mobile\b/i,Gw=/Android/i,Yo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Sc=/Silk/i,_i=/Windows Phone/i,$w=/\bWindows(?:.+)ARM\b/i,Hw=/BlackBerry/i,jw=/BB10/i,Vw=/Opera Mini/i,Ww=/\b(CriOS|Chrome)(?:.+)Mobile/i,Xw=/Mobile(?:.+)Firefox\b/i,Yw=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function lM(t){return function(e){return e.test(t)}}function Qw(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=lM(r),s={apple:{phone:i(rg)&&!i(_i),ipod:i(Lw),tablet:!i(rg)&&(i(Uw)||Yw(e))&&!i(_i),universal:i(zw),device:(i(rg)||i(Lw)||i(Uw)||i(zw)||Yw(e))&&!i(_i)},amazon:{phone:i(Yo),tablet:!i(Yo)&&i(Sc),device:i(Yo)||i(Sc)},android:{phone:!i(_i)&&i(Yo)||!i(_i)&&i(ng),tablet:!i(_i)&&!i(Yo)&&!i(ng)&&(i(Sc)||i(Gw)),device:!i(_i)&&(i(Yo)||i(Sc)||i(ng)||i(Gw))||i(/\bokhttp\b/i)},windows:{phone:i(_i),tablet:i($w),device:i(_i)||i($w)},other:{blackberry:i(Hw),blackberry10:i(jw),opera:i(Vw),firefox:i(Xw),chrome:i(Ww),device:i(Hw)||i(jw)||i(Vw)||i(Xw)||i(Ww)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const uM=Qw.default??Qw,Pi=uM(globalThis.navigator);le.RETINA_PREFIX=/@([0-9\.]+)x/;le.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var TA={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(h,c,f){this.fn=h,this.context=c,this.once=f||!1}function s(h,c,f,p,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,p||h,m),_=r?r+c:c;return h._events[_]?h._events[_].fn?h._events[_]=[h._events[_],v]:h._events[_].push(v):(h._events[_]=v,h._eventsCount++),h}function o(h,c){--h._eventsCount===0?h._events=new n:delete h._events[c]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],f,p;if(this._eventsCount===0)return c;for(p in f=this._events)e.call(f,p)&&c.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},l.prototype.listeners=function(c){var f=r?r+c:c,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,v=p.length,_=new Array(v);m<v;m++)_[m]=p[m].fn;return _},l.prototype.listenerCount=function(c){var f=r?r+c:c,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(c,f,p,m,v,_){var b=r?r+c:c;if(!this._events[b])return!1;var T=this._events[b],x=arguments.length,E,w;if(T.fn){switch(T.once&&this.removeListener(c,T.fn,void 0,!0),x){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,p),!0;case 4:return T.fn.call(T.context,f,p,m),!0;case 5:return T.fn.call(T.context,f,p,m,v),!0;case 6:return T.fn.call(T.context,f,p,m,v,_),!0}for(w=1,E=new Array(x-1);w<x;w++)E[w-1]=arguments[w];T.fn.apply(T.context,E)}else{var A=T.length,P;for(w=0;w<A;w++)switch(T[w].once&&this.removeListener(c,T[w].fn,void 0,!0),x){case 1:T[w].fn.call(T[w].context);break;case 2:T[w].fn.call(T[w].context,f);break;case 3:T[w].fn.call(T[w].context,f,p);break;case 4:T[w].fn.call(T[w].context,f,p,m);break;default:if(!E)for(P=1,E=new Array(x-1);P<x;P++)E[P-1]=arguments[P];T[w].fn.apply(T[w].context,E)}}return!0},l.prototype.on=function(c,f,p){return s(this,c,f,p,!1)},l.prototype.once=function(c,f,p){return s(this,c,f,p,!0)},l.prototype.removeListener=function(c,f,p,m){var v=r?r+c:c;if(!this._events[v])return this;if(!f)return o(this,v),this;var _=this._events[v];if(_.fn)_.fn===f&&(!m||_.once)&&(!p||_.context===p)&&o(this,v);else{for(var b=0,T=[],x=_.length;b<x;b++)(_[b].fn!==f||m&&!_[b].once||p&&_[b].context!==p)&&T.push(_[b]);T.length?this._events[v]=T.length===1?T[0]:T:o(this,v)}return this},l.prototype.removeAllListeners=function(c){var f;return c?(f=r?r+c:c,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(TA);var hM=TA.exports;const hh=If(hM);var o1={exports:{}};o1.exports=Wf;o1.exports.default=Wf;function Wf(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,s=AA(t,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var l,h,c,f,p,m,v;if(n&&(s=mM(t,e,s,r)),t.length>80*r){l=c=t[0],h=f=t[1];for(var _=r;_<i;_+=r)p=t[_],m=t[_+1],p<l&&(l=p),m<h&&(h=m),p>c&&(c=p),m>f&&(f=m);v=Math.max(c-l,f-h),v=v!==0?32767/v:0}return zu(s,o,r,l,h,v,0),o}function AA(t,e,r,n,i){var s,o;if(i===Z0(t,e,r,n)>0)for(s=e;s<r;s+=n)o=qw(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=qw(s,t[s],t[s+1],o);return o&&Xf(o,o.next)&&($u(o),o=o.next),o}function So(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(Xf(r,r.next)||ut(r.prev,r,r.next)===0)){if($u(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function zu(t,e,r,n,i,s,o){if(t){!o&&s&&xM(t,n,i,s);for(var l=t,h,c;t.prev!==t.next;){if(h=t.prev,c=t.next,s?dM(t,n,i,s):cM(t)){e.push(h.i/r|0),e.push(t.i/r|0),e.push(c.i/r|0),$u(t),t=c.next,l=c.next;continue}if(t=c,t===l){o?o===1?(t=fM(So(t),e,r),zu(t,e,r,n,i,s,2)):o===2&&pM(t,e,r,n,i,s):zu(So(t),e,r,n,i,s,1);break}}}}function cM(t){var e=t.prev,r=t,n=t.next;if(ut(e,r,n)>=0)return!1;for(var i=e.x,s=r.x,o=n.x,l=e.y,h=r.y,c=n.y,f=i<s?i<o?i:o:s<o?s:o,p=l<h?l<c?l:c:h<c?h:c,m=i>s?i>o?i:o:s>o?s:o,v=l>h?l>c?l:c:h>c?h:c,_=n.next;_!==e;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=v&&wa(i,l,s,h,o,c,_.x,_.y)&&ut(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function dM(t,e,r,n){var i=t.prev,s=t,o=t.next;if(ut(i,s,o)>=0)return!1;for(var l=i.x,h=s.x,c=o.x,f=i.y,p=s.y,m=o.y,v=l<h?l<c?l:c:h<c?h:c,_=f<p?f<m?f:m:p<m?p:m,b=l>h?l>c?l:c:h>c?h:c,T=f>p?f>m?f:m:p>m?p:m,x=q0(v,_,e,r,n),E=q0(b,T,e,r,n),w=t.prevZ,A=t.nextZ;w&&w.z>=x&&A&&A.z<=E;){if(w.x>=v&&w.x<=b&&w.y>=_&&w.y<=T&&w!==i&&w!==o&&wa(l,f,h,p,c,m,w.x,w.y)&&ut(w.prev,w,w.next)>=0||(w=w.prevZ,A.x>=v&&A.x<=b&&A.y>=_&&A.y<=T&&A!==i&&A!==o&&wa(l,f,h,p,c,m,A.x,A.y)&&ut(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;w&&w.z>=x;){if(w.x>=v&&w.x<=b&&w.y>=_&&w.y<=T&&w!==i&&w!==o&&wa(l,f,h,p,c,m,w.x,w.y)&&ut(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;A&&A.z<=E;){if(A.x>=v&&A.x<=b&&A.y>=_&&A.y<=T&&A!==i&&A!==o&&wa(l,f,h,p,c,m,A.x,A.y)&&ut(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function fM(t,e,r){var n=t;do{var i=n.prev,s=n.next.next;!Xf(i,s)&&CA(i,n,n.next,s)&&Gu(i,s)&&Gu(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),$u(n),$u(n.next),n=t=s),n=n.next}while(n!==t);return So(n)}function pM(t,e,r,n,i,s){var o=t;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&EM(o,l)){var h=PA(o,l);o=So(o,o.next),h=So(h,h.next),zu(o,e,r,n,i,s,0),zu(h,e,r,n,i,s,0);return}l=l.next}o=o.next}while(o!==t)}function mM(t,e,r,n){var i=[],s,o,l,h,c;for(s=0,o=e.length;s<o;s++)l=e[s]*n,h=s<o-1?e[s+1]*n:t.length,c=AA(t,l,h,n,!1),c===c.next&&(c.steiner=!0),i.push(bM(c));for(i.sort(gM),s=0;s<i.length;s++)r=yM(i[s],r);return r}function gM(t,e){return t.x-e.x}function yM(t,e){var r=vM(t,e);if(!r)return e;var n=PA(r,t);return So(n,n.next),So(r,r.next)}function vM(t,e){var r=e,n=t.x,i=t.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var l=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(l<=n&&l>s&&(s=l,o=r.x<r.next.x?r:r.next,l===n))return o}r=r.next}while(r!==e);if(!o)return null;var h=o,c=o.x,f=o.y,p=1/0,m;r=o;do n>=r.x&&r.x>=c&&n!==r.x&&wa(i<f?n:s,i,c,f,i<f?s:n,i,r.x,r.y)&&(m=Math.abs(i-r.y)/(n-r.x),Gu(r,t)&&(m<p||m===p&&(r.x>o.x||r.x===o.x&&_M(o,r)))&&(o=r,p=m)),r=r.next;while(r!==h);return o}function _M(t,e){return ut(t.prev,t,e.prev)<0&&ut(e.next,t,t.next)<0}function xM(t,e,r,n){var i=t;do i.z===0&&(i.z=q0(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,wM(i)}function wM(t){var e,r,n,i,s,o,l,h,c=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,n=r,l=0,e=0;e<c&&(l++,n=n.nextZ,!!n);e++);for(h=c;l>0||h>0&&n;)l!==0&&(h===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,l--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,c*=2}while(o>1);return t}function q0(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function bM(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function wa(t,e,r,n,i,s,o,l){return(i-o)*(e-l)>=(t-o)*(s-l)&&(t-o)*(n-l)>=(r-o)*(e-l)&&(r-o)*(s-l)>=(i-o)*(n-l)}function EM(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!SM(t,e)&&(Gu(t,e)&&Gu(e,t)&&TM(t,e)&&(ut(t.prev,t,e.prev)||ut(t,e.prev,e))||Xf(t,e)&&ut(t.prev,t,t.next)>0&&ut(e.prev,e,e.next)>0)}function ut(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Xf(t,e){return t.x===e.x&&t.y===e.y}function CA(t,e,r,n){var i=Ac(ut(t,e,r)),s=Ac(ut(t,e,n)),o=Ac(ut(r,n,t)),l=Ac(ut(r,n,e));return!!(i!==s&&o!==l||i===0&&Tc(t,r,e)||s===0&&Tc(t,n,e)||o===0&&Tc(r,t,n)||l===0&&Tc(r,e,n))}function Tc(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ac(t){return t>0?1:t<0?-1:0}function SM(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&CA(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Gu(t,e){return ut(t.prev,t,t.next)<0?ut(t,e,t.next)>=0&&ut(t,t.prev,e)>=0:ut(t,e,t.prev)<0||ut(t,t.next,e)<0}function TM(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function PA(t,e){var r=new K0(t.i,t.x,t.y),n=new K0(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function qw(t,e,r,n){var i=new K0(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function $u(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function K0(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Wf.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(Z0(t,0,s,r));if(i)for(var l=0,h=e.length;l<h;l++){var c=e[l]*r,f=l<h-1?e[l+1]*r:t.length;o-=Math.abs(Z0(t,c,f,r))}var p=0;for(l=0;l<n.length;l+=3){var m=n[l]*r,v=n[l+1]*r,_=n[l+2]*r;p+=Math.abs((t[m]-t[_])*(t[v+1]-t[m+1])-(t[m]-t[v])*(t[_+1]-t[m+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function Z0(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}Wf.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r};var AM=o1.exports;const CM=If(AM);var ef={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */ef.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof su=="object"&&su;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,l=2147483647,h=36,c=1,f=26,p=38,m=700,v=72,_=128,b="-",T=/^xn--/,x=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=h-c,P=Math.floor,D=String.fromCharCode,R;function k(N){throw new RangeError(w[N])}function L(N,$){for(var se=N.length,Ce=[];se--;)Ce[se]=$(N[se]);return Ce}function z(N,$){var se=N.split("@"),Ce="";se.length>1&&(Ce=se[0]+"@",N=se[1]),N=N.replace(E,".");var Ee=N.split("."),He=L(Ee,$).join(".");return Ce+He}function re(N){for(var $=[],se=0,Ce=N.length,Ee,He;se<Ce;)Ee=N.charCodeAt(se++),Ee>=55296&&Ee<=56319&&se<Ce?(He=N.charCodeAt(se++),(He&64512)==56320?$.push(((Ee&1023)<<10)+(He&1023)+65536):($.push(Ee),se--)):$.push(Ee);return $}function Z(N){return L(N,function($){var se="";return $>65535&&($-=65536,se+=D($>>>10&1023|55296),$=56320|$&1023),se+=D($),se}).join("")}function B(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:h}function Q(N,$){return N+22+75*(N<26)-(($!=0)<<5)}function ue(N,$,se){var Ce=0;for(N=se?P(N/m):N>>1,N+=P(N/$);N>A*f>>1;Ce+=h)N=P(N/A);return P(Ce+(A+1)*N/(N+p))}function _e(N){var $=[],se=N.length,Ce,Ee=0,He=_,Ie=v,$e,Rt,Gt,dt,Re,qe,Ue,Ur,zr;for($e=N.lastIndexOf(b),$e<0&&($e=0),Rt=0;Rt<$e;++Rt)N.charCodeAt(Rt)>=128&&k("not-basic"),$.push(N.charCodeAt(Rt));for(Gt=$e>0?$e+1:0;Gt<se;){for(dt=Ee,Re=1,qe=h;Gt>=se&&k("invalid-input"),Ue=B(N.charCodeAt(Gt++)),(Ue>=h||Ue>P((l-Ee)/Re))&&k("overflow"),Ee+=Ue*Re,Ur=qe<=Ie?c:qe>=Ie+f?f:qe-Ie,!(Ue<Ur);qe+=h)zr=h-Ur,Re>P(l/zr)&&k("overflow"),Re*=zr;Ce=$.length+1,Ie=ue(Ee-dt,Ce,dt==0),P(Ee/Ce)>l-He&&k("overflow"),He+=P(Ee/Ce),Ee%=Ce,$.splice(Ee++,0,He)}return Z($)}function de(N){var $,se,Ce,Ee,He,Ie,$e,Rt,Gt,dt,Re,qe=[],Ue,Ur,zr,Ls;for(N=re(N),Ue=N.length,$=_,se=0,He=v,Ie=0;Ie<Ue;++Ie)Re=N[Ie],Re<128&&qe.push(D(Re));for(Ce=Ee=qe.length,Ee&&qe.push(b);Ce<Ue;){for($e=l,Ie=0;Ie<Ue;++Ie)Re=N[Ie],Re>=$&&Re<$e&&($e=Re);for(Ur=Ce+1,$e-$>P((l-se)/Ur)&&k("overflow"),se+=($e-$)*Ur,$=$e,Ie=0;Ie<Ue;++Ie)if(Re=N[Ie],Re<$&&++se>l&&k("overflow"),Re==$){for(Rt=se,Gt=h;dt=Gt<=He?c:Gt>=He+f?f:Gt-He,!(Rt<dt);Gt+=h)Ls=Rt-dt,zr=h-dt,qe.push(D(Q(dt+Ls%zr,0))),Rt=P(Ls/zr);qe.push(D(Q(Rt,0))),He=ue(se,Ur,Ce==Ee),se=0,++Ce}++se,++$}return qe.join("")}function M(N){return z(N,function($){return T.test($)?_e($.slice(4).toLowerCase()):$})}function j(N){return z(N,function($){return x.test($)?"xn--"+de($):$})}if(o={version:"1.4.1",ucs2:{decode:re,encode:Z},decode:_e,encode:de,toASCII:j,toUnicode:M},n&&i)if(t.exports==n)i.exports=o;else for(R in o)o.hasOwnProperty(R)&&(n[R]=o[R]);else r.punycode=o})(su)})(ef,ef.exports);var PM=ef.exports,IM=Error,RM=EvalError,kM=RangeError,MM=ReferenceError,IA=SyntaxError,ch=TypeError,DM=URIError,FM=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Kw=typeof Symbol<"u"&&Symbol,NM=FM,OM=function(){return typeof Kw!="function"||typeof Symbol!="function"||typeof Kw("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:NM()},ig={__proto__:null,foo:{}},BM=Object,LM=function(){return{__proto__:ig}.foo===ig.foo&&!(ig instanceof BM)},UM="Function.prototype.bind called on incompatible ",zM=Object.prototype.toString,GM=Math.max,$M="[object Function]",Zw=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},HM=function(e,r){for(var n=[],i=r,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},jM=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},VM=function(e){var r=this;if(typeof r!="function"||zM.apply(r)!==$M)throw new TypeError(UM+r);for(var n=HM(arguments,1),i,s=function(){if(this instanceof i){var f=r.apply(this,Zw(n,arguments));return Object(f)===f?f:this}return r.apply(e,Zw(n,arguments))},o=GM(0,r.length-n.length),l=[],h=0;h<o;h++)l[h]="$"+h;if(i=Function("binder","return function ("+jM(l,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},WM=VM,a1=Function.prototype.bind||WM,XM=Function.prototype.call,YM=Object.prototype.hasOwnProperty,QM=a1,qM=QM.call(XM,YM),De,KM=IM,ZM=RM,JM=kM,e3=MM,Qa=IA,ka=ch,t3=DM,RA=Function,sg=function(t){try{return RA('"use strict"; return ('+t+").constructor;")()}catch{}},mo=Object.getOwnPropertyDescriptor;if(mo)try{mo({},"")}catch{mo=null}var og=function(){throw new ka},r3=mo?function(){try{return arguments.callee,og}catch{try{return mo(arguments,"callee").get}catch{return og}}}():og,Qo=OM(),n3=LM(),Nt=Object.getPrototypeOf||(n3?function(t){return t.__proto__}:null),ra={},i3=typeof Uint8Array>"u"||!Nt?De:Nt(Uint8Array),go={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?De:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?De:ArrayBuffer,"%ArrayIteratorPrototype%":Qo&&Nt?Nt([][Symbol.iterator]()):De,"%AsyncFromSyncIteratorPrototype%":De,"%AsyncFunction%":ra,"%AsyncGenerator%":ra,"%AsyncGeneratorFunction%":ra,"%AsyncIteratorPrototype%":ra,"%Atomics%":typeof Atomics>"u"?De:Atomics,"%BigInt%":typeof BigInt>"u"?De:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?De:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?De:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?De:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":KM,"%eval%":eval,"%EvalError%":ZM,"%Float32Array%":typeof Float32Array>"u"?De:Float32Array,"%Float64Array%":typeof Float64Array>"u"?De:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?De:FinalizationRegistry,"%Function%":RA,"%GeneratorFunction%":ra,"%Int8Array%":typeof Int8Array>"u"?De:Int8Array,"%Int16Array%":typeof Int16Array>"u"?De:Int16Array,"%Int32Array%":typeof Int32Array>"u"?De:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Qo&&Nt?Nt(Nt([][Symbol.iterator]())):De,"%JSON%":typeof JSON=="object"?JSON:De,"%Map%":typeof Map>"u"?De:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Qo||!Nt?De:Nt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?De:Promise,"%Proxy%":typeof Proxy>"u"?De:Proxy,"%RangeError%":JM,"%ReferenceError%":e3,"%Reflect%":typeof Reflect>"u"?De:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?De:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Qo||!Nt?De:Nt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?De:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Qo&&Nt?Nt(""[Symbol.iterator]()):De,"%Symbol%":Qo?Symbol:De,"%SyntaxError%":Qa,"%ThrowTypeError%":r3,"%TypedArray%":i3,"%TypeError%":ka,"%Uint8Array%":typeof Uint8Array>"u"?De:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?De:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?De:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?De:Uint32Array,"%URIError%":t3,"%WeakMap%":typeof WeakMap>"u"?De:WeakMap,"%WeakRef%":typeof WeakRef>"u"?De:WeakRef,"%WeakSet%":typeof WeakSet>"u"?De:WeakSet};if(Nt)try{null.error}catch(t){var s3=Nt(Nt(t));go["%Error.prototype%"]=s3}var o3=function t(e){var r;if(e==="%AsyncFunction%")r=sg("async function () {}");else if(e==="%GeneratorFunction%")r=sg("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=sg("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Nt&&(r=Nt(i.prototype))}return go[e]=r,r},Jw={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},dh=a1,tf=qM,a3=dh.call(Function.call,Array.prototype.concat),l3=dh.call(Function.apply,Array.prototype.splice),eb=dh.call(Function.call,String.prototype.replace),rf=dh.call(Function.call,String.prototype.slice),u3=dh.call(Function.call,RegExp.prototype.exec),h3=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,c3=/\\(\\)?/g,d3=function(e){var r=rf(e,0,1),n=rf(e,-1);if(r==="%"&&n!=="%")throw new Qa("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Qa("invalid intrinsic syntax, expected opening `%`");var i=[];return eb(e,h3,function(s,o,l,h){i[i.length]=l?eb(h,c3,"$1"):o||s}),i},f3=function(e,r){var n=e,i;if(tf(Jw,n)&&(i=Jw[n],n="%"+i[0]+"%"),tf(go,n)){var s=go[n];if(s===ra&&(s=o3(n)),typeof s>"u"&&!r)throw new ka("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Qa("intrinsic "+e+" does not exist!")},nl=function(e,r){if(typeof e!="string"||e.length===0)throw new ka("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ka('"allowMissing" argument must be a boolean');if(u3(/^%?[^%]*%?$/,e)===null)throw new Qa("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=d3(e),i=n.length>0?n[0]:"",s=f3("%"+i+"%",r),o=s.name,l=s.value,h=!1,c=s.alias;c&&(i=c[0],l3(n,a3([0,1],c)));for(var f=1,p=!0;f<n.length;f+=1){var m=n[f],v=rf(m,0,1),_=rf(m,-1);if((v==='"'||v==="'"||v==="`"||_==='"'||_==="'"||_==="`")&&v!==_)throw new Qa("property names with quotes must have matching quotes");if((m==="constructor"||!p)&&(h=!0),i+="."+m,o="%"+i+"%",tf(go,o))l=go[o];else if(l!=null){if(!(m in l)){if(!r)throw new ka("base intrinsic for "+e+" exists, but the property is not available.");return}if(mo&&f+1>=n.length){var b=mo(l,m);p=!!b,p&&"get"in b&&!("originalValue"in b.get)?l=b.get:l=l[m]}else p=tf(l,m),l=l[m];p&&!h&&(go[o]=l)}}return l},kA={exports:{}},ag,tb;function l1(){if(tb)return ag;tb=1;var t=nl,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return ag=e,ag}var p3=nl,yd=p3("%Object.getOwnPropertyDescriptor%",!0);if(yd)try{yd([],"length")}catch{yd=null}var MA=yd,rb=l1(),m3=IA,qo=ch,nb=MA,g3=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new qo("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new qo("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new qo("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new qo("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new qo("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new qo("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,h=!!nb&&nb(e,r);if(rb)rb(e,r,{configurable:o===null&&h?h.configurable:!o,enumerable:i===null&&h?h.enumerable:!i,value:n,writable:s===null&&h?h.writable:!s});else if(l||!i&&!s&&!o)e[r]=n;else throw new m3("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},J0=l1(),DA=function(){return!!J0};DA.hasArrayLengthDefineBug=function(){if(!J0)return null;try{return J0([],"length",{value:1}).length!==1}catch{return!0}};var y3=DA,v3=nl,ib=g3,_3=y3(),sb=MA,ob=ch,x3=v3("%Math.floor%"),w3=function(e,r){if(typeof e!="function")throw new ob("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||x3(r)!==r)throw new ob("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&sb){var o=sb(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(_3?ib(e,"length",r,!0,!0):ib(e,"length",r)),e};(function(t){var e=a1,r=nl,n=w3,i=ch,s=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),l=r("%Reflect.apply%",!0)||e.call(o,s),h=l1(),c=r("%Math.max%");t.exports=function(m){if(typeof m!="function")throw new i("a function is required");var v=l(e,o,arguments);return n(v,1+c(0,m.length-(arguments.length-1)),!0)};var f=function(){return l(e,s,arguments)};h?h(t.exports,"apply",{value:f}):t.exports.apply=f})(kA);var b3=kA.exports,FA=nl,NA=b3,E3=NA(FA("String.prototype.indexOf")),S3=function(e,r){var n=FA(e,!!r);return typeof n=="function"&&E3(e,".prototype.")>-1?NA(n):n};const T3={},A3=Object.freeze(Object.defineProperty({__proto__:null,default:T3},Symbol.toStringTag,{value:"Module"})),C3=hv(A3);var u1=typeof Map=="function"&&Map.prototype,lg=Object.getOwnPropertyDescriptor&&u1?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,nf=u1&&lg&&typeof lg.get=="function"?lg.get:null,ab=u1&&Map.prototype.forEach,h1=typeof Set=="function"&&Set.prototype,ug=Object.getOwnPropertyDescriptor&&h1?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,sf=h1&&ug&&typeof ug.get=="function"?ug.get:null,lb=h1&&Set.prototype.forEach,P3=typeof WeakMap=="function"&&WeakMap.prototype,mu=P3?WeakMap.prototype.has:null,I3=typeof WeakSet=="function"&&WeakSet.prototype,gu=I3?WeakSet.prototype.has:null,R3=typeof WeakRef=="function"&&WeakRef.prototype,ub=R3?WeakRef.prototype.deref:null,k3=Boolean.prototype.valueOf,M3=Object.prototype.toString,D3=Function.prototype.toString,F3=String.prototype.match,c1=String.prototype.slice,ds=String.prototype.replace,N3=String.prototype.toUpperCase,hb=String.prototype.toLowerCase,OA=RegExp.prototype.test,cb=Array.prototype.concat,ti=Array.prototype.join,O3=Array.prototype.slice,db=Math.floor,ey=typeof BigInt=="function"?BigInt.prototype.valueOf:null,hg=Object.getOwnPropertySymbols,ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,qa=typeof Symbol=="function"&&typeof Symbol.iterator=="object",nr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===qa||!0)?Symbol.toStringTag:null,BA=Object.prototype.propertyIsEnumerable,fb=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function pb(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||OA.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-db(-t):db(t);if(n!==t){var i=String(n),s=c1.call(e,i.length+1);return ds.call(i,r,"$&_")+"."+ds.call(ds.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ds.call(e,r,"$&_")}var ry=C3,mb=ry.custom,gb=UA(mb)?mb:null,B3=function t(e,r,n,i){var s=r||{};if(ss(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ss(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ss(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ss(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ss(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return GA(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var h=String(e);return l?pb(e,h):h}if(typeof e=="bigint"){var c=String(e)+"n";return l?pb(e,c):c}var f=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return ny(e)?"[Array]":"[Object]";var p=tD(s,n);if(typeof i>"u")i=[];else if(zA(i,e)>=0)return"[Circular]";function m(B,Q,ue){if(Q&&(i=O3.call(i),i.push(Q)),ue){var _e={depth:s.depth};return ss(s,"quoteStyle")&&(_e.quoteStyle=s.quoteStyle),t(B,_e,n+1,i)}return t(B,s,n+1,i)}if(typeof e=="function"&&!yb(e)){var v=W3(e),_=Cc(e,m);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(_.length>0?" { "+ti.call(_,", ")+" }":"")}if(UA(e)){var b=qa?ds.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ty.call(e);return typeof e=="object"&&!qa?Ol(b):b}if(Z3(e)){for(var T="<"+hb.call(String(e.nodeName)),x=e.attributes||[],E=0;E<x.length;E++)T+=" "+x[E].name+"="+LA(L3(x[E].value),"double",s);return T+=">",e.childNodes&&e.childNodes.length&&(T+="..."),T+="</"+hb.call(String(e.nodeName))+">",T}if(ny(e)){if(e.length===0)return"[]";var w=Cc(e,m);return p&&!eD(w)?"["+iy(w,p)+"]":"[ "+ti.call(w,", ")+" ]"}if(z3(e)){var A=Cc(e,m);return!("cause"in Error.prototype)&&"cause"in e&&!BA.call(e,"cause")?"{ ["+String(e)+"] "+ti.call(cb.call("[cause]: "+m(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ti.call(A,", ")+" }"}if(typeof e=="object"&&o){if(gb&&typeof e[gb]=="function"&&ry)return ry(e,{depth:f-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(X3(e)){var P=[];return ab&&ab.call(e,function(B,Q){P.push(m(Q,e,!0)+" => "+m(B,e))}),vb("Map",nf.call(e),P,p)}if(q3(e)){var D=[];return lb&&lb.call(e,function(B){D.push(m(B,e))}),vb("Set",sf.call(e),D,p)}if(Y3(e))return cg("WeakMap");if(K3(e))return cg("WeakSet");if(Q3(e))return cg("WeakRef");if($3(e))return Ol(m(Number(e)));if(j3(e))return Ol(m(ey.call(e)));if(H3(e))return Ol(k3.call(e));if(G3(e))return Ol(m(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof su<"u"&&e===su)return"{ [object globalThis] }";if(!U3(e)&&!yb(e)){var R=Cc(e,m),k=fb?fb(e)===Object.prototype:e instanceof Object||e.constructor===Object,L=e instanceof Object?"":"null prototype",z=!k&&nr&&Object(e)===e&&nr in e?c1.call(Ns(e),8,-1):L?"Object":"",re=k||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Z=re+(z||L?"["+ti.call(cb.call([],z||[],L||[]),": ")+"] ":"");return R.length===0?Z+"{}":p?Z+"{"+iy(R,p)+"}":Z+"{ "+ti.call(R,", ")+" }"}return String(e)};function LA(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function L3(t){return ds.call(String(t),/"/g,"&quot;")}function ny(t){return Ns(t)==="[object Array]"&&(!nr||!(typeof t=="object"&&nr in t))}function U3(t){return Ns(t)==="[object Date]"&&(!nr||!(typeof t=="object"&&nr in t))}function yb(t){return Ns(t)==="[object RegExp]"&&(!nr||!(typeof t=="object"&&nr in t))}function z3(t){return Ns(t)==="[object Error]"&&(!nr||!(typeof t=="object"&&nr in t))}function G3(t){return Ns(t)==="[object String]"&&(!nr||!(typeof t=="object"&&nr in t))}function $3(t){return Ns(t)==="[object Number]"&&(!nr||!(typeof t=="object"&&nr in t))}function H3(t){return Ns(t)==="[object Boolean]"&&(!nr||!(typeof t=="object"&&nr in t))}function UA(t){if(qa)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!ty)return!1;try{return ty.call(t),!0}catch{}return!1}function j3(t){if(!t||typeof t!="object"||!ey)return!1;try{return ey.call(t),!0}catch{}return!1}var V3=Object.prototype.hasOwnProperty||function(t){return t in this};function ss(t,e){return V3.call(t,e)}function Ns(t){return M3.call(t)}function W3(t){if(t.name)return t.name;var e=F3.call(D3.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function zA(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function X3(t){if(!nf||!t||typeof t!="object")return!1;try{nf.call(t);try{sf.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Y3(t){if(!mu||!t||typeof t!="object")return!1;try{mu.call(t,mu);try{gu.call(t,gu)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Q3(t){if(!ub||!t||typeof t!="object")return!1;try{return ub.call(t),!0}catch{}return!1}function q3(t){if(!sf||!t||typeof t!="object")return!1;try{sf.call(t);try{nf.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function K3(t){if(!gu||!t||typeof t!="object")return!1;try{gu.call(t,gu);try{mu.call(t,mu)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Z3(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function GA(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return GA(c1.call(t,0,e.maxStringLength),e)+n}var i=ds.call(ds.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,J3);return LA(i,"single",e)}function J3(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+N3.call(e.toString(16))}function Ol(t){return"Object("+t+")"}function cg(t){return t+" { ? }"}function vb(t,e,r,n){var i=n?iy(r,n):ti.call(r,", ");return t+" ("+e+") {"+i+"}"}function eD(t){for(var e=0;e<t.length;e++)if(zA(t[e],`
`)>=0)return!1;return!0}function tD(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=ti.call(Array(t.indent+1)," ");else return null;return{base:r,prev:ti.call(Array(e+1),r)}}function iy(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+ti.call(t,","+r)+`
`+e.prev}function Cc(t,e){var r=ny(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=ss(t,i)?e(t[i],t):""}var s=typeof hg=="function"?hg(t):[],o;if(qa){o={};for(var l=0;l<s.length;l++)o["$"+s[l]]=s[l]}for(var h in t)ss(t,h)&&(r&&String(Number(h))===h&&h<t.length||qa&&o["$"+h]instanceof Symbol||(OA.call(/[^\w$]/,h)?n.push(e(h,t)+": "+e(t[h],t)):n.push(h+": "+e(t[h],t))));if(typeof hg=="function")for(var c=0;c<s.length;c++)BA.call(t,s[c])&&n.push("["+e(s[c])+"]: "+e(t[s[c]],t));return n}var $A=nl,il=S3,rD=B3,nD=ch,Pc=$A("%WeakMap%",!0),Ic=$A("%Map%",!0),iD=il("WeakMap.prototype.get",!0),sD=il("WeakMap.prototype.set",!0),oD=il("WeakMap.prototype.has",!0),aD=il("Map.prototype.get",!0),lD=il("Map.prototype.set",!0),uD=il("Map.prototype.has",!0),d1=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},hD=function(t,e){var r=d1(t,e);return r&&r.value},cD=function(t,e,r){var n=d1(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},dD=function(t,e){return!!d1(t,e)},fD=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new nD("Side channel does not contain "+rD(s))},get:function(s){if(Pc&&s&&(typeof s=="object"||typeof s=="function")){if(e)return iD(e,s)}else if(Ic){if(r)return aD(r,s)}else if(n)return hD(n,s)},has:function(s){if(Pc&&s&&(typeof s=="object"||typeof s=="function")){if(e)return oD(e,s)}else if(Ic){if(r)return uD(r,s)}else if(n)return dD(n,s);return!1},set:function(s,o){Pc&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Pc),sD(e,s,o)):Ic?(r||(r=new Ic),lD(r,s,o)):(n||(n={key:{},next:null}),cD(n,s,o))}};return i},pD=String.prototype.replace,mD=/%20/g,dg={RFC1738:"RFC1738",RFC3986:"RFC3986"},f1={default:dg.RFC3986,formatters:{RFC1738:function(t){return pD.call(t,mD,"+")},RFC3986:function(t){return String(t)}},RFC1738:dg.RFC1738,RFC3986:dg.RFC3986},gD=f1,fg=Object.prototype.hasOwnProperty,oo=Array.isArray,Vn=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),yD=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(oo(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},HA=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},vD=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(oo(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!fg.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return oo(e)&&!oo(r)&&(i=HA(e,n)),oo(e)&&oo(r)?(r.forEach(function(s,o){if(fg.call(e,o)){var l=e[o];l&&typeof l=="object"&&s&&typeof s=="object"?e[o]=t(l,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var l=r[o];return fg.call(s,o)?s[o]=t(s[o],l,n):s[o]=l,s},i)},_D=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},xD=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},pg=1024,wD=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(v){return"%26%23"+parseInt(v.slice(2),16)+"%3B"});for(var l="",h=0;h<o.length;h+=pg){for(var c=o.length>=pg?o.slice(h,h+pg):o,f=[],p=0;p<c.length;++p){var m=c.charCodeAt(p);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||s===gD.RFC1738&&(m===40||m===41)){f[f.length]=c.charAt(p);continue}if(m<128){f[f.length]=Vn[m];continue}if(m<2048){f[f.length]=Vn[192|m>>6]+Vn[128|m&63];continue}if(m<55296||m>=57344){f[f.length]=Vn[224|m>>12]+Vn[128|m>>6&63]+Vn[128|m&63];continue}p+=1,m=65536+((m&1023)<<10|c.charCodeAt(p)&1023),f[f.length]=Vn[240|m>>18]+Vn[128|m>>12&63]+Vn[128|m>>6&63]+Vn[128|m&63]}l+=f.join("")}return l},bD=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],l=Object.keys(o),h=0;h<l.length;++h){var c=l[h],f=o[c];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:o,prop:c}),n.push(f))}return yD(r),e},ED=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},SD=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},TD=function(e,r){return[].concat(e,r)},AD=function(e,r){if(oo(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},jA={arrayToObject:HA,assign:_D,combine:TD,compact:bD,decode:xD,encode:wD,isBuffer:SD,isRegExp:ED,maybeMap:AD,merge:vD},VA=fD,vd=jA,yu=f1,CD=Object.prototype.hasOwnProperty,WA={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Zn=Array.isArray,PD=Array.prototype.push,XA=function(t,e){PD.apply(t,Zn(e)?e:[e])},ID=Date.prototype.toISOString,_b=yu.default,At={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:vd.encode,encodeValuesOnly:!1,format:_b,formatter:yu.formatters[_b],indices:!1,serializeDate:function(e){return ID.call(e)},skipNulls:!1,strictNullHandling:!1},RD=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},mg={},kD=function t(e,r,n,i,s,o,l,h,c,f,p,m,v,_,b,T,x,E){for(var w=e,A=E,P=0,D=!1;(A=A.get(mg))!==void 0&&!D;){var R=A.get(e);if(P+=1,typeof R<"u"){if(R===P)throw new RangeError("Cyclic object value");D=!0}typeof A.get(mg)>"u"&&(P=0)}if(typeof f=="function"?w=f(r,w):w instanceof Date?w=v(w):n==="comma"&&Zn(w)&&(w=vd.maybeMap(w,function(N){return N instanceof Date?v(N):N})),w===null){if(o)return c&&!T?c(r,At.encoder,x,"key",_):r;w=""}if(RD(w)||vd.isBuffer(w)){if(c){var k=T?r:c(r,At.encoder,x,"key",_);return[b(k)+"="+b(c(w,At.encoder,x,"value",_))]}return[b(r)+"="+b(String(w))]}var L=[];if(typeof w>"u")return L;var z;if(n==="comma"&&Zn(w))T&&c&&(w=vd.maybeMap(w,c)),z=[{value:w.length>0?w.join(",")||null:void 0}];else if(Zn(f))z=f;else{var re=Object.keys(w);z=p?re.sort(p):re}var Z=h?r.replace(/\./g,"%2E"):r,B=i&&Zn(w)&&w.length===1?Z+"[]":Z;if(s&&Zn(w)&&w.length===0)return B+"[]";for(var Q=0;Q<z.length;++Q){var ue=z[Q],_e=typeof ue=="object"&&typeof ue.value<"u"?ue.value:w[ue];if(!(l&&_e===null)){var de=m&&h?ue.replace(/\./g,"%2E"):ue,M=Zn(w)?typeof n=="function"?n(B,de):B:B+(m?"."+de:"["+de+"]");E.set(e,P);var j=VA();j.set(mg,E),XA(L,t(_e,M,n,i,s,o,l,h,n==="comma"&&T&&Zn(w)?null:c,f,p,m,v,_,b,T,x,j))}}return L},MD=function(e){if(!e)return At;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||At.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=yu.default;if(typeof e.format<"u"){if(!CD.call(yu.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=yu.formatters[n],s=At.filter;(typeof e.filter=="function"||Zn(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in WA?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=At.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:At.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:At.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:At.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:At.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?At.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:At.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:At.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:At.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:At.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:At.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:At.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:At.strictNullHandling}},DD=function(t,e){var r=t,n=MD(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):Zn(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var l=WA[n.arrayFormat],h=l==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var c=VA(),f=0;f<i.length;++f){var p=i[f];n.skipNulls&&r[p]===null||XA(o,kD(r[p],p,l,h,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var m=o.join(n.delimiter),v=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),m.length>0?v+m:""},Ka=jA,sy=Object.prototype.hasOwnProperty,FD=Array.isArray,pt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Ka.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},ND=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},YA=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},OD="utf8=%26%2310003%3B",BD="utf8=%E2%9C%93",LD=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),l=-1,h,c=r.charset;if(r.charsetSentinel)for(h=0;h<o.length;++h)o[h].indexOf("utf8=")===0&&(o[h]===BD?c="utf-8":o[h]===OD&&(c="iso-8859-1"),l=h,h=o.length);for(h=0;h<o.length;++h)if(h!==l){var f=o[h],p=f.indexOf("]="),m=p===-1?f.indexOf("="):p+1,v,_;m===-1?(v=r.decoder(f,pt.decoder,c,"key"),_=r.strictNullHandling?null:""):(v=r.decoder(f.slice(0,m),pt.decoder,c,"key"),_=Ka.maybeMap(YA(f.slice(m+1),r),function(T){return r.decoder(T,pt.decoder,c,"value")})),_&&r.interpretNumericEntities&&c==="iso-8859-1"&&(_=ND(_)),f.indexOf("[]=")>-1&&(_=FD(_)?[_]:_);var b=sy.call(n,v);b&&r.duplicates==="combine"?n[v]=Ka.combine(n[v],_):(!b||r.duplicates==="last")&&(n[v]=_)}return n},UD=function(t,e,r,n){for(var i=n?e:YA(e,r),s=t.length-1;s>=0;--s){var o,l=t[s];if(l==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&(i===""||r.strictNullHandling&&i===null)?[]:[].concat(i);else{o=r.plainObjects?Object.create(null):{};var h=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,c=r.decodeDotInKeys?h.replace(/%2E/g,"."):h,f=parseInt(c,10);!r.parseArrays&&c===""?o={0:i}:!isNaN(f)&&l!==c&&String(f)===c&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(o=[],o[f]=i):c!=="__proto__"&&(o[c]=i)}i=o}return i},zD=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,h=n.depth>0&&o.exec(s),c=h?s.slice(0,h.index):s,f=[];if(c){if(!n.plainObjects&&sy.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var p=0;n.depth>0&&(h=l.exec(s))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&sy.call(Object.prototype,h[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(h[1])}if(h){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");f.push("["+s.slice(h.index)+"]")}return UD(f,r,n,i)}},GD=function(e){if(!e)return pt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?pt.charset:e.charset,n=typeof e.duplicates>"u"?pt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:pt.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:pt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:pt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:pt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:pt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:pt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:pt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:pt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:pt.decoder,delimiter:typeof e.delimiter=="string"||Ka.isRegExp(e.delimiter)?e.delimiter:pt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:pt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:pt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:pt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:pt.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:pt.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:pt.strictNullHandling}},$D=function(t,e){var r=GD(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?LD(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var l=s[o],h=zD(l,n[l],r,typeof t=="string");i=Ka.merge(i,h,r)}return r.allowSparse===!0?i:Ka.compact(i)},HD=DD,jD=$D,VD=f1,WD={formats:VD,parse:jD,stringify:HD},XD=PM;function Mi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var YD=/^([a-z0-9.+-]+:)/i,QD=/:[0-9]*$/,qD=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,KD=["<",">",'"',"`"," ","\r",`
`,"	"],ZD=["{","}","|","\\","^","`"].concat(KD),oy=["'"].concat(ZD),xb=["%","/","?",";","#"].concat(oy),wb=["/","?","#"],JD=255,bb=/^[+a-z0-9A-Z_-]{0,63}$/,eF=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,tF={javascript:!0,"javascript:":!0},ay={javascript:!0,"javascript:":!0},Ma={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ly=WD;function rF(t,e,r){if(t&&typeof t=="object"&&t instanceof Mi)return t;var n=new Mi;return n.parse(t,e,r),n}Mi.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var l=t;if(l=l.trim(),!r&&t.split("#").length===1){var h=qD.exec(l);if(h)return this.path=l,this.href=l,this.pathname=h[1],h[2]?(this.search=h[2],e?this.query=ly.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=YD.exec(l);if(c){c=c[0];var f=c.toLowerCase();this.protocol=f,l=l.substr(c.length)}if(r||c||l.match(/^\/\/[^@/]+@[^@/]+/)){var p=l.substr(0,2)==="//";p&&!(c&&ay[c])&&(l=l.substr(2),this.slashes=!0)}if(!ay[c]&&(p||c&&!Ma[c])){for(var m=-1,v=0;v<wb.length;v++){var _=l.indexOf(wb[v]);_!==-1&&(m===-1||_<m)&&(m=_)}var b,T;m===-1?T=l.lastIndexOf("@"):T=l.lastIndexOf("@",m),T!==-1&&(b=l.slice(0,T),l=l.slice(T+1),this.auth=decodeURIComponent(b)),m=-1;for(var v=0;v<xb.length;v++){var _=l.indexOf(xb[v]);_!==-1&&(m===-1||_<m)&&(m=_)}m===-1&&(m=l.length),this.host=l.slice(0,m),l=l.slice(m),this.parseHost(),this.hostname=this.hostname||"";var x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x)for(var E=this.hostname.split(/\./),v=0,w=E.length;v<w;v++){var A=E[v];if(A&&!A.match(bb)){for(var P="",D=0,R=A.length;D<R;D++)A.charCodeAt(D)>127?P+="x":P+=A[D];if(!P.match(bb)){var k=E.slice(0,v),L=E.slice(v+1),z=A.match(eF);z&&(k.push(z[1]),L.unshift(z[2])),L.length&&(l="/"+L.join(".")+l),this.hostname=k.join(".");break}}}this.hostname.length>JD?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=XD.toASCII(this.hostname));var re=this.port?":"+this.port:"",Z=this.hostname||"";this.host=Z+re,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!tF[f])for(var v=0,w=oy.length;v<w;v++){var B=oy[v];if(l.indexOf(B)!==-1){var Q=encodeURIComponent(B);Q===B&&(Q=escape(B)),l=l.split(B).join(Q)}}var ue=l.indexOf("#");ue!==-1&&(this.hash=l.substr(ue),l=l.slice(0,ue));var _e=l.indexOf("?");if(_e!==-1?(this.search=l.substr(_e),this.query=l.substr(_e+1),e&&(this.query=ly.parse(this.query)),l=l.slice(0,_e)):e&&(this.search="",this.query={}),l&&(this.pathname=l),Ma[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var re=this.pathname||"",de=this.search||"";this.path=re+de}return this.href=this.format(),this};Mi.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=ly.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Ma[e])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),o=o.replace("#","%23"),e+i+r+o+n};Mi.prototype.resolve=function(t){return this.resolveObject(rF(t,!1,!0)).format()};Mi.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Mi;e.parse(t,!1,!0),t=e}for(var r=new Mi,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),l=0;l<o.length;l++){var h=o[l];h!=="protocol"&&(r[h]=t[h])}return Ma[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Ma[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var p=c[f];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!ay[t.protocol]){for(var w=(t.pathname||"").split("/");w.length&&!(t.host=w.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),r.pathname=w.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&r.pathname.charAt(0)==="/",b=t.host||t.pathname&&t.pathname.charAt(0)==="/",T=b||_||r.host&&t.pathname,x=T,E=r.pathname&&r.pathname.split("/")||[],w=t.pathname&&t.pathname.split("/")||[],A=r.protocol&&!Ma[r.protocol];if(A&&(r.hostname="",r.port=null,r.host&&(E[0]===""?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(w[0]===""?w[0]=t.host:w.unshift(t.host)),t.host=null),T=T&&(w[0]===""||E[0]==="")),b)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=w;else if(w.length)E||(E=[]),E.pop(),E=E.concat(w),r.search=t.search,r.query=t.query;else if(t.search!=null){if(A){r.host=E.shift(),r.hostname=r.host;var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.hostname=P.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var D=E.slice(-1)[0],R=(r.host||t.host||E.length>1)&&(D==="."||D==="..")||D==="",k=0,L=E.length;L>=0;L--)D=E[L],D==="."?E.splice(L,1):D===".."?(E.splice(L,1),k++):k&&(E.splice(L,1),k--);if(!T&&!x)for(;k--;k)E.unshift("..");T&&E[0]!==""&&(!E[0]||E[0].charAt(0)!=="/")&&E.unshift(""),R&&E.join("/").substr(-1)!=="/"&&E.push("");var z=E[0]===""||E[0]&&E[0].charAt(0)==="/";if(A){r.hostname=z?"":E.length?E.shift():"",r.host=r.hostname;var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.hostname=P.shift(),r.host=r.hostname)}return T=T||r.host&&E.length,T&&!z&&E.unshift(""),E.length>0?r.pathname=E.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};Mi.prototype.parseHost=function(){var t=this.host,e=QD.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const Eb={};function ke(t,e,r=3){if(Eb[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),Eb[e]=!0}function fn(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Bl(t){return t.split("?")[0].split("#")[0]}function nF(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function iF(t,e,r){return t.replace(new RegExp(nF(e),"g"),r)}function sF(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let l=0;l<=t.length;++l){if(l<t.length)o=t.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(i===l-1||s===1))if(i!==l-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const h=r.lastIndexOf("/");if(h!==r.length-1){h===-1?(r="",n=0):(r=r.slice(0,h),n=r.length-1-r.lastIndexOf("/")),i=l,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=l,s=0;continue}}}else r.length>0?r+=`/${t.slice(i+1,l)}`:r=t.slice(i+1,l),n=l-i-1;i=l,s=0}else o===46&&s!==-1?++s:s=-1}return r}const zt={toPosix(t){return iF(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){fn(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(fn(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=Bl(this.toPosix(e??le.ADAPTER.getBaseUrl())),i=Bl(this.toPosix(r??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?zt.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(fn(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=sF(t),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return fn(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(fn(n),n.length>0)if(e===void 0)e=n;else{const i=t[r-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(fn(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let l=t.length-1;l>=1;--l)if(e=t.charCodeAt(l),e===47){if(!i){n=l;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+t:s:r&&n===1?"//":s+t.slice(0,n)},rootname(t){fn(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){fn(t),e&&fn(e),t=Bl(this.toPosix(t));let r=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,l=-1;for(s=t.length-1;s>=0;--s){const h=t.charCodeAt(s);if(h===47){if(!i){r=s+1;break}}else l===-1&&(i=!1,l=s+1),o>=0&&(h===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){fn(t),t=Bl(this.toPosix(t));let e=-1,r=0,n=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const l=t.charCodeAt(o);if(l===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),l===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){fn(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Bl(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let i;e.root=this.rootname(t),n||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,l=-1,h=!0,c=t.length-1,f=0;for(;c>=i;--c){if(r=t.charCodeAt(c),r===47){if(!h){o=c+1;break}continue}l===-1&&(h=!1,l=c+1),r===46?s===-1?s=c:f!==1&&(f=1):s!==-1&&(f=-1)}return s===-1||l===-1||f===0||f===1&&s===l-1&&s===o+1?l!==-1&&(o===0&&n?e.base=e.name=t.slice(1,l):e.base=e.name=t.slice(o,l)):(o===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,l)):(e.name=t.slice(o,s),e.base=t.slice(o,l)),e.ext=t.slice(s,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let gg;async function oF(){return gg??(gg=(async()=>{var s;const t=document.createElement("canvas").getContext("webgl");if(!t)return _r.UNPACK;const e=await new Promise(o=>{const l=document.createElement("video");l.onloadeddata=()=>o(l),l.onerror=()=>o(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!e)return _r.UNPACK;const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(n),t.deleteTexture(r),(s=t.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?_r.PMA:_r.UNPACK})()),gg}let yg;function aF(){return typeof yg>"u"&&(yg=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:le.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!le.ADAPTER.getWebGLRenderingContext())return!1;const r=le.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const i=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),yg}var lF={grad:.9,turn:360,rad:360/(2*Math.PI)},xi=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Bt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},rn=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},QA=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Sb=function(t){return{r:rn(t.r,0,255),g:rn(t.g,0,255),b:rn(t.b,0,255),a:rn(t.a)}},vg=function(t){return{r:Bt(t.r),g:Bt(t.g),b:Bt(t.b),a:Bt(t.a,3)}},uF=/^#([0-9a-f]{3,8})$/i,Rc=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},qA=function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=Math.max(e,r,n),o=s-Math.min(e,r,n),l=o?s===e?(r-n)/o:s===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(l<0?l+6:l),s:s?o/s*100:0,v:s/255*100,a:i}},KA=function(t){var e=t.h,r=t.s,n=t.v,i=t.a;e=e/360*6,r/=100,n/=100;var s=Math.floor(e),o=n*(1-r),l=n*(1-(e-s)*r),h=n*(1-(1-e+s)*r),c=s%6;return{r:255*[n,l,o,o,h,n][c],g:255*[h,n,n,l,o,o][c],b:255*[o,o,h,n,n,l][c],a:i}},Tb=function(t){return{h:QA(t.h),s:rn(t.s,0,100),l:rn(t.l,0,100),a:rn(t.a)}},Ab=function(t){return{h:Bt(t.h),s:Bt(t.s),l:Bt(t.l),a:Bt(t.a,3)}},Cb=function(t){return KA((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},vu=function(t){return{h:(e=qA(t)).h,s:(i=(200-(r=e.s))*(n=e.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,r,n,i},hF=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,cF=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dF=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fF=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uy={string:[[function(t){var e=uF.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Bt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Bt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=dF.exec(t)||fF.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Sb({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=hF.exec(t)||cF.exec(t);if(!e)return null;var r,n,i=Tb({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(lF[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Cb(i)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=i===void 0?1:i;return xi(e)&&xi(r)&&xi(n)?Sb({r:Number(e),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,i=t.a,s=i===void 0?1:i;if(!xi(e)||!xi(r)||!xi(n))return null;var o=Tb({h:Number(e),s:Number(r),l:Number(n),a:Number(s)});return Cb(o)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,i=t.a,s=i===void 0?1:i;if(!xi(e)||!xi(r)||!xi(n))return null;var o=function(l){return{h:QA(l.h),s:rn(l.s,0,100),v:rn(l.v,0,100),a:rn(l.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(s)});return KA(o)},"hsv"]]},Pb=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},pF=function(t){return typeof t=="string"?Pb(t.trim(),uy.string):typeof t=="object"&&t!==null?Pb(t,uy.object):[null,void 0]},_g=function(t,e){var r=vu(t);return{h:r.h,s:rn(r.s+100*e,0,100),l:r.l,a:r.a}},xg=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Ib=function(t,e){var r=vu(t);return{h:r.h,s:r.s,l:rn(r.l+100*e,0,100),a:r.a}},hy=function(){function t(e){this.parsed=pF(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Bt(xg(this.rgba),2)},t.prototype.isDark=function(){return xg(this.rgba)<.5},t.prototype.isLight=function(){return xg(this.rgba)>=.5},t.prototype.toHex=function(){return e=vg(this.rgba),r=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Rc(Bt(255*s)):"","#"+Rc(r)+Rc(n)+Rc(i)+o;var e,r,n,i,s,o},t.prototype.toRgb=function(){return vg(this.rgba)},t.prototype.toRgbString=function(){return e=vg(this.rgba),r=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var e,r,n,i,s},t.prototype.toHsl=function(){return Ab(vu(this.rgba))},t.prototype.toHslString=function(){return e=Ab(vu(this.rgba)),r=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var e,r,n,i,s},t.prototype.toHsv=function(){return e=qA(this.rgba),{h:Bt(e.h),s:Bt(e.s),v:Bt(e.v),a:Bt(e.a,3)};var e},t.prototype.invert=function(){return Wn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Wn(_g(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Wn(_g(this.rgba,-e))},t.prototype.grayscale=function(){return Wn(_g(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Wn(Ib(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Wn(Ib(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Wn({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Bt(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=vu(this.rgba);return typeof e=="number"?Wn({h:e,s:r.s,l:r.l,a:r.a}):Bt(r.h)},t.prototype.isEqual=function(e){return this.toHex()===Wn(e).toHex()},t}(),Wn=function(t){return t instanceof hy?t:new hy(t)},Rb=[],mF=function(t){t.forEach(function(e){Rb.indexOf(e)<0&&(e(hy,uy),Rb.push(e))})};function gF(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,h,c=n[this.toHex()];if(c)return c;if(o!=null&&o.closest){var f=this.toRgb(),p=1/0,m="black";if(!s.length)for(var v in r)s[v]=new t(r[v]).toRgb();for(var _ in r){var b=(l=f,h=s[_],Math.pow(l.r-h.r,2)+Math.pow(l.g-h.g,2)+Math.pow(l.b-h.b,2));b<p&&(p=b,m=_)}return m}},e.string.push([function(o){var l=o.toLowerCase(),h=l==="transparent"?"#0000":r[l];return h?new t(h).toRgb():null},"name"])}mF([gF]);const na=class _d{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof _d)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,r){const n=typeof e;if(n!==typeof r)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((i,s)=>i===r[s]);if(e!==null&&r!==null){const i=Object.keys(e),s=Object.keys(r);return i.length!==s.length?!1:i.every(o=>e[o]===r[o])}return e===r}toRgba(){const[e,r,n,i]=this._components;return{r:e,g:r,b:n,a:i}}toRgb(){const[e,r,n]=this._components;return{r:e,g:r,b:n}}toRgbaString(){const[e,r,n]=this.toUint8RgbArray();return`rgba(${e},${r},${n},${this.alpha})`}toUint8RgbArray(e){const[r,n,i]=this._components;return e=e??[],e[0]=Math.round(r*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[r,n,i]=this._components;return e[0]=r,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,n,i,s]=_d.temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return r&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[r,n,i]=this._components;return this._components[0]=Math.round(r*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[r,n,i,s]=this._components;return e[0]=r,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let r,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,i,s=255]=e,r/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const l=_d.HEX_PATTERN.exec(e);l&&(e=`#${l[2]}`)}const o=Wn(e);o.isValid()&&({r,g:n,b:i,a:s}=o.rgba,r/=255,n/=255,i/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,r,n]=this._components;this._int=(e*255<<16)+(r*255<<8)+(n*255|0)}_clamp(e,r=0,n=1){return typeof e=="number"?Math.min(Math.max(e,r),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,r),n)}),e)}};na.shared=new na,na.temp=new na,na.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Qe=na;function yF(t){return ke("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Qe.shared.setValue(t).toHex()}function vF(t){return ke("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Qe.shared.setValue(t).toNumber()}function _F(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[be.NORMAL_NPM]=be.NORMAL,t[be.ADD_NPM]=be.ADD,t[be.SCREEN_NPM]=be.SCREEN,e[be.NORMAL]=be.NORMAL_NPM,e[be.ADD]=be.ADD_NPM,e[be.SCREEN]=be.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const ZA=_F();function JA(t,e){return ZA[e?1:0][t]}function xF(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function eC(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function of(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function kb(t){return!(t&t-1)&&!!t}function Mb(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Da(t,e,r){const n=t.length;let i;if(e>=n||r===0)return;r=e+r>n?n-e:r;const s=n-r;for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}function fs(t){return t===0?0:t<0?-1:1}let wF=0;function To(){return++wF}const cy=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};cy.EMPTY=new cy(0,0,0,0);let Db=cy;const Fb={},Xn=Object.create(null),Ji=Object.create(null);class bF{constructor(e,r,n){this._canvas=le.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||le.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Nb(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(t[i+3]!==0)return!1;return!0}function Ob(t,e,r,n,i){const s=4*e;for(let o=n,l=n*s+4*r;o<=i;++o,l+=s)if(t[l+3]!==0)return!1;return!0}function EF(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,r).data;let s=0,o=0,l=e-1,h=r-1;for(;o<r&&Nb(i,e,o);)++o;if(o===r)return Db.EMPTY;for(;Nb(i,e,h);)--h;for(;Ob(i,e,s,o,h);)++s;for(;Ob(i,e,l,o,h);)--l;return++l,++h,new Db(s,o,l,h)}function SF(t){const e=EF(t),{width:r,height:n}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:i}}function TF(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}function Bi(t,e=1){var n;const r=(n=le.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}var oe=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(oe||{});const dy=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Bb=(t,e)=>dy(t).priority??e,me={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(dy).forEach(e=>{e.type.forEach(r=>{var n,i;return(i=(n=this._removeHandlers)[r])==null?void 0:i.call(n,e)})}),this},add(...t){return t.map(dy).forEach(e=>{e.type.forEach(r=>{var s,o;const n=this._addHandlers,i=this._queue;n[r]?(s=n[r])==null||s.call(n,e):(i[r]=i[r]||[],(o=i[r])==null||o.push(e))})}),this},handle(t,e,r){var o;const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(l=>e(l)),delete s[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>Bb(s,r)-Bb(i,r)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class fy{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const AF=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function CF(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function PF(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=AF.replace(/%forloop%/gi,CF(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const wg=0,bg=1,Eg=2,Sg=3,Tg=4,Ag=5;class fi{constructor(){this.data=0,this.blendMode=be.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<wg)}set blend(e){!!(this.data&1<<wg)!==e&&(this.data^=1<<wg)}get offsets(){return!!(this.data&1<<bg)}set offsets(e){!!(this.data&1<<bg)!==e&&(this.data^=1<<bg)}get culling(){return!!(this.data&1<<Eg)}set culling(e){!!(this.data&1<<Eg)!==e&&(this.data^=1<<Eg)}get depthTest(){return!!(this.data&1<<Sg)}set depthTest(e){!!(this.data&1<<Sg)!==e&&(this.data^=1<<Sg)}get depthMask(){return!!(this.data&1<<Ag)}set depthMask(e){!!(this.data&1<<Ag)!==e&&(this.data^=1<<Ag)}get clockwiseFrontFace(){return!!(this.data&1<<Tg)}set clockwiseFrontFace(e){!!(this.data&1<<Tg)!==e&&(this.data^=1<<Tg)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==be.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new fi;return e.depthTest=!1,e.blend=!0,e}}fi.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const py=[];function tC(t,e){if(!t)return null;let r="";if(typeof t=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(let n=py.length-1;n>=0;--n){const i=py[n];if(i.test&&i.test(t,r))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Pn{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,n,i,s,o,l,h){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:f}=this;this._aliasCount++;for(let p=0,m=f.length;p<m;p++)f[p][c](e,r,n,i,s,o,l,h);return f===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Pn.prototype,{dispatch:{value:Pn.prototype.emit},run:{value:Pn.prototype.emit}});class Hu{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Pn("setRealSize"),this.onUpdate=new Pn("update"),this.onError=new Pn("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class Yf extends Hu{constructor(e,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=r.unpackAlignment??4}upload(e,r,n){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===_r.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const IF={scaleMode:Ci.NEAREST,alphaMode:_r.NPM},my=class ia extends hh{constructor(e=null,r=null){super(),r=Object.assign({},ia.defaultOptions,r);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:l,height:h,wrapMode:c,format:f,type:p,target:m,resolution:v,resourceOptions:_}=r;e&&!(e instanceof Hu)&&(e=tC(e,_),e.internal=!0),this.resolution=v||le.RESOLUTION,this.width=Math.round((l||0)*this.resolution)/this.resolution,this.height=Math.round((h||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=f,this.type=p,this.target=m,this.alphaMode=n,this.uid=To(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=l>0&&h>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,r){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this}setSize(e,r,n){return n=n||this.resolution,this.setRealSize(e*n,r*n,n)}setRealSize(e,r,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=kb(this.realWidth)&&kb(this.realHeight)}setResolution(e){const r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ji[this.cacheId],delete Xn[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),ia.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,r,n=le.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const l=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${l}_${To()}`}s=e._pixiId}let o=Ji[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new ia(e,r),o.cacheId=s,ia.addToCache(o,s)),o}static fromBuffer(e,r,n,i){e=e||new Float32Array(r*n*4);const s=new Yf(e,{width:r,height:n,...i==null?void 0:i.resourceOptions});let o,l;return e instanceof Float32Array?(o=ee.RGBA,l=ve.FLOAT):e instanceof Int32Array?(o=ee.RGBA_INTEGER,l=ve.INT):e instanceof Uint32Array?(o=ee.RGBA_INTEGER,l=ve.UNSIGNED_INT):e instanceof Int16Array?(o=ee.RGBA_INTEGER,l=ve.SHORT):e instanceof Uint16Array?(o=ee.RGBA_INTEGER,l=ve.UNSIGNED_SHORT):e instanceof Int8Array?(o=ee.RGBA,l=ve.BYTE):(o=ee.RGBA,l=ve.UNSIGNED_BYTE),s.internal=!0,new ia(s,Object.assign({},IF,{type:l,format:o},i))}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Ji[r]&&Ji[r]!==e&&console.warn(`BaseTexture added to the cache with an id [${r}] that already had an entry`),Ji[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Ji[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Ji[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)delete Ji[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}};my.defaultOptions={mipmap:ui.POW2,anisotropicLevel:0,scaleMode:Ci.LINEAR,wrapMode:ki.CLAMP,alphaMode:_r.UNPACK,target:Ra.TEXTURE_2D,format:ee.RGBA,type:ve.UNSIGNED_BYTE},my._globalBatch=0;let Se=my;class gy{constructor(){this.texArray=null,this.blend=0,this.type=En.TRIANGLES,this.start=0,this.size=0,this.data=null}}let RF=0;class _t{constructor(e,r=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=RF++,this.disposeRunner=new Pn("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?ai.ELEMENT_ARRAY_BUFFER:ai.ARRAY_BUFFER}get index(){return this.type===ai.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new _t(e)}}class af{constructor(e,r=0,n=!1,i=ve.FLOAT,s,o,l,h=1){this.buffer=e,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=l,this.divisor=h}destroy(){this.buffer=null}static from(e,r,n,i,s){return new af(e,r,n,i,s)}}const kF={Float32Array,Uint32Array,Int32Array,Uint8Array};function MF(t,e){let r=0,n=0;const i={};for(let h=0;h<t.length;h++)n+=e[h],r+=t[h].length;const s=new ArrayBuffer(r*4);let o=null,l=0;for(let h=0;h<t.length;h++){const c=e[h],f=t[h],p=eC(f);i[p]||(i[p]=new kF[p](s)),o=i[p];for(let m=0;m<f.length;m++){const v=(m/c|0)*n+l,_=m%c;o[v+_]=f[m]}l+=c}return new Float32Array(s)}const Lb={5126:4,5123:2,5121:1};let DF=0;const FF={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Rs{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=DF++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Pn("disposeGeometry"),this.refCount=0}addAttribute(e,r,n=0,i=!1,s,o,l,h=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof _t||(r instanceof Array&&(r=new Float32Array(r)),r=new _t(r));const c=e.split("|");if(c.length>1){for(let p=0;p<c.length;p++)this.addAttribute(c[p],r,n,i,s);return this}let f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[e]=new af(f,n,i,s,o,l,h),this.instanced=this.instanced||h,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof _t||(e instanceof Array&&(e=new Uint16Array(e)),e=new _t(e)),e.type=ai.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],n=new _t;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),r.push(s.size*Lb[s.type]/4),s.buffer=0}for(n.data=MF(e,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Rs;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new _t(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];e.attributes[r]=new af(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=ai.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new Rs,n=[],i=[],s=[];let o;for(let l=0;l<e.length;l++){o=e[l];for(let h=0;h<o.buffers.length;h++)i[h]=i[h]||0,i[h]+=o.buffers[h].data.length,s[h]=0}for(let l=0;l<o.buffers.length;l++)n[l]=new FF[eC(o.buffers[l].data)](i[l]),r.buffers[l]=new _t(n[l]);for(let l=0;l<e.length;l++){o=e[l];for(let h=0;h<o.buffers.length;h++)n[h].set(o.buffers[h].data,s[h]),s[h]+=o.buffers[h].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=ai.ELEMENT_ARRAY_BUFFER;let l=0,h=0,c=0,f=0;for(let p=0;p<o.buffers.length;p++)if(o.buffers[p]!==o.indexBuffer){f=p;break}for(const p in o.attributes){const m=o.attributes[p];(m.buffer|0)===f&&(h+=m.size*Lb[m.type]/4)}for(let p=0;p<e.length;p++){const m=e[p].indexBuffer.data;for(let v=0;v<m.length;v++)r.indexBuffer.data[v+c]+=l;l+=e[p].buffers[f].data.length/h,c+=m.length}}return r}}class rC extends Rs{constructor(e=!1){super(),this._buffer=new _t(null,e,!1),this._indexBuffer=new _t(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ve.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ve.FLOAT).addAttribute("aColor",this._buffer,4,!0,ve.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ve.FLOAT).addIndex(this._indexBuffer)}}const lf=Math.PI*2,NF=180/Math.PI,OF=Math.PI/180;var Wt=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Wt||{});class Fe{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Fe(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}}Fe.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const kc=[new Fe,new Fe,new Fe,new Fe];class Ae{constructor(e=0,r=0,n=0,i=0){this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=Wt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ae(0,0,0,0)}clone(){return new Ae(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const k=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=k)return!1;const L=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>L}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const l=kc[0].set(e.left,e.top),h=kc[1].set(e.left,e.bottom),c=kc[2].set(e.right,e.top),f=kc[3].set(e.right,e.bottom);if(c.x<=l.x||h.y<=l.y)return!1;const p=Math.sign(r.a*r.d-r.b*r.c);if(p===0||(r.apply(l,l),r.apply(h,h),r.apply(c,c),r.apply(f,f),Math.max(l.x,h.x,c.x,f.x)<=n||Math.min(l.x,h.x,c.x,f.x)>=i||Math.max(l.y,h.y,c.y,f.y)<=s||Math.min(l.y,h.y,c.y,f.y)>=o))return!1;const m=p*(h.y-l.y),v=p*(l.x-h.x),_=m*n+v*s,b=m*i+v*s,T=m*n+v*o,x=m*i+v*o;if(Math.max(_,b,T,x)<=m*l.x+v*l.y||Math.min(_,b,T,x)>=m*f.x+v*f.y)return!1;const E=p*(l.y-c.y),w=p*(c.x-l.x),A=E*n+w*s,P=E*i+w*s,D=E*n+w*o,R=E*i+w*o;return!(Math.max(A,P,D,R)<=E*l.x+w*l.y||Math.min(A,P,D,R)>=E*f.x+w*f.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}}Ae.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Qf{constructor(e=0,r=0,n=0){this.x=e,this.y=r,this.radius=n,this.type=Wt.CIRC}clone(){return new Qf(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new Ae(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Qf.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class qf{constructor(e=0,r=0,n=0,i=0){this.x=e,this.y=r,this.width=n,this.height=i,this.type=Wt.ELIP}clone(){return new qf(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new Ae(this.x-this.width,this.y-this.height,this.width,this.height)}}qf.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class yo{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=Wt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new yo(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const l=this.points[s*2],h=this.points[s*2+1],c=this.points[o*2],f=this.points[o*2+1];h>r!=f>r&&e<(c-l)*((r-h)/(f-h))+l&&(n=!n)}return n}}yo.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class Kf{constructor(e=0,r=0,n=0,i=0,s=20){this.x=e,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=Wt.RREC}clone(){return new Kf(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}}Kf.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class et{constructor(e=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,i,s,o){return this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new Fe;const n=e.x,i=e.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(e,r){r=r||new Fe;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*r+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,r,n,i,s,o,l,h,c){return this.a=Math.cos(l+c)*s,this.b=Math.sin(l+c)*s,this.c=-Math.sin(l-h)*o,this.d=Math.cos(l-h)*o,this.tx=e-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,l=-Math.atan2(-i,s),h=Math.atan2(n,r),c=Math.abs(l+h);return c<1e-5||Math.abs(lf-c)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=l,e.skew.y=h),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*r+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new et;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new et}static get TEMP_MATRIX(){return new et}}et.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const eo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],to=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ro=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],no=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],yy=[],nC=[],Mc=Math.sign;function BF(){for(let t=0;t<16;t++){const e=[];yy.push(e);for(let r=0;r<16;r++){const n=Mc(eo[t]*eo[r]+ro[t]*to[r]),i=Mc(to[t]*eo[r]+no[t]*to[r]),s=Mc(eo[t]*ro[r]+ro[t]*no[r]),o=Mc(to[t]*ro[r]+no[t]*no[r]);for(let l=0;l<16;l++)if(eo[l]===n&&to[l]===i&&ro[l]===s&&no[l]===o){e.push(l);break}}}for(let t=0;t<16;t++){const e=new et;e.set(eo[t],to[t],ro[t],no[t],0,0),nC.push(e)}}BF();const at={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>eo[t],uY:t=>to[t],vX:t=>ro[t],vY:t=>no[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>yy[t][e],sub:(t,e)=>yy[t][at.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?at.S:at.N:Math.abs(e)*2<=Math.abs(t)?t>0?at.E:at.W:e>0?t>0?at.SE:at.SW:t>0?at.NE:at.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=nC[at.inv(e)];i.tx=r,i.ty=n,t.append(i)}};class ni{constructor(e,r,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new ni(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}ni.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const vy=class{constructor(){this.worldTransform=new et,this.localTransform=new et,this.position=new ni(this.onChange,this,0,0),this.scale=new ni(this.onChange,this,1,1),this.pivot=new ni(this.onChange,this,0,0),this.skew=new ni(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};vy.IDENTITY=new vy;let Zf=vy;Zf.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var LF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,UF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Ub(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function Cg(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function iC(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Cg(2*e);case"bvec3":return Cg(3*e);case"bvec4":return Cg(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Fa=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],zF={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GF={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function $F(t,e){var n;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){((n=t.uniforms[i])==null?void 0:n.group)===!0&&(t.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let l=!1;for(let h=0;h<Fa.length;h++)if(Fa[h].test(s,o)){r.push(Fa[h].code(i,o)),l=!0;break}if(!l){const h=(s.size===1&&!s.isArray?zF:GF)[s.type].replace("location",`ud["${i}"].location`);r.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const sC={};let Ko=sC;function HF(){if(Ko===sC||Ko!=null&&Ko.isContextLost()){const t=le.ADAPTER.createCanvas();let e;le.PREFER_ENV>=Io.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ko=e}return Ko}let Dc;function jF(){if(!Dc){Dc=tn.MEDIUM;const t=HF();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(Dc=e.precision?tn.HIGH:tn.MEDIUM)}}return Dc}function zb(t,e){const r=t.getShaderSource(e).split(`
`).map((c,f)=>`${f}: ${c}`),n=t.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),l=[""];o.forEach(c=>{r[c-1]=`%c${r[c-1]}%c`,l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=r.join(`
`);l[0]=h,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...l),console.groupEnd()}function VF(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||zb(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||zb(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const WF={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function oC(t){return WF[t]}let Fc=null;const Gb={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function aC(t,e){if(!Fc){const r=Object.keys(Gb);Fc={};for(let n=0;n<r.length;++n){const i=r[n];Fc[t[i]]=Gb[i]}}return Fc[e]}function $b(t,e,r){if(t.substring(0,9)!=="precision"){let n=e;return e===tn.HIGH&&r!==tn.HIGH&&(n=tn.MEDIUM),`precision ${n} float;
${t}`}else if(r!==tn.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let Ll;function XF(){if(typeof Ll=="boolean")return Ll;try{Ll=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ll=!1}return Ll}let YF=0;const Nc={},_y=class sa{constructor(e,r,n="pixi-shader",i={}){this.extra={},this.id=YF++,this.vertexSrc=e||sa.defaultVertexSrc,this.fragmentSrc=r||sa.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Nc[n]?(Nc[n]++,n+=`-${Nc[n]}`):Nc[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=$b(this.vertexSrc,sa.defaultVertexPrecision,tn.HIGH),this.fragmentSrc=$b(this.fragmentSrc,sa.defaultFragmentPrecision,jF())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return UF}static get defaultFragmentSrc(){return LF}static from(e,r,n){const i=e+r;let s=Fb[i];return s||(Fb[i]=s=new sa(e,r,n)),s}};_y.defaultVertexPrecision=tn.HIGH,_y.defaultFragmentPrecision=Pi.apple.device?tn.HIGH:tn.MEDIUM;let Ii=_y,QF=0;class In{constructor(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=QF++,this.static=!!r,this.ubo=!!n,e instanceof _t?(this.buffer=e,this.buffer.type=ai.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new _t(new Float32Array(1)),this.buffer.type=ai.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,n){if(!this.ubo)this.uniforms[e]=new In(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,n){return new In(e,r,n)}static uboFrom(e,r){return new In(e,r??!0,!0)}}class li{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof In?this.uniformGroup=r:this.uniformGroup=new In(r):this.uniformGroup=new In({}),this.disposeRunner=new Pn("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,n){const i=Ii.from(e,r);return new li(i,n)}}class qF{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=In.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Ii(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new et,default:this.defaultGroupCache[e]};return new li(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class xy{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function KF(){return!Pi.apple.device}function ZF(t){let e=!0;const r=le.ADAPTER.getNavigator();if(Pi.tablet||Pi.phone){if(Pi.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(Pi.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}class Jf{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var JF=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,eN=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const ql=class mn extends Jf{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=rC,this.vertexSize=6,this.state=fi.for2d(),this.size=mn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??ZF(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??KF(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return ke("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return eN}static get defaultFragmentTemplate(){return JF}setShaderGenerator({vertex:e=mn.defaultVertexSrc,fragment:r=mn.defaultFragmentTemplate}={}){this.shaderGenerator=new qF(e,r)}contextChange(){const e=this.renderer.gl;le.PREFER_ENV===Io.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),mn.defaultMaxTextures),this.maxTextures=PF(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:r}=mn,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new gy);for(;r.length<i;)r.push(new xy);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:r}=this,n=mn._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let l=++Se._globalBatch,h=0,c=n[0],f=0;i.copyBoundTextures(s,r);for(let p=0;p<this._bufferSize;++p){const m=e[p];e[p]=null,m._batchEnabled!==l&&(c.count>=r&&(i.boundArray(c,s,l,r),this.buildDrawCalls(c,f,p),f=p,c=n[++h],++l),m._batchEnabled=l,m.touched=o,c.elements[c.count++]=m)}c.count>0&&(i.boundArray(c,s,l,r),this.buildDrawCalls(c,f,this._bufferSize),++h,++l);for(let p=0;p<s.length;p++)s[p]=null;Se._globalBatch=l}buildDrawCalls(e,r,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:l}=this,h=mn._drawCallPool;let c=this._dcIndex,f=this._aIndex,p=this._iIndex,m=h[c];m.start=this._iIndex,m.texArray=e;for(let v=r;v<n;++v){const _=i[v],b=_._texture.baseTexture,T=ZA[b.alphaMode?1:0][_.blendMode];i[v]=null,r<v&&m.blend!==T&&(m.size=p-m.start,r=v,m=h[++c],m.texArray=e,m.start=p),this.packInterleavedGeometry(_,s,o,f,p),f+=_.vertexData.length/2*l,p+=_.indices.length,m.blend=T}r<n&&(m.size=p-m.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=p}bindAndClearTexArray(e){const r=this.renderer.texture;for(let n=0;n<e.count;n++)r.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:r,_indexBuffer:n}=this;mn.canUploadSameBuffer?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:r,state:n}=this.renderer,i=mn._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:l,type:h,size:c,start:f,blend:p}=i[o];s!==l&&(s=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,n.set(this.state),r.drawElements(h,c,r.UNSIGNED_SHORT,f*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),mn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const r=of(Math.ceil(e/8)),n=Mb(r),i=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new fy(i*this.vertexSize*4)),s}getIndexBuffer(e){const r=of(Math.ceil(e/12)),n=Mb(r),i=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,r,n,i,s){const{uint32View:o,float32View:l}=r,h=i/this.vertexSize,c=e.uvs,f=e.indices,p=e.vertexData,m=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=Qe.shared.setValue(e._tintRGB).toPremultiplied(v,e._texture.baseTexture.alphaMode>0);for(let b=0;b<p.length;b+=2)l[i++]=p[b],l[i++]=p[b+1],l[i++]=c[b],l[i++]=c[b+1],o[i++]=_,l[i++]=m;for(let b=0;b<f.length;b++)n[s++]=h+f[b]}};ql.defaultBatchSize=4096,ql.extension={name:"batch",type:oe.RendererPlugin},ql._drawCallPool=[],ql._textureArrayPool=[];let io=ql;me.add(io);var tN=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,rN=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const wy=class Kl extends li{constructor(e,r,n){const i=Ii.from(e||Kl.defaultVertexSrc,r||Kl.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=Kl.defaultResolution,this.multisample=Kl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new fi}apply(e,r,n,i,s){e.applyFilter(this,r,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return rN}static get defaultFragmentSrc(){return tN}};wy.defaultResolution=1,wy.defaultMultisample=Et.NONE;let ar=wy;class uf{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Qe(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=e,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}uf.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},uf.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"background"};me.add(uf);class lC{constructor(e){this.renderer=e,this.emptyRenderer=new Jf(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,r,n,i){const{elements:s,ids:o,count:l}=e;let h=0;for(let c=0;c<l;c++){const f=s[c],p=f._batchLocation;if(p>=0&&p<i&&r[p]===f){o[c]=p;continue}for(;h<i;){const m=r[h];if(m&&m._batchEnabled===n&&m._batchLocation===h){h++;continue}o[c]=h,f._batchLocation=h,r[h]=f;break}}}destroy(){this.renderer=null}}lC.extension={type:oe.RendererSystem,name:"batch"};me.add(lC);let Hb=0;class hf{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Hb++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Hb++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let n;if(le.PREFER_ENV>=Io.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}hf.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},hf.extension={type:oe.RendererSystem,name:"context"};me.add(hf);class by{constructor(e,r){if(this.width=Math.round(e),this.height=Math.round(r),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Pn("disposeFramebuffer"),this.multisample=Et.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new Se(null,{scaleMode:Ci.NEAREST,resolution:1,mipmap:ui.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Se(null,{scaleMode:Ci.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ui.OFF,format:ee.DEPTH_COMPONENT,type:ve.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!e||!r)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class uC extends Se{constructor(e={}){if(typeof e=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:r,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=Et.NONE),super(null,e),this.mipmap=ui.OFF,this.valid=!0,this._clear=new Qe([0,0,0,0]),this.framebuffer=new by(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Li extends Hu{constructor(e){const r=e,n=r.naturalWidth||r.videoWidth||r.displayWidth||r.width,i=r.naturalHeight||r.videoHeight||r.displayHeight||r.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,n){n===void 0&&!r.startsWith("data:")?e.crossOrigin=TF(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,r,n,i){const s=e.gl,o=r.realWidth,l=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===_r.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=l,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class hC extends Li{constructor(e,r){if(r=r||{},typeof e=="string"){const n=new Image;Li.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??le.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===_r.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const l=s[o];if(l!==n&&l.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class p1{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const i=r.width,s=r.height;if(n){const o=e.width/2/i,l=e.height/2/s,h=e.x/i+o,c=e.y/s+l;n=at.add(n,at.NW),this.x0=h+o*at.uX(n),this.y0=c+l*at.uY(n),n=at.add(n,2),this.x1=h+o*at.uX(n),this.y1=c+l*at.uY(n),n=at.add(n,2),this.x2=h+o*at.uX(n),this.y2=c+l*at.uY(n),n=at.add(n,2),this.x3=h+o*at.uX(n),this.y3=c+l*at.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}p1.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const jb=new p1;function Oc(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class ne extends hh{constructor(e,r,n,i,s,o,l){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new Ae(0,0,1,1)),e instanceof ne&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=jb,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Fe(o.x,o.y):new Fe(0,0),this.defaultBorders=l,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&Xn[r.url]&&ne.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ne.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new ne(this.baseTexture,!this.noFrame&&e,r,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===jb&&(this._uvs=new p1),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},n=le.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Se){if(!e.cacheId){const l=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${l}-${To()}`,Se.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const l=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${l}_${To()}`}s=e._pixiId}let o=Xn[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Se)?(r.resolution||(r.resolution=Bi(e)),o=new ne(new Se(e,r)),o.baseTexture.cacheId=s,Se.addToCache(o.baseTexture,s),ne.addToCache(o,s)):!o&&e instanceof Se&&(o=new ne(e),ne.addToCache(o,s)),o}static fromURL(e,r){const n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),i=ne.from(e,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,r,n,i){return new ne(Se.fromBuffer(e,r,n,i))}static fromLoader(e,r,n,i){const s=new Se(e,Object.assign({scaleMode:Se.defaultOptions.scaleMode,resolution:Bi(r)},i)),{resource:o}=s;o instanceof hC&&(o.url=r);const l=new ne(s);return n||(n=r),Se.addToCache(l.baseTexture,n),ne.addToCache(l,n),n!==r&&(Se.addToCache(l.baseTexture,r),ne.addToCache(l,r)),l.baseTexture.valid?Promise.resolve(l):new Promise(h=>{l.baseTexture.once("loaded",()=>h(l))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Xn[r]&&Xn[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),Xn[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Xn[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Xn[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)Xn[e.textureCacheIds[r]]===e&&delete Xn[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=e,o=r+i>this.baseTexture.width,l=n+s>this.baseTexture.height;if(o||l){const h=o&&l?"and":"or",c=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,f=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${h} ${f}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ne._EMPTY||(ne._EMPTY=new ne(new Se),Oc(ne._EMPTY),Oc(ne._EMPTY.baseTexture)),ne._EMPTY}static get WHITE(){if(!ne._WHITE){const e=le.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),ne._WHITE=new ne(Se.from(e)),Oc(ne._WHITE),Oc(ne._WHITE.baseTexture)}return ne._WHITE}}class Ro extends ne{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new Ro(new uC(e))}}class cC{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,n=Et.NONE){const i=new uC(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new Ro(i)}getOptimalTexture(e,r,n=1,i=Et.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),r=Math.max(Math.ceil(r*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=of(e),r=of(r),s=((e&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,r,n){const i=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||Et.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}cC.SCREEN_KEY=-1;class nN extends Rs{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class dC extends Rs{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new _t(this.vertices),this.uvBuffer=new _t(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/e.width,this.uvs[3]=i,this.uvs[4]=n+r.width/e.width,this.uvs[5]=i+r.height/e.height,this.uvs[6]=n,this.uvs[7]=i+r.height/e.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class iN{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Et.NONE,this.sourceFrame=new Ae,this.destinationFrame=new Ae,this.bindingSourceFrame=new Ae,this.bindingDestinationFrame=new Ae,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Bc=[new Fe,new Fe,new Fe,new Fe],Pg=new et;class fC{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new cC,this.statePool=[],this.quad=new nN,this.quadUv=new dC,this.tempRect=new Ae,this.activeState={},this.globalUniforms=new In({outputFrame:new Ae,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new iN,o=n.renderTexture;let l,h;if(o.current){const T=o.current;l=T.resolution,h=T.multisample}else l=n.resolution,h=n.multisample;let c=r[0].resolution||l,f=r[0].multisample??h,p=r[0].padding,m=r[0].autoFit,v=r[0].legacy??!0;for(let T=1;T<r.length;T++){const x=r[T];c=Math.min(c,x.resolution||l),f=Math.min(f,x.multisample??h),p=this.useMaxPadding?Math.max(p,x.padding):p+x.padding,m=m&&x.autoFit,v=v||(x.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=f,s.legacy=v,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(p);const _=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Pg.copyFrom(n.projection.transform).invert(),_),m?(s.sourceFrame.fit(_),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(_)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,f),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const b=this.tempRect;b.x=0,b.y=0,b.width=s.sourceFrame.width,b.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,b),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,l=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],l[0]=.5*o[2],l[1]=.5*o[3],l[2]=r.sourceFrame.width*s[2]-.5*o[2],l[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const c=i.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const h=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,h.renderTexture,ei.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let c=r.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,r.resolution);f.filterFrame=c.filterFrame;let p=0;for(p=0;p<n.length-1;++p){p===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(c.width,c.height,r.resolution),f.filterFrame=c.filterFrame),n[p].apply(this,c,f,ei.CLEAR,r);const m=c;c=f,f=m}n[p].apply(this,c,h.renderTexture,ei.BLEND,r),p>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=ei.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===ei.CLEAR||r===ei.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(En.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(En.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),l=r.worldTransform.copyTo(et.TEMP_MATRIX);return l.invert(),o.prepend(l),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,n=1,i=Et.NONE){return this.texturePool.getOptimalTexture(e,r,n,i)}getFilterTexture(e,r,n){if(typeof e=="number"){const s=e;e=r,r=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||Et.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const n=Bc[0],i=Bc[1],s=Bc[2],o=Bc[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const l=Math.min(n.x,i.x,s.x,o.x),h=Math.min(n.y,i.y,s.y,o.y),c=Math.max(n.x,i.x,s.x,o.x),f=Math.max(n.y,i.y,s.y,o.y);r.x=l,r.y=h,r.width=c-l,r.height=f-h}roundFrame(e,r,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:l,c:h,d:c}=s;if((Math.abs(l)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?Pg.copyFrom(s):Pg.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(r),this.transformAABB(s.invert(),e)}}}fC.extension={type:oe.RendererSystem,name:"filter"};me.add(fC);class sN{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Et.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const oN=new Ae;class pC{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new by(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ae,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;le.PREFER_ENV===Io.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const l=e.colorTextures[o];this.renderer.texture.unbind(l.parentTextureArray||l)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>n,l=r.height>>n,h=o/r.width;this.setViewport(r.x*h,r.y*h,o,l)}else{const o=e.width>>n,l=e.height>>n;this.setViewport(0,0,o,l)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,n,i){const s=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=n,s.height=i,this.gl.viewport(e,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,n,i,s=Q0.COLOR|Q0.DEPTH){const{gl:o}=this;o.clearColor(e,r,n,i),o.clear(s)}initFramebuffer(e){const{gl:r}=this,n=new sN(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){r.bindRenderbuffer(r.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=r.DEPTH_STENCIL:e.depth&&e.stencil?o=r.DEPTH24_STENCIL8:e.depth?o=r.DEPTH_COMPONENT24:o=r.STENCIL_INDEX8,n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,o,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const l=i[o],h=l.parentTextureArray||l;this.renderer.texture.bind(h,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const l=[];for(let h=0;h<o;h++){const c=s[h],f=c.parentTextureArray||c;this.renderer.texture.bind(f,0),h===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+h,c.target,f._glTextures[this.CONTEXT_UID].texture,r),l.push(n.COLOR_ATTACHMENT0+h))}if(l.length>1&&n.drawBuffers(l),e.depthTexture&&this.writeDepthTexture){const h=e.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,r)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let h,c;this.renderer.context.webGLVersion===1?(h=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH_STENCIL):e.depth&&e.stencil?(h=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH24_STENCIL8):e.depth?(h=n.DEPTH_ATTACHMENT,c=n.DEPTH_COMPONENT24):(h=n.STENCIL_ATTACHMENT,c=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,c,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,c,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,h,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let n=Et.NONE;if(e<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=e){n=r[i];break}return n===1&&(n=Et.NONE),n}blit(e,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:l}=this;if(s.context.webGLVersion!==2||!i)return;const h=i.glFramebuffers[l];if(!h)return;if(!e){if(!h.msaaBuffer)return;const f=i.colorTextures[0];if(!f)return;h.blitFramebuffer||(h.blitFramebuffer=new by(i.width,i.height),h.blitFramebuffer.addColorTexture(0,f)),e=h.blitFramebuffer,e.colorTextures[0]!==f&&(e.colorTextures[0]=f,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}r||(r=oN,r.width=i.width,r.height=i.height),n||(n=r);const c=r.width===n.width&&r.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=r.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let l,h;this.renderer.context.webGLVersion===1?(l=s.DEPTH_STENCIL_ATTACHMENT,h=s.DEPTH_STENCIL):e.depth?(l=s.DEPTH_STENCIL_ATTACHMENT,h=s.DEPTH24_STENCIL8):(l=s.STENCIL_ATTACHMENT,h=s.STENCIL_INDEX8),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,h,n,i):s.renderbufferStorage(s.RENDERBUFFER,h,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,l,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ae}destroy(){this.renderer=null}}pC.extension={type:oe.RendererSystem,name:"framebuffer"};me.add(pC);const Ig={5126:4,5123:2,5121:1};class mC{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;le.PREFER_ENV===Io.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,l,h)=>n.drawElementsInstancedANGLE(i,s,o,l,h),e.drawArraysInstanced=(i,s,o,l)=>n.drawArraysInstancedANGLE(i,s,o,l)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(e,r,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];r.update(i)}}checkCompatibility(e,r){const n=e.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,r){const n=e.attributes,i=r.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,l=r.program;l.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,l);const h=this.getSignature(e,l),c=e.glVertexArrayObjects[this.CONTEXT_UID];let f=c[h];if(f)return c[l.id]=f,f;const p=e.buffers,m=e.attributes,v={},_={};for(const b in p)v[b]=0,_[b]=0;for(const b in m)!m[b].size&&l.attributeData[b]?m[b].size=l.attributeData[b].size:m[b].size||console.warn(`PIXI Geometry attribute '${b}' size cannot be determined (likely the bound shader does not have the attribute)`),v[m[b].buffer]+=m[b].size*Ig[m[b].type];for(const b in m){const T=m[b],x=T.size;T.stride===void 0&&(v[T.buffer]===x*Ig[T.type]?T.stride=0:T.stride=v[T.buffer]),T.start===void 0&&(T.start=_[T.buffer],_[T.buffer]+=x*Ig[T.type])}f=i.createVertexArray(),i.bindVertexArray(f);for(let b=0;b<p.length;b++){const T=p[b];o.bind(T),n&&T._glBuffers[s].refCount++}return this.activateVao(e,l),c[l.id]=f,c[h]=f,i.bindVertexArray(null),o.unbind(ai.ARRAY_BUFFER),f}disposeGeometry(e,r){var l;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(l=this.renderer)==null?void 0:l.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let h=0;h<s.length;h++){const c=s[h]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!r&&o.dispose(s[h],r))}if(!r){for(const h in n)if(h[0]==="g"){const c=n[h];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)}activateVao(e,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,l=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let h=null;for(const c in l){const f=l[c],p=o[f.buffer],m=p._glBuffers[i];if(r.attributeData[c]){h!==m&&(s.bind(p),h=m);const v=r.attributeData[c].location;if(n.enableVertexAttribArray(v),n.vertexAttribPointer(v,f.size,f.type||n.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)n.vertexAttribDivisor(v,f.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const l=o.indexBuffer.data.BYTES_PER_ELEMENT,h=l===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,r||o.indexBuffer.data.length,h,(n||0)*l,i||1):s.drawElements(e,r||o.indexBuffer.data.length,h,(n||0)*l):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,r||o.getSize(),i||1):s.drawArrays(e,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}mC.extension={type:oe.RendererSystem,name:"geometry"};me.add(mC);const Vb=new et;class m1{constructor(e,r){this._texture=e,this.mapCoord=new et,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&(Vb.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Vb));const o=r.baseTexture,l=this.uClampFrame,h=this.clampMargin/o.resolution,c=this.clampOffset;return l[0]=(r._frame.x+h+c)/o.width,l[1]=(r._frame.y+h+c)/o.height,l[2]=(r._frame.x+r._frame.width-h+c)/o.width,l[3]=(r._frame.y+r._frame.height-h+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var aN=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,lN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class uN extends ar{constructor(e,r,n){let i=null;typeof e!="string"&&r===void 0&&n===void 0&&(i=e,e=void 0,r=void 0,n=void 0),super(e||lN,r||aN,n),this.maskSprite=i,this.maskMatrix=new et}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new m1(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,n,i))}}class hN{constructor(e=null){this.type=Ct.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=ar.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ct.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class gC{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new hN;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==Ct.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Ct.SCISSOR:this.renderer.scissor.push(n);break;case Ct.STENCIL:this.renderer.stencil.push(n);break;case Ct.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Ct.COLOR:this.pushColorMask(n);break}n.type===Ct.SPRITE&&this.maskStack.push(n)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Ct.SCISSOR:this.renderer.scissor.pop(r);break;case Ct.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Ct.SPRITE:this.popSpriteMask(r);break;case Ct.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Ct.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=Ct.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Ct.SCISSOR:e.type=Ct.STENCIL:e.type=Ct.COLOR}pushSpriteMask(e){const{maskObject:r}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new uN])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=r;const s=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}gC.extension={type:oe.RendererSystem,name:"mask"};me.add(gC);class yC{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Wb=new et,Xb=[],vC=class xd extends yC{constructor(e){super(e),this.glConst=le.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const r=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,Xb.pop()??new Ae);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),r&&o.fit(r),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:r,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:r}=e;if(!r.isFastRect||!r.isFastRect()||xd.isMatrixRotated(r.worldTransform)||xd.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,r,n,i,s){xd.isMatrixRotated(s)||(s=s?Wb.copyFrom(s):Wb.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:r}=this.renderer;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:r}=this.renderer;e&&Xb.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)}};vC.extension={type:oe.RendererSystem,name:"scissor"};let cN=vC;me.add(cN);class _C extends yC{constructor(e){super(e),this.glConst=le.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}_C.extension={type:oe.RendererSystem,name:"stencil"};me.add(_C);class xC{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ke("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return ke("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return ke("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}xC.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"_plugin"};me.add(xC);class wC{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new et,this.transform=null}update(e,r,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(e){}destroy(){this.renderer=null}}wC.extension={type:oe.RendererSystem,name:"projection"};me.add(wC);const dN=new Zf,Yb=new Ae;class bC{constructor(e){this.renderer=e,this._tempMatrix=new et}generateTexture(e,r){const{region:n,...i}=r||{},s=(n==null?void 0:n.copyTo(Yb))||e.getLocalBounds(Yb,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const l=Ro.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const h=e.transform;return e.transform=dN,this.renderer.render(e,{renderTexture:l,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=h,l}destroy(){}}bC.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"textureGenerator"};me.add(bC);const Ys=new Ae,Ul=new Ae;class EC{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ae,this.destinationFrame=new Ae,this.viewportFrame=new Ae}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,n){const i=this.renderer;this.current=e;let s,o,l;e?(s=e.baseTexture,l=s.resolution,r||(Ys.width=e.frame.width,Ys.height=e.frame.height,r=Ys),n||(Ul.x=e.frame.x,Ul.y=e.frame.y,Ul.width=r.width,Ul.height=r.height,n=Ul),o=s.framebuffer):(l=i.resolution,r||(Ys.width=i._view.screen.width,Ys.height=i._view.screen.height,r=Ys),n||(n=Ys,n.width=r.width,n.height=r.height));const h=this.viewportFrame;h.x=n.x*l,h.y=n.y*l,h.width=n.width*l,h.height=n.height*l,e||(h.y=i.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(o,h),this.renderer.projection.update(n,r,l,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(e,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=Qe.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,l=s.width!==o.width||s.height!==o.height;if(l){let{x:h,y:c,width:f,height:p}=this.viewportFrame;h=Math.round(h),c=Math.round(c),f=Math.round(f),p=Math.round(p),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,c,f,p)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),l&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}EC.extension={type:oe.RendererSystem,name:"renderTexture"};me.add(EC);class fN{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function pN(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=aC(e,s.type),l={type:o,name:s.name,size:oC(o),location:e.getAttribLocation(t,s.name)};r[s.name]=l}return r}function mN(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),l=!!s.name.match(/\[.*?\]$/),h=aC(e,s.type);r[o]={name:o,index:i,type:h,size:s.size,isArray:l,value:iC(h,s.size)}}return r}function gN(t,e){var l;const r=Ub(t,t.VERTEX_SHADER,e.vertexSrc),n=Ub(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=(l=e.extra)==null?void 0:l.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||VF(t,i,r,n),e.attributeData=pN(i,t),e.uniformData=mN(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const h=Object.keys(e.attributeData);h.sort((c,f)=>c>f?1:-1);for(let c=0;c<h.length;c++)e.attributeData[h[c]].location=c,t.bindAttribLocation(i,c,h[c]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);const o={};for(const h in e.uniformData){const c=e.uniformData[h];o[h]={location:t.getUniformLocation(i,h),value:iC(c.type,c.size)}}return new fN(i,o)}function yN(t,e,r,n,i){r.buffer.update(i)}const vN={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},SC={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function _N(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(r=SC[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const l=n%r%16;n+=l,i+=l}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function xN(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((n,i)=>n.index-i.index),r}function wN(t,e){if(!t.autoManage)return{size:0,syncFunc:yN};const r=xN(t.uniforms,e),{uboElements:n,size:i}=_N(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const l=n[o],h=t.uniforms[l.data.name],c=l.data.name;let f=!1;for(let p=0;p<Fa.length;p++){const m=Fa[p];if(m.codeUbo&&m.test(l.data,h)){s.push(`offset = ${l.offset/4};`,Fa[p].codeUbo(l.data.name,h)),f=!0;break}}if(!f)if(l.data.size>1){const p=oC(l.data.type),m=Math.max(SC[l.data.type]/16,1),v=p/m,_=(4-v%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${l.offset/4};

                t = 0;

                for(var i=0; i < ${l.data.size*m}; i++)
                {
                    for(var j = 0; j < ${v}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${_};
                }

                `)}else{const p=vN[l.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${l.offset/4};
                ${p};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let bN=0;const Lc={textureCount:0,uboCount:0};class TC{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=bN++}systemCheck(){if(!XF())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(Lc.textureCount=0,Lc.uboCount=0,this.syncUniformGroup(e.uniformGroup,Lc)),i}setUniforms(e){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,r){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))}syncUniforms(e,r,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=$F(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,Lc,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(e,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let l=this._uboCache[o];if(l||(l=this._uboCache[o]=wN(e,this.shader.program.uniformData)),e.autoManage){const h=new Float32Array(l.size/4);e.buffer.update(h)}return r.uniformGroups[e.id]=l.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,n=e.program,i=gN(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}TC.extension={type:oe.RendererSystem,name:"shader"};me.add(TC);class cf{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.4.2 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}cf.defaultOptions={hello:!1},cf.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"startup"};me.add(cf);function EN(t,e=[]){return e[be.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.ADD]=[t.ONE,t.ONE],e[be.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.NONE]=[0,0],e[be.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[be.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[be.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[be.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[be.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[be.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[be.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[be.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[be.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[be.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[be.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const SN=0,TN=1,AN=2,CN=3,PN=4,IN=5,AC=class Ey{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=be.NONE,this._blendEq=!1,this.map=[],this.map[SN]=this.setBlend,this.map[TN]=this.setOffset,this.map[AN]=this.setCullFace,this.map[CN]=this.setDepthTest,this.map[PN]=this.setFrontFace,this.map[IN]=this.setDepthMask,this.checks=[],this.defaultState=new fi,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=EN(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let r=this.stateId^e.data,n=0;for(;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e=e||this.defaultState;for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Ey.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Ey.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,r){const n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null}};AC.extension={type:oe.RendererSystem,name:"state"};let RN=AC;me.add(RN);class kN extends hh{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(i=>e.systems[i]),n=[...r,...Object.keys(e.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(r=>{this.runners[r]=new Pn(r)})}addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,r){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](r[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Zl=class wd{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=wd.defaultMaxIdle,this.checkCountMax=wd.defaultCheckCountMax,this.mode=wd.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==s1.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,r=e.managedTextures;let n=!1;for(let i=0;i<r.length;i++){const s=r[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),r[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<r.length;s++)r[s]!==null&&(r[i++]=r[s]);r.length=i}}unload(e){const r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Zl.defaultMode=s1.AUTO,Zl.defaultMaxIdle=60*60,Zl.defaultCheckCountMax=60*10,Zl.extension={type:oe.RendererSystem,name:"textureGC"};let so=Zl;me.add(so);class Rg{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ve.UNSIGNED_BYTE,this.internalFormat=ee.RGBA,this.samplerType=0}}function MN(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:ae.FLOAT,[t.RGBA]:ae.FLOAT,[t.ALPHA]:ae.FLOAT,[t.LUMINANCE]:ae.FLOAT,[t.LUMINANCE_ALPHA]:ae.FLOAT,[t.R8]:ae.FLOAT,[t.R8_SNORM]:ae.FLOAT,[t.RG8]:ae.FLOAT,[t.RG8_SNORM]:ae.FLOAT,[t.RGB8]:ae.FLOAT,[t.RGB8_SNORM]:ae.FLOAT,[t.RGB565]:ae.FLOAT,[t.RGBA4]:ae.FLOAT,[t.RGB5_A1]:ae.FLOAT,[t.RGBA8]:ae.FLOAT,[t.RGBA8_SNORM]:ae.FLOAT,[t.RGB10_A2]:ae.FLOAT,[t.RGB10_A2UI]:ae.FLOAT,[t.SRGB8]:ae.FLOAT,[t.SRGB8_ALPHA8]:ae.FLOAT,[t.R16F]:ae.FLOAT,[t.RG16F]:ae.FLOAT,[t.RGB16F]:ae.FLOAT,[t.RGBA16F]:ae.FLOAT,[t.R32F]:ae.FLOAT,[t.RG32F]:ae.FLOAT,[t.RGB32F]:ae.FLOAT,[t.RGBA32F]:ae.FLOAT,[t.R11F_G11F_B10F]:ae.FLOAT,[t.RGB9_E5]:ae.FLOAT,[t.R8I]:ae.INT,[t.R8UI]:ae.UINT,[t.R16I]:ae.INT,[t.R16UI]:ae.UINT,[t.R32I]:ae.INT,[t.R32UI]:ae.UINT,[t.RG8I]:ae.INT,[t.RG8UI]:ae.UINT,[t.RG16I]:ae.INT,[t.RG16UI]:ae.UINT,[t.RG32I]:ae.INT,[t.RG32UI]:ae.UINT,[t.RGB8I]:ae.INT,[t.RGB8UI]:ae.UINT,[t.RGB16I]:ae.INT,[t.RGB16UI]:ae.UINT,[t.RGB32I]:ae.INT,[t.RGB32UI]:ae.UINT,[t.RGBA8I]:ae.INT,[t.RGBA8UI]:ae.UINT,[t.RGBA16I]:ae.INT,[t.RGBA16UI]:ae.UINT,[t.RGBA32I]:ae.INT,[t.RGBA32UI]:ae.UINT,[t.DEPTH_COMPONENT16]:ae.FLOAT,[t.DEPTH_COMPONENT24]:ae.FLOAT,[t.DEPTH_COMPONENT32F]:ae.FLOAT,[t.DEPTH_STENCIL]:ae.FLOAT,[t.DEPTH24_STENCIL8]:ae.FLOAT,[t.DEPTH32F_STENCIL8]:ae.FLOAT}:e={[t.RGB]:ae.FLOAT,[t.RGBA]:ae.FLOAT,[t.ALPHA]:ae.FLOAT,[t.LUMINANCE]:ae.FLOAT,[t.LUMINANCE_ALPHA]:ae.FLOAT,[t.DEPTH_STENCIL]:ae.FLOAT},e}function DN(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[ve.UNSIGNED_BYTE]:{[ee.RGBA]:t.RGBA8,[ee.RGB]:t.RGB8,[ee.RG]:t.RG8,[ee.RED]:t.R8,[ee.RGBA_INTEGER]:t.RGBA8UI,[ee.RGB_INTEGER]:t.RGB8UI,[ee.RG_INTEGER]:t.RG8UI,[ee.RED_INTEGER]:t.R8UI,[ee.ALPHA]:t.ALPHA,[ee.LUMINANCE]:t.LUMINANCE,[ee.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ve.BYTE]:{[ee.RGBA]:t.RGBA8_SNORM,[ee.RGB]:t.RGB8_SNORM,[ee.RG]:t.RG8_SNORM,[ee.RED]:t.R8_SNORM,[ee.RGBA_INTEGER]:t.RGBA8I,[ee.RGB_INTEGER]:t.RGB8I,[ee.RG_INTEGER]:t.RG8I,[ee.RED_INTEGER]:t.R8I},[ve.UNSIGNED_SHORT]:{[ee.RGBA_INTEGER]:t.RGBA16UI,[ee.RGB_INTEGER]:t.RGB16UI,[ee.RG_INTEGER]:t.RG16UI,[ee.RED_INTEGER]:t.R16UI,[ee.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[ve.SHORT]:{[ee.RGBA_INTEGER]:t.RGBA16I,[ee.RGB_INTEGER]:t.RGB16I,[ee.RG_INTEGER]:t.RG16I,[ee.RED_INTEGER]:t.R16I},[ve.UNSIGNED_INT]:{[ee.RGBA_INTEGER]:t.RGBA32UI,[ee.RGB_INTEGER]:t.RGB32UI,[ee.RG_INTEGER]:t.RG32UI,[ee.RED_INTEGER]:t.R32UI,[ee.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[ve.INT]:{[ee.RGBA_INTEGER]:t.RGBA32I,[ee.RGB_INTEGER]:t.RGB32I,[ee.RG_INTEGER]:t.RG32I,[ee.RED_INTEGER]:t.R32I},[ve.FLOAT]:{[ee.RGBA]:t.RGBA32F,[ee.RGB]:t.RGB32F,[ee.RG]:t.RG32F,[ee.RED]:t.R32F,[ee.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[ve.HALF_FLOAT]:{[ee.RGBA]:t.RGBA16F,[ee.RGB]:t.RGB16F,[ee.RG]:t.RG16F,[ee.RED]:t.R16F},[ve.UNSIGNED_SHORT_5_6_5]:{[ee.RGB]:t.RGB565},[ve.UNSIGNED_SHORT_4_4_4_4]:{[ee.RGBA]:t.RGBA4},[ve.UNSIGNED_SHORT_5_5_5_1]:{[ee.RGBA]:t.RGB5_A1},[ve.UNSIGNED_INT_2_10_10_10_REV]:{[ee.RGBA]:t.RGB10_A2,[ee.RGBA_INTEGER]:t.RGB10_A2UI},[ve.UNSIGNED_INT_10F_11F_11F_REV]:{[ee.RGB]:t.R11F_G11F_B10F},[ve.UNSIGNED_INT_5_9_9_9_REV]:{[ee.RGB]:t.RGB9_E5},[ve.UNSIGNED_INT_24_8]:{[ee.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[ve.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ee.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[ve.UNSIGNED_BYTE]:{[ee.RGBA]:t.RGBA,[ee.RGB]:t.RGB,[ee.ALPHA]:t.ALPHA,[ee.LUMINANCE]:t.LUMINANCE,[ee.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ve.UNSIGNED_SHORT_5_6_5]:{[ee.RGB]:t.RGB},[ve.UNSIGNED_SHORT_4_4_4_4]:{[ee.RGBA]:t.RGBA},[ve.UNSIGNED_SHORT_5_5_5_1]:{[ee.RGBA]:t.RGBA}},e}class CC{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Se,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=DN(e),this.samplerTypes=MN(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new Rg(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Rg(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,r=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==ae.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new Rg(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var n;r.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,r.samplerType=this.samplerTypes[r.internalFormat]??ae.FLOAT,this.webGLVersion===2&&e.type===ve.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var i;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(e,r),(i=e.resource)==null?void 0:i.upload(n,e,r))r.samplerType!==ae.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,l=n.gl;(r.width!==s||r.height!==o||r.dirtyId<0)&&(r.width=s,r.height=o,l.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(e);i!==-1&&Da(this.managedTextures,i,1)}}updateTextureStyle(e){var n;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===ui.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=ki.CLAMP:r.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const n=this.gl;if(r.mipmap&&e.mipmap!==ui.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Ci.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Ci.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Ci.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Ci.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}CC.extension={type:oe.RendererSystem,name:"texture"};me.add(CC);class PC{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();e._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const l=e.buffers[o];l&&(n.buffer.update(l),l._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,l._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,r){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const l=e.buffers[o];if(!l)continue;const h=l._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&s.dispose(l,r))}n&&(r||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}PC.extension={type:oe.RendererSystem,name:"transformFeedback"};me.add(PC);class df{constructor(e){this.renderer=e}init(e){this.screen=new Ae(0,0,e.width,e.height),this.element=e.view||le.ADAPTER.createCanvas(),this.resolution=e.resolution||le.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}df.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},df.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"_view"};me.add(df);le.PREFER_ENV=Io.WEBGL2;le.STRICT_TEXTURE_CACHE=!1;le.RENDER_OPTIONS={...hf.defaultOptions,...uf.defaultOptions,...df.defaultOptions,...cf.defaultOptions};Object.defineProperties(le,{WRAP_MODE:{get(){return Se.defaultOptions.wrapMode},set(t){ke("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Se.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Se.defaultOptions.scaleMode},set(t){ke("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Se.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Se.defaultOptions.mipmap},set(t){ke("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Se.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Se.defaultOptions.anisotropicLevel},set(t){ke("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Se.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return ke("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),ar.defaultResolution},set(t){ar.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return ke("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),ar.defaultMultisample},set(t){ar.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return io.defaultMaxTextures},set(t){ke("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),io.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return io.defaultBatchSize},set(t){ke("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),io.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return io.canUploadSameBuffer},set(t){ke("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),io.canUploadSameBuffer=t}},GC_MODE:{get(){return so.defaultMode},set(t){ke("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),so.defaultMode=t}},GC_MAX_IDLE:{get(){return so.defaultMaxIdle},set(t){ke("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),so.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return so.defaultCheckCountMax},set(t){ke("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),so.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Ii.defaultVertexPrecision},set(t){ke("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ii.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Ii.defaultFragmentPrecision},set(t){ke("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ii.defaultFragmentPrecision=t}}});var ks=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(ks||{});class kg{constructor(e,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=i}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const IC=class Rr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new kg(null,null,1/0),this.deltaMS=1/Rr.targetFPMS,this.elapsedMS=1/Rr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,n=ks.NORMAL){return this._addListener(new kg(e,r,n))}addOnce(e,r,n=ks.NORMAL){return this._addListener(new kg(e,r,n,!0))}_addListener(e){let r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,r){let n=this._head.next;for(;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Rr.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,Rr.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!Rr._shared){const e=Rr._shared=new Rr;e.autoStart=!0,e._protected=!0}return Rr._shared}static get system(){if(!Rr._system){const e=Rr._system=new Rr;e.autoStart=!0,e._protected=!0}return Rr._system}};IC.targetFPMS=.06;let Lt=IC;Object.defineProperties(le,{TARGET_FPMS:{get(){return Lt.targetFPMS},set(t){ke("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Lt.targetFPMS=t}}});class RC{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,ks.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Lt.shared:new Lt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}RC.extension=oe.Application;me.add(RC);const kC=[];me.handleByList(oe.Renderer,kC);function FN(t){for(const e of kC)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var NN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ON=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const BN=NN,MC=ON;class DC{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=Et.HIGH?this.multisample=Et.HIGH:r>=Et.MEDIUM?this.multisample=Et.MEDIUM:r>=Et.LOW?this.multisample=Et.LOW:this.multisample=Et.NONE}destroy(){}}DC.extension={type:oe.RendererSystem,name:"_multisample"};me.add(DC);class LN{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class FC{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);r.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(e,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,r.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const s=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,s)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:n}=this;return e._glBuffers[r]=new LN(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}FC.extension={type:oe.RendererSystem,name:"buffer"};me.add(FC);class NC{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;let i,s,o,l;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,l=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!l){const h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}NC.extension={type:oe.RendererSystem,name:"objectRenderer"};me.add(NC);const bd=class Sy extends kN{constructor(e){super(),this.type=SA.WEBGL,e=Object.assign({},le.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new In({projectionMatrix:new et},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Sy.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in e&&(ke("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Sy.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:aF()}render(e,r){this.objectRenderer.render(e,r)}resize(e,r){this._view.resizeView(e,r)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ke("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ke("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ke("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ke("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){ke("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return ke("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){ke("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return ke("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,r){return this.textureGenerator.generateTexture(e,r)}};bd.extension={type:oe.Renderer,priority:1},bd.__plugins={},bd.__systems={};let g1=bd;me.handleByMap(oe.RendererPlugin,g1.__plugins);me.handleByMap(oe.RendererSystem,g1.__systems);me.add(g1);class OC extends Hu{constructor(e,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Se;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Hu?this.addResourceAt(e[n],n):this.addResourceAt(tC(e[n],r),n))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(e).then(()=>{const{realWidth:r,realHeight:n}=this.items[0];return this.resize(r,n),this.update(),Promise.resolve(this)}),this._load}}class UN extends OC{constructor(e,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Ra.TEXTURE_2D_ARRAY}upload(e,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:l}=e;n.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let h=0;h<i;h++){const c=o[h];s[h]<c.dirtyId&&(s[h]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,h,c.resource.width,c.resource.height,1,r.format,n.type,c.resource.source))}return!0}}class zN extends Li{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const BC=class Jl extends OC{constructor(e,r){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=r||{};if(e&&e.length!==Jl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let l=0;l<Jl.SIDES;l++)this.items[l].target=Ra.TEXTURE_CUBE_MAP_POSITIVE_X+l;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,r),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Ra.TEXTURE_CUBE_MAP}addBaseTextureAt(e,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error(`Index ${r} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Ra.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this}upload(e,r,n){const i=this.itemDirtyIds;for(let s=0;s<Jl.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<r.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Jl.SIDES}};BC.SIDES=6;let GN=BC;class ba extends Li{constructor(e,r){r=r||{};let n,i,s;typeof e=="string"?(n=ba.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.ownsImageBitmap=r.ownsImageBitmap??s,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const n=await le.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===_r.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(e,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return ba._EMPTY=ba._EMPTY??le.ADAPTER.createCanvas(0,0),ba._EMPTY}}const Ty=class Ed extends Li{constructor(e,r){r=r||{},super(le.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Ed.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Li.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=r=>{this._resolve&&(e.onerror=null,this.onError.emit(r))},e.onload=()=>{if(!this._resolve)return;const r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=r*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*r,s=this._overrideHeight||this._overrideWidth/r*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${To()}`,o.getContext("2d").drawImage(e,0,0,r,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const r=Ed.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Ed.SVG_XML.test(e)}};Ty.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Ty.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Ay=Ty;class $N extends Li{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const Cy=class Py extends Li{constructor(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");r.autoLoad!==!1&&n.setAttribute("preload","auto"),r.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),r.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),r.loop===!0&&n.setAttribute("loop",""),r.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Li.crossOrigin(n,i,r.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:l,mime:h}=e[s];if(l=l||e[s],l.startsWith("data:"))h=l.slice(5,l.indexOf(";"));else if(!l.startsWith("blob:")){const c=l.split("?").shift().toLowerCase(),f=c.slice(c.lastIndexOf(".")+1);h=h||Py.MIME_TYPES[f]||`video/${f}`}o.src=l,h&&(o.type=h),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=r.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),r.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const r=Lt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((r,n)=>{this.valid?r(this):(this._resolve=r,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const r=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!r&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Lt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Lt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Lt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Py.TYPES.includes(r)}};Cy.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Cy.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let LC=Cy;py.push(ba,hC,zN,LC,$N,Ay,Yf,GN,UN);class ff{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ae.EMPTY:(e=e||new Ae(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:n,b:i,c:s,d:o,tx:l,ty:h}=e,c=n*r.x+s*r.y+l,f=i*r.x+o*r.y+h;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)}addQuad(e){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],l=e[1];r=o<r?o:r,n=l<n?l:n,i=o>i?o:i,s=l>s?l:s,o=e[2],l=e[3],r=o<r?o:r,n=l<n?l:n,i=o>i?o:i,s=l>s?l:s,o=e[4],l=e[5],r=o<r?o:r,n=l<n?l:n,i=o>i?o:i,s=l>s?l:s,o=e[6],l=e[7],r=o<r?o:r,n=l<n?l:n,i=o>i?o:i,s=l>s?l:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,r,n,i,s){this.addFrameMatrix(e.worldTransform,r,n,i,s)}addFrameMatrix(e,r,n,i,s){const o=e.a,l=e.b,h=e.c,c=e.d,f=e.tx,p=e.ty;let m=this.minX,v=this.minY,_=this.maxX,b=this.maxY,T=o*r+h*n+f,x=l*r+c*n+p;m=T<m?T:m,v=x<v?x:v,_=T>_?T:_,b=x>b?x:b,T=o*i+h*n+f,x=l*i+c*n+p,m=T<m?T:m,v=x<v?x:v,_=T>_?T:_,b=x>b?x:b,T=o*r+h*s+f,x=l*r+c*s+p,m=T<m?T:m,v=x<v?x:v,_=T>_?T:_,b=x>b?x:b,T=o*i+h*s+f,x=l*i+c*s+p,m=T<m?T:m,v=x<v?x:v,_=T>_?T:_,b=x>b?x:b,this.minX=m,this.minY=v,this.maxX=_,this.maxY=b}addVertexData(e,r,n){let i=this.minX,s=this.minY,o=this.maxX,l=this.maxY;for(let h=r;h<n;h+=2){const c=e[h],f=e[h+1];i=c<i?c:i,s=f<s?f:s,o=c>o?c:o,l=f>l?f:l}this.minX=i,this.minY=s,this.maxX=o,this.maxY=l}addVertices(e,r,n,i){this.addVerticesMatrix(e.worldTransform,r,n,i)}addVerticesMatrix(e,r,n,i,s=0,o=s){const l=e.a,h=e.b,c=e.c,f=e.d,p=e.tx,m=e.ty;let v=this.minX,_=this.minY,b=this.maxX,T=this.maxY;for(let x=n;x<i;x+=2){const E=r[x],w=r[x+1],A=l*E+c*w+p,P=f*w+h*E+m;v=Math.min(v,A-s),b=Math.max(b,A+s),_=Math.min(_,P-o),T=Math.max(T,P+o)}this.minX=v,this.minY=_,this.maxX=b,this.maxY=T}addBounds(e){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,r){const n=e.minX>r.minX?e.minX:r.minX,i=e.minY>r.minY?e.minY:r.minY,s=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=s&&i<=o){const l=this.minX,h=this.minY,c=this.maxX,f=this.maxY;this.minX=n<l?n:l,this.minY=i<h?i:h,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const n=e.minX>r.x?e.minX:r.x,i=e.minY>r.y?e.minY:r.y,s=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=s&&i<=o){const l=this.minX,h=this.minY,c=this.maxX,f=this.maxY;this.minX=n<l?n:l,this.minY=i<h?i:h,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,n,i,s,o){e-=s,r-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class st extends hh{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Zf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ff,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(st.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Ae),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ae),e=this._localBoundsRect),this._localBounds||(this._localBounds=new ff);const r=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,n,i){return r&&(e=r.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,n=1,i=1,s=0,o=0,l=0,h=0,c=0){return this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=l,this.pivot.x=h,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new HN),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*NF}set angle(e){this.transform.rotation=e*OF}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class HN extends st{constructor(){super(...arguments),this.sortDirty=null}}st.prototype.displayObjectUpdateTransform=st.prototype.updateTransform;const jN=new et;function VN(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const UC=class Iy extends st{constructor(){super(),this.children=[],this.sortableChildren=Iy.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.addChild(e[r]);else{const r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]}addChildAt(e,r){if(r<0||r>this.children.length)throw new Error(`${e}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e}swapChildren(e,r){if(e===r)return;const n=this.getChildIndex(e),i=this.getChildIndex(r);this.children[n]=r,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){const r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(e,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Da(this.children,n,1),this.children.splice(r,0,e),this.onChildrenChange(r)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.removeChild(e[r]);else{const r=e[0],n=this.children.indexOf(r);if(n===-1)return null;r.parent=null,r.transform._parentID=-1,Da(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n)}return e[0]}removeChildAt(e){const r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,Da(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r}removeChildren(e=0,r=this.children.length){const n=e,i=r,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let l=0;l<o.length;++l)o[l].parent=null,o[l].transform&&(o[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let l=0;l<o.length;++l)o[l].emit("removed",this),this.emit("childRemoved",o[l],this,l);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let r=0,n=this.children.length;r<n;++r){const i=this.children[r];i._lastSortedIndex=r,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(VN),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,r=!1){const n=super.getLocalBounds(e);if(!r)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const r=e.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==Iy.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=jN.copyFrom(i),i.prepend(s)):i=s),n&&r.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,l=this.children.length;o<l;++o){const h=this.children[o],c=h.cullable;h.cullable=c||!this.cullArea,h.render(e),h.cullable=c}}render(e){var r;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(r=this.filters)!=null&&r.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){var s,o,l;const r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let h=0;h<r.length;h++)r[h].enabled&&this._enabledFilters.push(r[h])}const i=r&&((s=this._enabledFilters)==null?void 0:s.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Ct.NONE));if(i&&e.batch.flush(),r&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let h=0,c=this.children.length;h<c;++h)this.children[h].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),r&&((l=this._enabledFilters)!=null&&l.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const r=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(r)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e}};UC.defaultSortableChildren=!1;let ur=UC;ur.prototype.containerUpdateTransform=ur.prototype.updateTransform;Object.defineProperties(le,{SORTABLE_CHILDREN:{get(){return ur.defaultSortableChildren},set(t){ke("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ur.defaultSortableChildren=t}}});var ep=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(ep||{});const zl=new Fe,WN=new Uint16Array([0,1,2,0,2,3]);class pi extends ur{constructor(e){super(),this._anchor=new ni(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Qe(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=be.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||ne.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=WN,this.pluginName="batch",this.isSprite=!0,this._roundPixels=le.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=fs(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=fs(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,l=r.tx,h=r.ty,c=this.vertexData,f=e.trim,p=e.orig,m=this._anchor;let v=0,_=0,b=0,T=0;if(f?(_=f.x-m._x*p.width,v=_+f.width,T=f.y-m._y*p.height,b=T+f.height):(_=-m._x*p.width,v=_+p.width,T=-m._y*p.height,b=T+p.height),c[0]=n*_+s*T+l,c[1]=o*T+i*_+h,c[2]=n*v+s*T+l,c[3]=o*T+i*v+h,c[4]=n*v+s*b+l,c[5]=o*b+i*v+h,c[6]=n*_+s*b+l,c[7]=o*b+i*_+h,this._roundPixels){const x=le.RESOLUTION;for(let E=0;E<c.length;++E)c[E]=Math.round(c[E]*x)/x}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,l=s.b,h=s.c,c=s.d,f=s.tx,p=s.ty,m=-i._x*n.width,v=m+n.width,_=-i._y*n.height,b=_+n.height;if(r[0]=o*m+h*_+f,r[1]=c*_+l*m+p,r[2]=o*v+h*_+f,r[3]=c*_+l*v+p,r[4]=o*v+h*b+f,r[5]=c*b+l*v+p,r[6]=o*m+h*b+f,r[7]=c*b+l*m+p,this._roundPixels){const T=le.RESOLUTION;for(let x=0;x<r.length;++x)r[x]=Math.round(r[x]*T)/T}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new ff),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ae),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,zl);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return zl.x>=i&&zl.x<i+r&&(s=-n*this.anchor.y,zl.y>=s&&zl.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const r=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,r){const n=e instanceof ne?e:ne.from(e,r);return new pi(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=fs(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=fs(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ne.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Uc={willReadFrequently:!0},Yn=class ye{static get experimentalLetterSpacingSupported(){let e=ye._experimentalLetterSpacingSupported;if(e!==void 0){const r=le.ADAPTER.getCanvasRenderingContext2D().prototype;e=ye._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,n,i,s,o,l,h,c){this.text=e,this.style=r,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=l,this.maxLineWidth=h,this.fontProperties=c}static measureText(e,r,n,i=ye._canvas){n=n??r.wordWrap;const s=r.toFontString(),o=ye.measureFont(s);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const l=i.getContext("2d",Uc);l.font=s;const h=(n?ye.wordWrap(e,r,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(h.length);let f=0;for(let _=0;_<h.length;_++){const b=ye._measureText(h[_],r.letterSpacing,l);c[_]=b,f=Math.max(f,b)}let p=f+r.strokeThickness;r.dropShadow&&(p+=r.dropShadowDistance);const m=r.lineHeight||o.fontSize+r.strokeThickness;let v=Math.max(m,o.fontSize+r.strokeThickness*2)+r.leading+(h.length-1)*(m+r.leading);return r.dropShadow&&(v+=r.dropShadowDistance),new ye(e,r,p,v,h,c,m+r.leading,f,o)}static _measureText(e,r,n){let i=!1;ye.experimentalLetterSpacingSupported&&(ye.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=r:s+=(ye.graphemeSegmenter(e).length-1)*r),s}static wordWrap(e,r,n=ye._canvas){const i=n.getContext("2d",Uc);let s=0,o="",l="";const h=Object.create(null),{letterSpacing:c,whiteSpace:f}=r,p=ye.collapseSpaces(f),m=ye.collapseNewlines(f);let v=!p;const _=r.wordWrapWidth+c,b=ye.tokenize(e);for(let T=0;T<b.length;T++){let x=b[T];if(ye.isNewline(x)){if(!m){l+=ye.addLine(o),v=!p,o="",s=0;continue}x=" "}if(p){const w=ye.isBreakingSpace(x),A=ye.isBreakingSpace(o[o.length-1]);if(w&&A)continue}const E=ye.getFromCache(x,c,h,i);if(E>_)if(o!==""&&(l+=ye.addLine(o),o="",s=0),ye.canBreakWords(x,r.breakWords)){const w=ye.wordWrapSplit(x);for(let A=0;A<w.length;A++){let P=w[A],D=P,R=1;for(;w[A+R];){const L=w[A+R];if(!ye.canBreakChars(D,L,x,A,r.breakWords))P+=L;else break;D=L,R++}A+=R-1;const k=ye.getFromCache(P,c,h,i);k+s>_&&(l+=ye.addLine(o),v=!1,o="",s=0),o+=P,s+=k}}else{o.length>0&&(l+=ye.addLine(o),o="",s=0);const w=T===b.length-1;l+=ye.addLine(x,!w),v=!1,o="",s=0}else E+s>_&&(v=!1,l+=ye.addLine(o),o="",s=0),(o.length>0||!ye.isBreakingSpace(x)||v)&&(o+=x,s+=E)}return l+=ye.addLine(o,!1),l}static addLine(e,r=!0){return e=ye.trimRight(e),e=r?`${e}
`:e,e}static getFromCache(e,r,n,i){let s=n[e];return typeof s!="number"&&(s=ye._measureText(e,r,i)+r,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const n=e[r];if(!ye.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ye._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:ye._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const r=[];let n="";if(typeof e!="string")return r;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(ye.isBreakingSpace(s,o)||ye.isNewline(s)){n!==""&&(r.push(n),n=""),r.push(s);continue}n+=s}return n!==""&&r.push(n),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,n,i,s){return!0}static wordWrapSplit(e){return ye.graphemeSegmenter(e)}static measureFont(e){if(ye._fonts[e])return ye._fonts[e];const r={ascent:0,descent:0,fontSize:0},n=ye._canvas,i=ye._context;i.font=e;const s=ye.METRICS_STRING+ye.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let l=Math.ceil(i.measureText(ye.BASELINE_SYMBOL).width);const h=Math.ceil(ye.HEIGHT_MULTIPLIER*l);if(l=l*ye.BASELINE_MULTIPLIER|0,o===0||h===0)return ye._fonts[e]=r,r;n.width=o,n.height=h,i.fillStyle="#f00",i.fillRect(0,0,o,h),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,l);const c=i.getImageData(0,0,o,h).data,f=c.length,p=o*4;let m=0,v=0,_=!1;for(m=0;m<l;++m){for(let b=0;b<p;b+=4)if(c[v+b]!==255){_=!0;break}if(!_)v+=p;else break}for(r.ascent=l-m,v=f-p,_=!1,m=h;m>l;--m){for(let b=0;b<p;b+=4)if(c[v+b]!==255){_=!0;break}if(!_)v-=p;else break}return r.descent=m-l,r.fontSize=r.ascent+r.descent,ye._fonts[e]=r,r}static clearMetrics(e=""){e?delete ye._fonts[e]:ye._fonts={}}static get _canvas(){var e;if(!ye.__canvas){let r;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",Uc))!=null&&e.measureText)return ye.__canvas=n,n;r=le.ADAPTER.createCanvas()}catch{r=le.ADAPTER.createCanvas()}r.width=r.height=10,ye.__canvas=r}return ye.__canvas}static get _context(){return ye.__context||(ye.__context=ye._canvas.getContext("2d",Uc)),ye.__context}};Yn.METRICS_STRING="|ÉqÅ",Yn.BASELINE_SYMBOL="M",Yn.BASELINE_MULTIPLIER=1.4,Yn.HEIGHT_MULTIPLIER=2,Yn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})(),Yn.experimentalLetterSpacing=!1,Yn._fonts={},Yn._newlines=[10,13],Yn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let os=Yn;const XN=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],zC=class eu{constructor(e){this.styleID=0,this.reset(),Dg(this,e,e)}clone(){const e={};return Dg(e,this,eu.defaultStyle),new eu(e)}reset(){Dg(this,eu.defaultStyle,eu.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const r=Mg(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const r=Mg(e);this._fill!==r&&(this._fill=r,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){YN(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const r=Mg(e);this._stroke!==r&&(this._stroke=r,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(let n=r.length-1;n>=0;n--){let i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!XN.includes(i)&&(i=`"${i}"`),r[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${r.join(",")}`}};zC.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ep.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Er=zC;function Mg(t){const e=Qe.shared,r=n=>{const i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(t)?t.map(r):r(t)}function YN(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Dg(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}const QN={texture:!0,children:!1,baseTexture:!0},GC=class Ry extends pi{constructor(e,r,n){let i=!1;n||(n=le.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=ne.from(n);s.orig=new Ae,s.trim=new Ae,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=Ry.defaultResolution??le.RESOLUTION,this._autoResolution=Ry.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=r,this.localStyleID=-1}static get experimentalLetterSpacing(){return os.experimentalLetterSpacing}static set experimentalLetterSpacing(e){ke("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),os.experimentalLetterSpacing=e}updateText(e){const r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,i=os.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,l=i.lines,h=i.lineHeight,c=i.lineWidths,f=i.maxLineWidth,p=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;let m,v;const _=r.dropShadow?2:1;for(let b=0;b<_;++b){const T=r.dropShadow&&b===0,x=T?Math.ceil(Math.max(1,o)+r.padding*2):0,E=x*this._resolution;if(T){n.fillStyle="black",n.strokeStyle="black";const A=r.dropShadowColor,P=r.dropShadowBlur*this._resolution,D=r.dropShadowDistance*this._resolution;n.shadowColor=Qe.shared.setValue(A).setAlpha(r.dropShadowAlpha).toRgbaString(),n.shadowBlur=P,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*D,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*D+E}else n.fillStyle=this._generateFillStyle(r,l,i),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let w=(h-p.fontSize)/2;h-p.fontSize<0&&(w=0);for(let A=0;A<l.length;A++)m=r.strokeThickness/2,v=r.strokeThickness/2+A*h+p.ascent+w,r.align==="right"?m+=f-c[A]:r.align==="center"&&(m+=(f-c[A])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(l[A],m+r.padding,v+r.padding-x,!0),r.fill&&this.drawLetterSpacing(l[A],m+r.padding,v+r.padding-x)}this.updateTexture()}drawLetterSpacing(e,r,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(os.experimentalLetterSpacingSupported&&(os.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,r,n):this.context.fillText(e,r,n);return}let l=r;const h=os.graphemeSegmenter(e);let c=this.context.measureText(e).width,f=0;for(let p=0;p<h.length;++p){const m=h[p];i?this.context.strokeText(m,l,n):this.context.fillText(m,l,n);let v="";for(let _=p+1;_<h.length;++_)v+=h[_];f=this.context.measureText(v).width,l+=c-f+s,c=f}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=SF(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const r=this._texture,n=this._style,i=n.trim?0:n.padding,s=r.baseTexture;r.trim.width=r._frame.width=e.width/this._resolution,r.trim.height=r._frame.height=e.height/this._resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-i*2,r.orig.height=r._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),r.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,r){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,r)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,r,n){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,h=this.canvas.width/this._resolution-o-l*2,c=this.canvas.height/this._resolution-o-l*2,f=i.slice(),p=e.fillGradientStops.slice();if(!p.length){const m=f.length+1;for(let v=1;v<m;++v)p.push(v/m)}if(f.unshift(i[0]),p.unshift(0),f.push(i[i.length-1]),p.push(1),e.fillGradientType===ep.LINEAR_VERTICAL){s=this.context.createLinearGradient(h/2,l,h/2,c+l);const m=n.fontProperties.fontSize+e.strokeThickness;for(let v=0;v<r.length;v++){const _=n.lineHeight*(v-1)+m,b=n.lineHeight*v;let T=b;v>0&&_>b&&(T=(b+_)/2);const x=b+m,E=n.lineHeight*(v+1);let w=x;v+1<r.length&&E<x&&(w=(x+E)/2);const A=(w-T)/c;for(let P=0;P<f.length;P++){let D=0;typeof p[P]=="number"?D=p[P]:D=P/f.length;let R=Math.min(1,Math.max(0,T/c+D*A));R=Number(R.toFixed(5)),s.addColorStop(R,f[P])}}}else{s=this.context.createLinearGradient(l,c/2,h+l,c/2);const m=f.length+1;let v=1;for(let _=0;_<f.length;_++){let b;typeof p[_]=="number"?b=p[_]:b=v/m,s.addColorStop(b,f[_]),v++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},QN,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const r=fs(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const r=fs(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Er?this._style=e:this._style=new Er(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};GC.defaultAutoResolution=!0;let y1=GC;class pf{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Sd{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],l=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(const c in l){const f=l[c].split("="),p=f[0],m=f[1].replace(/"/gm,""),v=parseFloat(m),_=isNaN(v)?m:v;h[p]=_}n[o].push(h)}const i=new pf;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class ky{static test(e){const r=e;return typeof e!="string"&&"getElementsByTagName"in e&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new pf,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),l=e.getElementsByTagName("kerning"),h=e.getElementsByTagName("distanceField");for(let c=0;c<n.length;c++)r.info.push({face:n[c].getAttribute("face"),size:parseInt(n[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)r.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)r.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const f=o[c];r.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(let c=0;c<l.length;c++)r.kerning.push({first:parseInt(l[c].getAttribute("first"),10),second:parseInt(l[c].getAttribute("second"),10),amount:parseInt(l[c].getAttribute("amount"),10)});for(let c=0;c<h.length;c++)r.distanceField.push({fieldType:h[c].getAttribute("fieldType"),distanceRange:parseInt(h[c].getAttribute("distanceRange"),10)});return r}}class My{static test(e){return typeof e=="string"&&e.includes("<font>")?ky.test(le.ADAPTER.parseXML(e)):!1}static parse(e){return ky.parse(le.ADAPTER.parseXML(e))}}const Fg=[Sd,ky,My];function qN(t){for(let e=0;e<Fg.length;e++)if(Fg[e].test(t))return Fg[e];return null}function KN(t,e,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let l;const h=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,f=t.width/n-h-c*2,p=t.height/n-h-c*2,m=o.slice(),v=r.fillGradientStops.slice();if(!v.length){const _=m.length+1;for(let b=1;b<_;++b)v.push(b/_)}if(m.unshift(o[0]),v.unshift(0),m.push(o[o.length-1]),v.push(1),r.fillGradientType===ep.LINEAR_VERTICAL){l=e.createLinearGradient(f/2,c,f/2,p+c);let _=0;const b=(s.fontProperties.fontSize+r.strokeThickness)/p;for(let T=0;T<i.length;T++){const x=s.lineHeight*T;for(let E=0;E<m.length;E++){let w=0;typeof v[E]=="number"?w=v[E]:w=E/m.length;const A=x/p+w*b;let P=Math.max(_,A);P=Math.min(P,1),l.addColorStop(P,m[E]),_=P}}}else{l=e.createLinearGradient(c,p/2,f+c,p/2);const _=m.length+1;let b=1;for(let T=0;T<m.length;T++){let x;typeof v[T]=="number"?x=v[T]:x=b/_,l.addColorStop(x,m[T]),b++}}return l}function ZN(t,e,r,n,i,s,o){const l=r.text,h=r.fontProperties;e.translate(n,i),e.scale(s,s);const c=o.strokeThickness/2,f=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=KN(t,e,o,s,[l],r),e.strokeStyle=o.stroke,o.dropShadow){const p=o.dropShadowColor,m=o.dropShadowBlur*s,v=o.dropShadowDistance*s;e.shadowColor=Qe.shared.setValue(p).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=m,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*v,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*v}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(l,c,f+r.lineHeight-h.descent),o.fill&&e.fillText(l,c,f+r.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Td(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function $C(t){return Array.from?Array.from(t):t.split("")}function JN(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const i=t[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let l=s,h=o;l<=h;l++)e.push(String.fromCharCode(l))}else e.push(...$C(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const ts=class Qn{constructor(e,r,n){var f;const[i]=e.info,[s]=e.common,[o]=e.page,[l]=e.distanceField,h=Bi(o.file),c={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/h,this.chars={},this.pageTextures=c;for(let p=0;p<e.page.length;p++){const{id:m,file:v}=e.page[p];c[m]=r instanceof Array?r[p]:r[v],l!=null&&l.fieldType&&l.fieldType!=="none"&&(c[m].baseTexture.alphaMode=_r.NO_PREMULTIPLIED_ALPHA,c[m].baseTexture.mipmap=ui.OFF)}for(let p=0;p<e.char.length;p++){const{id:m,page:v}=e.char[p];let{x:_,y:b,width:T,height:x,xoffset:E,yoffset:w,xadvance:A}=e.char[p];_/=h,b/=h,T/=h,x/=h,E/=h,w/=h,A/=h;const P=new Ae(_+c[v].frame.x/h,b+c[v].frame.y/h,T,x);this.chars[m]={xOffset:E,yOffset:w,xAdvance:A,kerning:{},texture:new ne(c[v].baseTexture,P),page:v}}for(let p=0;p<e.kerning.length;p++){let{first:m,second:v,amount:_}=e.kerning[p];m/=h,v/=h,_/=h,this.chars[v]&&(this.chars[v].kerning[m]=_)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=((f=l==null?void 0:l.fieldType)==null?void 0:f.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,r,n){let i;if(e instanceof pf)i=e;else{const o=qN(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}r instanceof ne&&(r=[r]);const s=new Qn(i,r,n);return Qn.available[s.font]=s,s}static uninstall(e){const r=Qn.available[e];if(!r)throw new Error(`No font found named '${e}'`);r.destroy(),delete Qn.available[e]}static from(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:l,textureHeight:h,...c}=Object.assign({},Qn.defaultOptions,n),f=JN(i),p=r instanceof Er?r:new Er(r),m=l,v=new pf;v.info[0]={face:p.fontFamily,size:p.fontSize},v.common[0]={lineHeight:p.fontSize};let _=0,b=0,T,x,E,w=0;const A=[];for(let D=0;D<f.length;D++){T||(T=le.ADAPTER.createCanvas(),T.width=l,T.height=h,x=T.getContext("2d"),E=new Se(T,{resolution:o,...c}),A.push(new ne(E)),v.page.push({id:A.length-1,file:""}));const R=f[D],k=os.measureText(R,p,!1,T),L=k.width,z=Math.ceil(k.height),re=Math.ceil((p.fontStyle==="italic"?2:1)*L);if(b>=h-z*o){if(b===0)throw new Error(`[BitmapFont] textureHeight ${h}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${R}')`);--D,T=null,x=null,E=null,b=0,_=0,w=0;continue}if(w=Math.max(z+k.fontProperties.descent,w),re*o+_>=m){if(_===0)throw new Error(`[BitmapFont] textureWidth ${l}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${R}')`);--D,b+=w*o,b=Math.ceil(b),_=0,w=0;continue}ZN(T,x,k,_,b,o,p);const Z=Td(k.text);v.char.push({id:Z,page:A.length-1,x:_/o,y:b/o,width:re,height:z,xoffset:0,yoffset:0,xadvance:L-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0)}),_+=(re+2*s)*o,_=Math.ceil(_)}if(!(n!=null&&n.skipKerning))for(let D=0,R=f.length;D<R;D++){const k=f[D];for(let L=0;L<R;L++){const z=f[L],re=x.measureText(k).width,Z=x.measureText(z).width,B=x.measureText(k+z).width-(re+Z);B&&v.kerning.push({first:Td(k),second:Td(z),amount:B})}}const P=new Qn(v,A,!0);return Qn.available[e]!==void 0&&Qn.uninstall(e),Qn.available[e]=P,P}};ts.ALPHA=[["a","z"],["A","Z"]," "],ts.NUMERIC=[["0","9"]],ts.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ts.ASCII=[[" ","~"]],ts.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ts.ALPHANUMERIC},ts.available={};let rs=ts;class eO{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Ng=new Fe,Qb=new yo,HC=class jC extends ur{constructor(e,r,n,i=En.TRIANGLES){super(),this.geometry=e,this.shader=r,this.state=n||fi.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=le.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===En.TRIANGLES&&r.length<jC.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,l=i.c,h=i.d,c=i.tx,f=i.ty,p=this.vertexData;for(let m=0;m<p.length/2;m++){const v=r[m*2],_=r[m*2+1];p[m*2]=s*v+l*_+c,p[m*2+1]=o*v+h*_+f}if(this._roundPixels){const m=le.RESOLUTION;for(let v=0;v<p.length;++v)p[v]=Math.round(p[v]*m)/m}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new eO(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Ng);const r=this.geometry.getBuffer("aVertexPosition").data,n=Qb.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let l=0;l+2<s;l+=o){const h=i[l]*2,c=i[l+1]*2,f=i[l+2]*2;if(n[0]=r[h],n[1]=r[h+1],n[2]=r[c],n[3]=r[c+1],n[4]=r[f],n[5]=r[f+1],Qb.contains(Ng.x,Ng.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};HC.BATCHABLE_SIZE=100;let ju=HC;class tp extends Rs{constructor(e,r,n){super();const i=new _t(e),s=new _t(r,!0),o=new _t(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,ve.FLOAT).addAttribute("aTextureCoord",s,2,!1,ve.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var tO=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,rO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Vu extends li{constructor(e,r){const n={uSampler:e,alpha:1,uTextureMatrix:et.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||Ii.from(rO,tO),n),this._colorDirty=!1,this.uvMatrix=new m1(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new Qe(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Qe.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var nO=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,iO=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const qb=[],Kb=[],Zb=[],VC=class WC extends ur{constructor(e,r={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:l,fontSize:h}=Object.assign({},WC.styleDefaults,r);if(!rs.available[l])throw new Error(`Missing BitmapFont "${l}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new Qe(i),this._font=void 0,this._fontName=l,this._fontSize=h,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new ni(()=>{this.dirty=!0},this,0,0),this._roundPixels=le.ROUND_PIXELS,this.dirty=!0,this._resolution=le.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var re;const e=rs.available[this._fontName],r=this.fontSize,n=r/e.size,i=new Fe,s=[],o=[],l=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=$C(h),f=this._maxWidth*e.size/r,p=e.distanceFieldType==="none"?qb:Kb;let m=null,v=0,_=0,b=0,T=-1,x=0,E=0,w=0,A=0;for(let Z=0;Z<c.length;Z++){const B=c[Z],Q=Td(B);if(/(?:\s)/.test(B)&&(T=Z,x=v,A++),B==="\r"||B===`
`){o.push(v),l.push(-1),_=Math.max(_,v),++b,++E,i.x=0,i.y+=e.lineHeight,m=null,A=0;continue}const ue=e.chars[Q];if(!ue)continue;m&&ue.kerning[m]&&(i.x+=ue.kerning[m]);const _e=Zb.pop()||{texture:ne.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Fe};_e.texture=ue.texture,_e.line=b,_e.charCode=Q,_e.position.x=Math.round(i.x+ue.xOffset+this._letterSpacing/2),_e.position.y=Math.round(i.y+ue.yOffset),_e.prevSpaces=A,s.push(_e),v=_e.position.x+Math.max(ue.xAdvance-ue.xOffset,ue.texture.orig.width),i.x+=ue.xAdvance+this._letterSpacing,w=Math.max(w,ue.yOffset+ue.texture.height),m=Q,T!==-1&&f>0&&i.x>f&&(++E,Da(s,1+T-E,1+Z-T),Z=T,T=-1,o.push(x),l.push(s.length>0?s[s.length-1].prevSpaces:0),_=Math.max(_,x),b++,i.x=0,i.y+=e.lineHeight,m=null,A=0)}const P=c[c.length-1];P!=="\r"&&P!==`
`&&(/(?:\s)/.test(P)&&(v=x),o.push(v),_=Math.max(_,v),l.push(-1));const D=[];for(let Z=0;Z<=b;Z++){let B=0;this._align==="right"?B=_-o[Z]:this._align==="center"?B=(_-o[Z])/2:this._align==="justify"&&(B=l[Z]<0?0:(_-o[Z])/l[Z]),D.push(B)}const R=s.length,k={},L=[],z=this._activePagesMeshData;p.push(...z);for(let Z=0;Z<R;Z++){const B=s[Z].texture,Q=B.baseTexture.uid;if(!k[Q]){let ue=p.pop();if(!ue){const de=new tp;let M,j;e.distanceFieldType==="none"?(M=new Vu(ne.EMPTY),j=be.NORMAL):(M=new Vu(ne.EMPTY,{program:Ii.from(iO,nO),uniforms:{uFWidth:0}}),j=be.NORMAL_NPM);const N=new ju(de,M);N.blendMode=j,ue={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:N,vertices:null,uvs:null,indices:null}}ue.index=0,ue.indexCount=0,ue.vertexCount=0,ue.uvsCount=0,ue.total=0;const{_textureCache:_e}=this;_e[Q]=_e[Q]||new ne(B.baseTexture),ue.mesh.texture=_e[Q],ue.mesh.tint=this._tintColor.value,L.push(ue),k[Q]=ue}k[Q].total++}for(let Z=0;Z<z.length;Z++)L.includes(z[Z])||this.removeChild(z[Z].mesh);for(let Z=0;Z<L.length;Z++)L[Z].mesh.parent!==this&&this.addChild(L[Z].mesh);this._activePagesMeshData=L;for(const Z in k){const B=k[Z],Q=B.total;if(!(((re=B.indices)==null?void 0:re.length)>6*Q)||B.vertices.length<ju.BATCHABLE_SIZE*2)B.vertices=new Float32Array(4*2*Q),B.uvs=new Float32Array(4*2*Q),B.indices=new Uint16Array(6*Q);else{const ue=B.total,_e=B.vertices;for(let de=ue*4*2;de<_e.length;de++)_e[de]=0}B.mesh.size=6*Q}for(let Z=0;Z<R;Z++){const B=s[Z];let Q=B.position.x+D[B.line]*(this._align==="justify"?B.prevSpaces:1);this._roundPixels&&(Q=Math.round(Q));const ue=Q*n,_e=B.position.y*n,de=B.texture,M=k[de.baseTexture.uid],j=de.frame,N=de._uvs,$=M.index++;M.indices[$*6+0]=0+$*4,M.indices[$*6+1]=1+$*4,M.indices[$*6+2]=2+$*4,M.indices[$*6+3]=0+$*4,M.indices[$*6+4]=2+$*4,M.indices[$*6+5]=3+$*4,M.vertices[$*8+0]=ue,M.vertices[$*8+1]=_e,M.vertices[$*8+2]=ue+j.width*n,M.vertices[$*8+3]=_e,M.vertices[$*8+4]=ue+j.width*n,M.vertices[$*8+5]=_e+j.height*n,M.vertices[$*8+6]=ue,M.vertices[$*8+7]=_e+j.height*n,M.uvs[$*8+0]=N.x0,M.uvs[$*8+1]=N.y0,M.uvs[$*8+2]=N.x1,M.uvs[$*8+3]=N.y1,M.uvs[$*8+4]=N.x2,M.uvs[$*8+5]=N.y2,M.uvs[$*8+6]=N.x3,M.uvs[$*8+7]=N.y3}this._textWidth=_*n,this._textHeight=(i.y+e.lineHeight)*n;for(const Z in k){const B=k[Z];if(this.anchor.x!==0||this.anchor.y!==0){let de=0;const M=this._textWidth*this.anchor.x,j=this._textHeight*this.anchor.y;for(let N=0;N<B.total;N++)B.vertices[de++]-=M,B.vertices[de++]-=j,B.vertices[de++]-=M,B.vertices[de++]-=j,B.vertices[de++]-=M,B.vertices[de++]-=j,B.vertices[de++]-=M,B.vertices[de++]-=j}this._maxLineHeight=w*n;const Q=B.mesh.geometry.getBuffer("aVertexPosition"),ue=B.mesh.geometry.getBuffer("aTextureCoord"),_e=B.mesh.geometry.getIndex();Q.data=B.vertices,ue.data=B.uvs,_e.data=B.indices,Q.update(),ue.update(),_e.update()}for(let Z=0;Z<s.length;Z++)Zb.push(s[Z]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:r,distanceFieldType:n,size:i}=rs.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:l,d:h}=this.worldTransform,c=Math.sqrt(s*s+o*o),f=Math.sqrt(l*l+h*h),p=(Math.abs(c)+Math.abs(f))/2,m=this.fontSize/i,v=e._view.resolution;for(const _ of this._activePagesMeshData)_.mesh.shader.uniforms.uFWidth=p*r*m*v}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=rs.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!rs.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??rs.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:r}=this,n=rs.available[this._fontName].distanceFieldType==="none"?qb:Kb;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>r[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=ne.EMPTY});for(const i in r)r[i].destroy(),delete r[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};VC.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let sO=VC;const Jb={loader:oe.LoadParser,resolver:oe.ResolveParser,cache:oe.CacheParser,detection:oe.DetectionParser};me.handle(oe.Asset,t=>{const e=t.ref;Object.entries(Jb).filter(([r])=>!!e[r]).forEach(([r,n])=>me.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(Jb).filter(r=>!!e[r]).forEach(r=>me.remove(e[r]))});class oO{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function sl(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Os(t,e){const r=t.split("?")[0],n=zt.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const bn=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||r?e(n):n):t),Dy=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};function XC(t,e,r,n,i){const s=e[r];for(let o=0;o<s.length;o++){const l=s[o];r<e.length-1?XC(t.replace(n[r],l),e,r+1,n,i):i.push(t.replace(n[r],l))}}function aO(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),XC(t,i,0,r,n)}else n.push(t);return n}const mf=t=>!Array.isArray(t);class lO{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=bn(e);let i;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.test(r)){i=h.getCacheableAssets(n,r);break}}i||(i={},n.forEach(l=>{i[l]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(l=>{this._cacheMap.set(l,o)}),s.forEach(l=>{this._cache.has(l)&&this._cache.get(l)!==r&&console.warn("[Cache] already has key:",l),this._cache.set(l,i[l])}),r instanceof ne){const l=r;n.forEach(h=>{l.baseTexture!==ne.EMPTY.baseTexture&&Se.addToCache(l.baseTexture,h),ne.addToCache(l,h)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(n=>{this._cache.delete(n)}),r.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const ao=new lO;class uO{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,l;let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!s){for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];if(c.load&&((o=c.test)!=null&&o.call(c,e,r,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,r,this),n.parser=s;for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];c.parse&&c.parse&&await((l=c.testParse)==null?void 0:l.call(c,i,r,this))&&(i=await c.parse(i,r,this)||i,n.parser=c)}return i})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=mf(e),o=bn(e,c=>({alias:[c],src:c})),l=o.length,h=o.map(async c=>{const f=zt.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,c)),i[c.src]=await this.promiseCache[f].promise,r&&r(++n/l)}catch(p){throw delete this.promiseCache[f],delete i[c.src],new Error(`[Loader.load] Failed to load ${f}.
${p}`)}});return await Promise.all(h),s?i[o[0].src]:i}async unload(e){const r=bn(e,n=>({alias:[n],src:n})).map(async n=>{var o,l;const i=zt.toAbsolute(n.src),s=this.promiseCache[i];if(s){const h=await s.promise;delete this.promiseCache[i],(l=(o=s.parser)==null?void 0:o.unload)==null||l.call(o,h,n,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var Mn=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Mn||{});const hO=".json",cO="application/json",dO={extension:{type:oe.LoadParser,priority:Mn.Low},name:"loadJson",test(t){return sl(t,cO)||Os(t,hO)},async load(t){return await(await le.ADAPTER.fetch(t)).json()}};me.add(dO);const fO=".txt",pO="text/plain",mO={name:"loadTxt",extension:{type:oe.LoadParser,priority:Mn.Low},test(t){return sl(t,pO)||Os(t,fO)},async load(t){return await(await le.ADAPTER.fetch(t)).text()}};me.add(mO);const gO=["normal","bold","100","200","300","400","500","600","700","800","900"],yO=[".ttf",".otf",".woff",".woff2"],vO=["font/ttf","font/otf","font/woff","font/woff2"],_O=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function xO(t){const e=zt.extname(t),r=zt.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=r.length>0;for(const s of r)if(!s.match(_O)){n=!1;break}let i=r.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const wO=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function bO(t){return wO.test(t)?t:encodeURI(t)}const EO={extension:{type:oe.LoadParser,priority:Mn.Low},name:"loadWebFont",test(t){return sl(t,vO)||Os(t,yO)},async load(t,e){var n,i,s;const r=le.ADAPTER.getFontFaceSet();if(r){const o=[],l=((n=e.data)==null?void 0:n.family)??xO(t),h=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(f=>gO.includes(f)))??["normal"],c=e.data??{};for(let f=0;f<h.length;f++){const p=h[f],m=new FontFace(l,`url(${bO(t)})`,{...c,weight:p});await m.load(),r.add(m),o.push(m)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>le.ADAPTER.getFontFaceSet().delete(e))}};me.add(EO);const SO=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Na=null,Fy=class{constructor(){Na||(Na=URL.createObjectURL(new Blob([SO],{type:"application/javascript"}))),this.worker=new Worker(Na)}};Fy.revokeObjectURL=function(){Na&&(URL.revokeObjectURL(Na),Na=null)};const TO=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Oa=null;class YC{constructor(){Oa||(Oa=URL.createObjectURL(new Blob([TO],{type:"application/javascript"}))),this.worker=new Worker(Oa)}}YC.revokeObjectURL=function(){Oa&&(URL.revokeObjectURL(Oa),Oa=null)};let eE=0,Og;class AO{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new Fy;r.addEventListener("message",n=>{r.terminate(),Fy.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Og===void 0&&(Og=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Og&&(this._createdWorkers++,e=new YC().worker,e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),n=r.id;this.resolveHash[eE]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:eE++,id:n})}}const tE=new AO;function fh(t,e,r){t.resource.internal=!0;const n=new ne(t),i=()=>{delete e.promiseCache[r],ao.has(r)&&ao.remove(r)};return n.baseTexture.once("destroyed",()=>{r in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const CO=[".jpeg",".jpg",".png",".webp",".avif"],PO=["image/jpeg","image/png","image/webp","image/avif"];async function IO(t){const e=await le.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const rp={name:"loadTextures",extension:{type:oe.LoadParser,priority:Mn.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return sl(t,PO)||Os(t,CO)},async load(t,e,r){var l;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await tE.isImageBitmapSupported()?i=await tE.loadImageBitmap(t):i=await IO(t):i=await new Promise((h,c)=>{const f=new Image;f.crossOrigin=this.config.crossOrigin,f.src=t,f.complete?h(f):(f.onload=()=>h(f),f.onerror=p=>c(p))});const s={...e.data};s.resolution??(s.resolution=Bi(t)),n&&((l=s.resourceOptions)==null?void 0:l.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new Se(i,s);return o.resource.src=t,fh(o,r,t)},unload(t){t.destroy(!0)}};me.add(rp);const RO=".svg",kO="image/svg+xml",MO={extension:{type:oe.LoadParser,priority:Mn.High},name:"loadSVG",test(t){return sl(t,kO)||Os(t,RO)},async testParse(t){return Ay.test(t)},async parse(t,e,r){var s;const n=new Ay(t,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await n.load();const i=new Se(n,{resolution:Bi(t),...e==null?void 0:e.data});return i.resource.src=e.src,fh(i,r,e.src)},async load(t,e){return(await le.ADAPTER.fetch(t)).text()},unload:rp.unload};me.add(MO);const DO=[".mp4",".m4v",".webm",".ogv"],FO=["video/mp4","video/webm","video/ogg"],NO={name:"loadVideo",extension:{type:oe.LoadParser,priority:Mn.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return sl(t,FO)||Os(t,DO)},async load(t,e,r){var o;let n;const i=await(await le.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(i);try{const l={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},h=new LC(s,l);await h.load();const c=new Se(h,{alphaMode:await oF(),resolution:Bi(t),...e==null?void 0:e.data});c.resource.src=t,n=fh(c,r,t),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(l){throw URL.revokeObjectURL(s),l}return n},unload(t){t.destroy(!0)}};me.add(NO);class OO{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(e){const{alias:r,name:n,src:i,srcs:s}=e;return bn(r||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(l=>(l==null?void 0:l.src)??(l==null?void 0:l.srcs)??l):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];Array.isArray(r)?r.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let l;if(typeof o=="string"){const h=this._createBundleAssetId(e,o);n.push(h),l=[o,h]}else{const h=o.map(c=>this._createBundleAssetId(e,c));n.push(...h),l=[...o,...h]}this.add({...i,alias:l,src:s})}):Object.keys(r).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof r[i]=="string")this.add({alias:s,src:r[i]});else if(Array.isArray(r[i]))this.add({alias:s,src:r[i]});else{const o=r[i],l=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(l)?l:[l]})}n.push(...s)}),this._bundles[e]=n}add(e,r,n,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(ke("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:r,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let l;l=h=>{this.hasKey(h)&&console.warn(`[Resolver] already has key: ${h} overwriting`)},bn(o).forEach(h=>{const{src:c,srcs:f}=h;let{data:p,format:m,loadParser:v}=h;const _=bn(c||f).map(x=>typeof x=="string"?aO(x):Array.isArray(x)?x:[x]),b=this.getAlias(h);Array.isArray(b)?b.forEach(l):l(b);const T=[];_.forEach(x=>{x.forEach(E=>{let w={};if(typeof E!="object"){w.src=E;for(let A=0;A<this._parsers.length;A++){const P=this._parsers[A];if(P.test(E)){w=P.parse(E);break}}}else p=E.data??p,m=E.format??m,v=E.loadParser??v,w={...w,...E};if(!b)throw new Error(`[Resolver] alias is undefined for this asset: ${w.src}`);w=this.buildResolvedAsset(w,{aliases:b,data:p,format:m,loadParser:v}),T.push(w)})}),b.forEach(x=>{this._assetMap[x]=T})})}resolveBundle(e){const r=mf(e);e=bn(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),l={};for(const h in o){const c=o[h];l[this._extractAssetIdFromBundle(i,h)]=c}n[i]=l}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(e){const r=mf(e);e=bn(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],l=this._getPreferredOrder(s);l==null||l.priority.forEach(h=>{l.params[h].forEach(c=>{const f=s.filter(p=>p[h]?p[h]===c:!1);f.length&&(s=f)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}buildResolvedAsset(e,r){const{aliases:n,data:i,loadParser:s,format:o}=r;return(this._basePath||this._rootPath)&&(e.src=zt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??zt.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class BO{constructor(){this._detections=[],this._initialized=!1,this.resolver=new OO,this.loader=new uO,this.cache=ao,this._backgroundLoader=new oO(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let l=e.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const r=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof r=="number"?[r]:r,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,n,i,s){this.resolver.add(e,r,n,i,s)}async load(e,r){this._initialized||await this.init();const n=mf(e),i=bn(e).map(l=>{if(typeof l!="string"){const h=this.resolver.getAlias(l);return h.some(c=>!this.resolver.hasKey(c))&&this.add(l),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let l=0,h=0;const c=()=>{r==null||r(++l/h)},f=o.map(p=>{const m=i[p];return h+=Object.keys(m).length,this._mapLoadToResolve(m,c).then(v=>{s[p]=v})});return await Promise.all(f),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ao.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=ao.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((l,h)=>{const c=s[l.src],f=[l.src];l.alias&&f.push(...l.alias),o[i[h]]=c,ao.set(f,c)}),o}async unload(e){this._initialized||await this.init();const r=bn(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=bn(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{ao.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?r=await n.add(r):e.skipDetections||(r=await n.remove(r));return r=r.filter((n,i)=>r.indexOf(n)===i),r}get detections(){return this._detections}get preferWorkers(){return rp.config.preferWorkers}set preferWorkers(e){ke("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const zc=new BO;me.handleByList(oe.LoadParser,zc.loader.parsers).handleByList(oe.ResolveParser,zc.resolver.parsers).handleByList(oe.CacheParser,zc.cache.parsers).handleByList(oe.DetectionParser,zc.detections);const LO={extension:oe.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof ne),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};me.add(LO);async function QC(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const UO={extension:{type:oe.DetectionParser,priority:1},test:async()=>QC("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};me.add(UO);const zO={extension:{type:oe.DetectionParser,priority:0},test:async()=>QC("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};me.add(zO);const rE=["png","jpg","jpeg"],GO={extension:{type:oe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...rE],remove:async t=>t.filter(e=>!rE.includes(e))};me.add(GO);const $O="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function v1(t){return $O?!1:document.createElement("video").canPlayType(t)!==""}const HO={extension:{type:oe.DetectionParser,priority:0},test:async()=>v1("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};me.add(HO);const jO={extension:{type:oe.DetectionParser,priority:0},test:async()=>v1("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};me.add(jO);const VO={extension:{type:oe.DetectionParser,priority:0},test:async()=>v1("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};me.add(VO);const WO={extension:oe.ResolveParser,test:rp.test,parse:t=>{var e;return{resolution:parseFloat(((e=le.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:zt.extname(t).slice(1),src:t}}};me.add(WO);const XO=[".xml",".fnt"],YO={extension:{type:oe.LoadParser,priority:Mn.Normal},name:"loadBitmapFont",test(t){return XO.includes(zt.extname(t).toLowerCase())},async testParse(t){return Sd.test(t)||My.test(t)},async parse(t,e,r){const n=Sd.test(t)?Sd.parse(t):My.parse(t),{src:i}=e,{page:s}=n,o=[];for(let c=0;c<s.length;++c){const f=s[c].file;let p=zt.join(zt.dirname(i),f);p=Dy(p,i),o.push(p)}const l=await r.load(o),h=o.map(c=>l[c]);return rs.install(n,h,!0)},async load(t,e){return(await le.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};me.add(YO);const gf={build(t){const e=t.points;let r,n,i,s,o,l;if(t.type===Wt.CIRC){const _=t.shape;r=_.x,n=_.y,o=l=_.radius,i=s=0}else if(t.type===Wt.ELIP){const _=t.shape;r=_.x,n=_.y,o=_.width,l=_.height,i=s=0}else{const _=t.shape,b=_.width/2,T=_.height/2;r=_.x+b,n=_.y+T,o=l=Math.max(0,Math.min(_.radius,Math.min(b,T))),i=b-o,s=T-l}if(!(o>=0&&l>=0&&i>=0&&s>=0)){e.length=0;return}const h=Math.ceil(2.3*Math.sqrt(o+l)),c=h*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(h===0){e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,e[5]=e[7]=n-s;return}let f=0,p=h*4+(i?2:0)+2,m=p,v=c;{const _=i+o,b=s,T=r+_,x=r-_,E=n+b;if(e[f++]=T,e[f++]=E,e[--p]=E,e[--p]=x,s){const w=n-b;e[m++]=x,e[m++]=w,e[--v]=w,e[--v]=T}}for(let _=1;_<h;_++){const b=Math.PI/2*(_/h),T=i+Math.cos(b)*o,x=s+Math.sin(b)*l,E=r+T,w=r-T,A=n+x,P=n-x;e[f++]=E,e[f++]=A,e[--p]=A,e[--p]=w,e[m++]=w,e[m++]=P,e[--v]=P,e[--v]=E}{const _=i,b=s+l,T=r+_,x=r-_,E=n+b,w=n-b;e[f++]=T,e[f++]=E,e[--v]=w,e[--v]=T,i&&(e[f++]=x,e[f++]=E,e[--v]=w,e[--v]=x)}},triangulate(t,e){const r=t.points,n=e.points,i=e.indices;if(r.length===0)return;let s=n.length/2;const o=s;let l,h;if(t.type!==Wt.RREC){const f=t.shape;l=f.x,h=f.y}else{const f=t.shape;l=f.x+f.width/2,h=f.y+f.height/2}const c=t.matrix;n.push(t.matrix?c.a*l+c.c*h+c.tx:l,t.matrix?c.b*l+c.d*h+c.ty:h),s++,n.push(r[0],r[1]);for(let f=2;f<r.length;f+=2)n.push(r[f],r[f+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function nE(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let i=0,s=t[r-2],o=t[r-1];i<r;i+=2){const l=t[i],h=t[i+1];n+=(l-s)*(h+o),s=l,o=h}if(!e&&n>0||e&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,l=r-s-1,h=s,c=s+1;[t[o],t[h]]=[t[h],t[o]],[t[l],t[c]]=[t[c],t[l]]}}}const qC={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,i=e.points,s=e.indices;if(r.length>=6){nE(r,!1);const o=[];for(let c=0;c<n.length;c++){const f=n[c];nE(f.points,!0),o.push(r.length/2),r=r.concat(f.points)}const l=CM(r,o,2);if(!l)return;const h=i.length/2;for(let c=0;c<l.length;c+=3)s.push(l[c]+h),s.push(l[c+1]+h),s.push(l[c+2]+h);for(let c=0;c<r.length;c++)i.push(r[c])}}},QO={build(t){const e=t.shape,r=e.x,n=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(t,e){const r=t.points,n=e.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},qO={build(t){gf.build(t)},triangulate(t,e){gf.triangulate(t,e)}};var Qr=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Qr||{}),ps=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(ps||{});const Za={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class iE{static curveTo(e,r,n,i,s,o){const l=o[o.length-2],h=o[o.length-1]-r,c=l-e,f=i-r,p=n-e,m=Math.abs(h*p-c*f);if(m<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const v=h*h+c*c,_=f*f+p*p,b=h*f+c*p,T=s*Math.sqrt(v)/m,x=s*Math.sqrt(_)/m,E=T*b/v,w=x*b/_,A=T*p+x*c,P=T*f+x*h,D=c*(x+E),R=h*(x+E),k=p*(T+w),L=f*(T+w),z=Math.atan2(R-P,D-A),re=Math.atan2(L-P,k-A);return{cx:A+e,cy:P+r,radius:s,startAngle:z,endAngle:re,anticlockwise:c*f>p*h}}static arc(e,r,n,i,s,o,l,h,c){const f=l-o,p=Za._segmentsCount(Math.abs(f)*s,Math.ceil(Math.abs(f)/lf)*40),m=f/(p*2),v=m*2,_=Math.cos(m),b=Math.sin(m),T=p-1,x=T%1/T;for(let E=0;E<=T;++E){const w=E+x*E,A=m+o+v*w,P=Math.cos(A),D=-Math.sin(A);c.push((_*P+b*D)*s+n,(_*-D+b*P)*s+i)}}}class KO{constructor(){this.reset()}begin(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class _1{static curveLength(e,r,n,i,s,o,l,h){let c=0,f=0,p=0,m=0,v=0,_=0,b=0,T=0,x=0,E=0,w=0,A=e,P=r;for(let D=1;D<=10;++D)f=D/10,p=f*f,m=p*f,v=1-f,_=v*v,b=_*v,T=b*e+3*_*f*n+3*v*p*s+m*l,x=b*r+3*_*f*i+3*v*p*o+m*h,E=A-T,w=P-x,A=T,P=x,c+=Math.sqrt(E*E+w*w);return c}static curveTo(e,r,n,i,s,o,l){const h=l[l.length-2],c=l[l.length-1];l.length-=2;const f=Za._segmentsCount(_1.curveLength(h,c,e,r,n,i,s,o));let p=0,m=0,v=0,_=0,b=0;l.push(h,c);for(let T=1,x=0;T<=f;++T)x=T/f,p=1-x,m=p*p,v=m*p,_=x*x,b=_*x,l.push(v*h+3*m*x*e+3*p*_*n+b*s,v*c+3*m*x*r+3*p*_*i+b*o)}}function sE(t,e,r,n,i,s,o,l){const h=t-r*i,c=e-n*i,f=t+r*s,p=e+n*s;let m,v;o?(m=n,v=-r):(m=-n,v=r);const _=h+m,b=c+v,T=f+m,x=p+v;return l.push(_,b,T,x),2}function Qs(t,e,r,n,i,s,o,l){const h=r-t,c=n-e;let f=Math.atan2(h,c),p=Math.atan2(i-t,s-e);l&&f<p?f+=Math.PI*2:!l&&f>p&&(p+=Math.PI*2);let m=f;const v=p-f,_=Math.abs(v),b=Math.sqrt(h*h+c*c),T=(15*_*Math.sqrt(b)/Math.PI>>0)+1,x=v/T;if(m+=x,l){o.push(t,e,r,n);for(let E=1,w=m;E<T;E++,w+=x)o.push(t,e,t+Math.sin(w)*b,e+Math.cos(w)*b);o.push(t,e,i,s)}else{o.push(r,n,t,e);for(let E=1,w=m;E<T;E++,w+=x)o.push(t+Math.sin(w)*b,e+Math.cos(w)*b,t,e);o.push(i,s,t,e)}return T*2}function ZO(t,e){const r=t.shape;let n=t.points||r.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=t.lineStyle,o=new Fe(n[0],n[1]),l=new Fe(n[n.length-2],n[n.length-1]),h=r.type!==Wt.POLY||r.closeStroke,c=Math.abs(o.x-l.x)<i&&Math.abs(o.y-l.y)<i;if(h){n=n.slice(),c&&(n.pop(),n.pop(),l.set(n[n.length-2],n[n.length-1]));const de=(o.x+l.x)*.5,M=(l.y+o.y)*.5;n.unshift(de,M),n.push(de,M)}const f=e.points,p=n.length/2;let m=n.length;const v=f.length/2,_=s.width/2,b=_*_,T=s.miterLimit*s.miterLimit;let x=n[0],E=n[1],w=n[2],A=n[3],P=0,D=0,R=-(E-A),k=x-w,L=0,z=0,re=Math.sqrt(R*R+k*k);R/=re,k/=re,R*=_,k*=_;const Z=s.alignment,B=(1-Z)*2,Q=Z*2;h||(s.cap===ps.ROUND?m+=Qs(x-R*(B-Q)*.5,E-k*(B-Q)*.5,x-R*B,E-k*B,x+R*Q,E+k*Q,f,!0)+2:s.cap===ps.SQUARE&&(m+=sE(x,E,R,k,B,Q,!0,f))),f.push(x-R*B,E-k*B,x+R*Q,E+k*Q);for(let de=1;de<p-1;++de){x=n[(de-1)*2],E=n[(de-1)*2+1],w=n[de*2],A=n[de*2+1],P=n[(de+1)*2],D=n[(de+1)*2+1],R=-(E-A),k=x-w,re=Math.sqrt(R*R+k*k),R/=re,k/=re,R*=_,k*=_,L=-(A-D),z=w-P,re=Math.sqrt(L*L+z*z),L/=re,z/=re,L*=_,z*=_;const M=w-x,j=E-A,N=w-P,$=D-A,se=M*N+j*$,Ce=j*N-$*M,Ee=Ce<0;if(Math.abs(Ce)<.001*Math.abs(se)){f.push(w-R*B,A-k*B,w+R*Q,A+k*Q),se>=0&&(s.join===Qr.ROUND?m+=Qs(w,A,w-R*B,A-k*B,w-L*B,A-z*B,f,!1)+4:m+=2,f.push(w-L*Q,A-z*Q,w+L*B,A+z*B));continue}const He=(-R+x)*(-k+A)-(-R+w)*(-k+E),Ie=(-L+P)*(-z+A)-(-L+w)*(-z+D),$e=(M*Ie-N*He)/Ce,Rt=($*He-j*Ie)/Ce,Gt=($e-w)*($e-w)+(Rt-A)*(Rt-A),dt=w+($e-w)*B,Re=A+(Rt-A)*B,qe=w-($e-w)*Q,Ue=A-(Rt-A)*Q,Ur=Math.min(M*M+j*j,N*N+$*$),zr=Ee?B:Q,Ls=Ur+zr*zr*b,mp=Gt<=Ls;let ko=s.join;if(ko===Qr.MITER&&Gt/b>T&&(ko=Qr.BEVEL),mp)switch(ko){case Qr.MITER:{f.push(dt,Re,qe,Ue);break}case Qr.BEVEL:{Ee?f.push(dt,Re,w+R*Q,A+k*Q,dt,Re,w+L*Q,A+z*Q):f.push(w-R*B,A-k*B,qe,Ue,w-L*B,A-z*B,qe,Ue),m+=2;break}case Qr.ROUND:{Ee?(f.push(dt,Re,w+R*Q,A+k*Q),m+=Qs(w,A,w+R*Q,A+k*Q,w+L*Q,A+z*Q,f,!0)+4,f.push(dt,Re,w+L*Q,A+z*Q)):(f.push(w-R*B,A-k*B,qe,Ue),m+=Qs(w,A,w-R*B,A-k*B,w-L*B,A-z*B,f,!1)+4,f.push(w-L*B,A-z*B,qe,Ue));break}}else{switch(f.push(w-R*B,A-k*B,w+R*Q,A+k*Q),ko){case Qr.MITER:{Ee?f.push(qe,Ue,qe,Ue):f.push(dt,Re,dt,Re),m+=2;break}case Qr.ROUND:{Ee?m+=Qs(w,A,w+R*Q,A+k*Q,w+L*Q,A+z*Q,f,!0)+2:m+=Qs(w,A,w-R*B,A-k*B,w-L*B,A-z*B,f,!1)+2;break}}f.push(w-L*B,A-z*B,w+L*Q,A+z*Q),m+=2}}x=n[(p-2)*2],E=n[(p-2)*2+1],w=n[(p-1)*2],A=n[(p-1)*2+1],R=-(E-A),k=x-w,re=Math.sqrt(R*R+k*k),R/=re,k/=re,R*=_,k*=_,f.push(w-R*B,A-k*B,w+R*Q,A+k*Q),h||(s.cap===ps.ROUND?m+=Qs(w-R*(B-Q)*.5,A-k*(B-Q)*.5,w-R*B,A-k*B,w+R*Q,A+k*Q,f,!1)+2:s.cap===ps.SQUARE&&(m+=sE(w,A,R,k,B,Q,!1,f)));const ue=e.indices,_e=Za.epsilon*Za.epsilon;for(let de=v;de<m+v-2;++de)x=f[de*2],E=f[de*2+1],w=f[(de+1)*2],A=f[(de+1)*2+1],P=f[(de+2)*2],D=f[(de+2)*2+1],!(Math.abs(x*(A-D)+w*(D-E)+P*(E-A))<_e)&&ue.push(de,de+1,de+2)}function JO(t,e){let r=0;const n=t.shape,i=t.points||n.points,s=n.type!==Wt.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,l=e.indices,h=i.length/2,c=o.length/2;let f=c;for(o.push(i[0],i[1]),r=1;r<h;r++)o.push(i[r*2],i[r*2+1]),l.push(f,f+1),f++;s&&l.push(f,c)}function oE(t,e){t.lineStyle.native?JO(t,e):ZO(t,e)}class x1{static curveLength(e,r,n,i,s,o){const l=e-2*n+s,h=r-2*i+o,c=2*n-2*e,f=2*i-2*r,p=4*(l*l+h*h),m=4*(l*c+h*f),v=c*c+f*f,_=2*Math.sqrt(p+m+v),b=Math.sqrt(p),T=2*p*b,x=2*Math.sqrt(v),E=m/b;return(T*_+b*m*(_-x)+(4*v*p-m*m)*Math.log((2*b+E+_)/(E+x)))/(4*T)}static curveTo(e,r,n,i,s){const o=s[s.length-2],l=s[s.length-1],h=Za._segmentsCount(x1.curveLength(o,l,e,r,n,i));let c=0,f=0;for(let p=1;p<=h;++p){const m=p/h;c=o+(e-o)*m,f=l+(r-l)*m,s.push(c+(e+(n-e)*m-c)*m,f+(r+(i-r)*m-f)*m)}}}const Bg={[Wt.POLY]:qC,[Wt.CIRC]:gf,[Wt.ELIP]:gf,[Wt.RECT]:QO,[Wt.RREC]:qO},aE=[],Gc=[];class yf{constructor(e,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=e.type}clone(){return new yf(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Zo=new Fe,KC=class ZC extends rC{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ff,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Gc.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r.reset(),aE.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,r=null,n=null,i=null){const s=new yf(e,r,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,r=null){if(!this.graphicsData.length)return null;const n=new yf(e,null,null,r),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const r=this.graphicsData;for(let n=0;n<r.length;++n){const i=r[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,Zo):Zo.copyFrom(e),i.shape.contains(Zo.x,Zo.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(Zo.x,Zo.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,r=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let h=this.shapeIndex;h<r.length;h++){this.shapeIndex++;const c=r[h],f=c.fillStyle,p=c.lineStyle;Bg[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(f.visible||p.visible)&&this.processHoles(c.holes);for(let m=0;m<2;m++){const v=m===0?f:p;if(!v.visible)continue;const _=v.texture.baseTexture,b=this.indices.length,T=this.points.length/2;_.wrapMode=ki.REPEAT,m===0?this.processFill(c):this.processLine(c);const x=this.points.length/2-T;x!==0&&(n&&!this._compareStyles(i,v)&&(n.end(b,T),n=null),n||(n=aE.pop()||new KO,n.begin(v,b,T),this.batches.push(n),i=v),this.addUvs(this.points,e,v.texture,T,x,v.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const l=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&l===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=l?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,r=this.graphicsData.length;e<r;e++){const n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let r=0,n=e.length;r<n;r++){const i=e[r];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<ZC.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Se._globalBatch;for(let p=0;p<this.drawCalls.length;p++)this.drawCalls[p].texArray.clear(),Gc.push(this.drawCalls[p]);this.drawCalls.length=0;const r=this.colors,n=this.textureIds;let i=Gc.pop();i||(i=new gy,i.texArray=new xy),i.texArray.count=0,i.start=0,i.size=0,i.type=En.TRIANGLES;let s=0,o=null,l=0,h=!1,c=En.TRIANGLES,f=0;this.drawCalls.push(i);for(let p=0;p<this.batches.length;p++){const m=this.batches[p],v=8,_=m.style,b=_.texture.baseTexture;h!==!!_.native&&(h=!!_.native,c=h?En.LINES:En.TRIANGLES,o=null,s=v,e++),o!==b&&(o=b,b._batchEnabled!==e&&(s===v&&(e++,s=0,i.size>0&&(i=Gc.pop(),i||(i=new gy,i.texArray=new xy),this.drawCalls.push(i)),i.start=f,i.size=0,i.texArray.count=0,i.type=c),b.touched=1,b._batchEnabled=e,b._batchLocation=s,b.wrapMode=ki.REPEAT,i.texArray.elements[i.texArray.count++]=b,s++)),i.size+=m.size,f+=m.size,l=b._batchLocation,this.addColors(r,_.color,_.alpha,m.attribSize,m.attribStart),this.addTextureIds(n,l,m.attribSize,m.attribStart)}Se._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,r=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),l=new Uint32Array(s);let h=0;for(let c=0;c<e.length/2;c++)o[h++]=e[c*2],o[h++]=e[c*2+1],o[h++]=r[c*2],o[h++]=r[c*2+1],l[h++]=n[c],o[h++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?qC.triangulate(e,this):Bg[e.type].triangulate(e,this)}processLine(e){oE(e,this);for(let r=0;r<e.holes.length;r++)oE(e.holes[r],this)}processHoles(e){for(let r=0;r<e.length;r++){const n=e[r];Bg[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,r){for(let n=0;n<e.length/2;n++){const i=e[n*2],s=e[n*2+1];e[n*2]=r.a*i+r.c*s+r.tx,e[n*2+1]=r.b*i+r.d*s+r.ty}}addColors(e,r,n,i,s=0){const o=Qe.shared.setValue(r).toLittleEndianNumber(),l=Qe.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let h=0;h<i;h++)e[s+h]=l}addTextureIds(e,r,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=r}addUvs(e,r,n,i,s,o=null){let l=0;const h=r.length,c=n.frame;for(;l<s;){let p=e[(i+l)*2],m=e[(i+l)*2+1];if(o){const v=o.a*p+o.c*m+o.tx;m=o.b*p+o.d*m+o.ty,p=v}l++,r.push(p/c.width,m/c.height)}const f=n.baseTexture;(c.width<f.width||c.height<f.height)&&this.adjustUvs(r,n,h,s)}adjustUvs(e,r,n,i){const s=r.baseTexture,o=1e-6,l=n+i*2,h=r.frame,c=h.width/s.width,f=h.height/s.height;let p=h.x/h.width,m=h.y/h.height,v=Math.floor(e[n]+o),_=Math.floor(e[n+1]+o);for(let b=n+2;b<l;b+=2)v=Math.min(v,Math.floor(e[b]+o)),_=Math.min(_,Math.floor(e[b+1]+o));p-=v,m-=_;for(let b=n;b<l;b+=2)e[b]=(e[b]+p)*c,e[b+1]=(e[b+1]+m)*f}};KC.BATCHABLE_SIZE=100;let eB=KC;class np{constructor(){this.color=16777215,this.alpha=1,this.texture=ne.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new np;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=ne.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class w1 extends np{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ps.BUTT,this.join=Qr.MITER,this.miterLimit=10}clone(){const e=new w1;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=ps.BUTT,this.join=Qr.MITER,this.miterLimit=10}}const Lg={},Ny=class Ad extends ur{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new np,this._lineStyle=new w1,this._matrix=null,this._holeMode=!1,this.state=fi.for2d(),this._geometry=e||new eB,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Qe(16777215),this.blendMode=be.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ad(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,r=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:r,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const r={width:0,texture:ne.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:ps.BUTT,join:Qr.MITER,miterLimit:10};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new yo,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new yo,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this}lineTo(e,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==r)&&n.push(e,r),this}_initCurve(e=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)}quadraticCurveTo(e,r,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),x1.curveTo(e,r,n,i,s),this}bezierCurveTo(e,r,n,i,s,o){return this._initCurve(),_1.curveTo(e,r,n,i,s,o,this.currentPath.points),this}arcTo(e,r,n,i,s){this._initCurve(e,r);const o=this.currentPath.points,l=iE.curveTo(e,r,n,i,s,o);if(l){const{cx:h,cy:c,radius:f,startAngle:p,endAngle:m,anticlockwise:v}=l;this.arc(h,c,f,p,m,v)}return this}arc(e,r,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=lf:o&&i<=s&&(i+=lf),s-i===0)return this;const l=e+Math.cos(i)*n,h=r+Math.sin(i)*n,c=this._geometry.closePointEps;let f=this.currentPath?this.currentPath.points:null;if(f){const p=Math.abs(f[f.length-2]-l),m=Math.abs(f[f.length-1]-h);p<c&&m<c||f.push(l,h)}else this.moveTo(l,h),f=this.currentPath.points;return iE.arc(l,h,e,r,n,i,s,o,f),this}beginFill(e=0,r){return this.beginTextureFill({texture:ne.WHITE,color:e,alpha:r})}normalizeColor(e){const r=Qe.shared.setValue(e.color??0);e.color=r.toNumber(),e.alpha??(e.alpha=r.alpha)}beginTextureFill(e){const r={texture:ne.WHITE,color:16777215,matrix:null};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,r,n,i){return this.drawShape(new Ae(e,r,n,i))}drawRoundedRect(e,r,n,i,s){return this.drawShape(new Kf(e,r,n,i,s))}drawCircle(e,r,n){return this.drawShape(new Qf(e,r,n))}drawEllipse(e,r,n,i){return this.drawShape(new qf(e,r,n,i))}drawPolygon(...e){let r,n=!0;const i=e[0];i.points?(n=i.closeStroke,r=i.points):Array.isArray(e[0])?r=e[0]:r=e;const s=new yo(r);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Wt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,r=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){const s=e.batches[i],o=s.style.color,l=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),h=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),f={vertexData:l,blendMode:r,indices:c,uvs:h,_batchRGB:Qe.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=f}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const i=this.batches[r];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const r=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=r.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,Qe.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(r),e.geometry.bind(n,r),e.state.set(this.state);for(let l=0,h=o.length;l<h;l++)this._renderDrawCallDirect(e,n.drawCalls[l])}_renderDrawCallDirect(e,r){const{texArray:n,type:i,size:s,start:o}=r,l=n.count;for(let h=0;h<l;h++)e.texture.bind(n.elements[h],h);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let r=this.shader;const n=this.pluginName;if(!r){if(!Lg[n]){const{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let h=0;h<i;h++)s[h]=h;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new et,default:In.from({uSamplers:s},!0)},l=e.plugins[n]._shader.program;Lg[n]=new li(l,o)}r=Lg[n]}return r}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:r,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,r,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Ad._TEMP_POINT),this._geometry.containsPoint(Ad._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r._tintRGB=Qe.shared.setValue(this._tintColor).multiply(r._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,l=r.tx,h=r.ty,c=this._geometry.points,f=this.vertexData;let p=0;for(let m=0;m<c.length;m+=2){const v=c[m],_=c[m+1];f[p++]=n*v+s*_+l,f[p++]=o*_+i*v+h}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Ny.curves=Za,Ny._TEMP_POINT=new Fe;let Ba=Ny;class tB extends tp{constructor(e=100,r=100,n=10,i=10){super(),this.segWidth=n,this.segHeight=i,this.width=e,this.height=r,this.build()}build(){const e=this.segWidth*this.segHeight,r=[],n=[],i=[],s=this.segWidth-1,o=this.segHeight-1,l=this.width/s,h=this.height/o;for(let f=0;f<e;f++){const p=f%this.segWidth,m=f/this.segWidth|0;r.push(p*l,m*h),n.push(p/s,m/o)}const c=s*o;for(let f=0;f<c;f++){const p=f%s,m=f/s|0,v=m*this.segWidth+p,_=m*this.segWidth+p+1,b=(m+1)*this.segWidth+p,T=(m+1)*this.segWidth+p+1;i.push(v,_,b,_,T,b)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class rB extends tp{constructor(e=200,r,n=0){super(new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6)),this.points=r,this._width=e,this.textureScale=n,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let l=0,h=e[0];const c=this._width*this.textureScale,f=e.length;for(let m=0;m<f;m++){const v=m*4;if(this.textureScale>0){const _=h.x-e[m].x,b=h.y-e[m].y,T=Math.sqrt(_*_+b*b);h=e[m],l+=T/c}else l=m/(f-1);s[v]=l,s[v+1]=0,s[v+2]=l,s[v+3]=1}let p=0;for(let m=0;m<f-1;m++){const v=m*2;o[p++]=v,o[p++]=v+1,o[p++]=v+2,o[p++]=v+2,o[p++]=v+1,o[p++]=v+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let r=e[0],n,i=0,s=0;const o=this.buffers[0].data,l=e.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let c=0;c<l;c++){const f=e[c],p=c*4;c<e.length-1?n=e[c+1]:n=f,s=-(n.x-r.x),i=n.y-r.y;const m=Math.sqrt(i*i+s*s);m<1e-6?(i=0,s=0):(i/=m,s/=m,i*=h,s*=h),o[p]=f.x+i,o[p+1]=f.y+s,o[p+2]=f.x-i,o[p+3]=f.y-s,r=f}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class nB extends ju{constructor(e,r,n){const i=new tB(e.width,e.height,r,n),s=new Vu(ne.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:r,height:n}=this.shader.texture;this.autoResize&&(e.width!==r||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const $c=10;class iB extends nB{constructor(e,r,n,i,s){var o,l,h,c;super(ne.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=r??((o=e.defaultBorders)==null?void 0:o.left)??$c,this._rightWidth=i??((l=e.defaultBorders)==null?void 0:l.right)??$c,this._topHeight=n??((h=e.defaultBorders)==null?void 0:h.top)??$c,this._bottomHeight=s??((c=e.defaultBorders)==null?void 0:c.bottom)??$c,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,r=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,r=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(r,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,r=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const n=1/this._origWidth,i=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=i*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class sB extends ju{constructor(e=ne.EMPTY,r,n,i,s){const o=new tp(r,n,i);o.getBuffer("aVertexPosition").static=!1;const l=new Vu(e);super(o,l,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class oB extends ju{constructor(e,r,n=0){const i=new rB(e.height,r,n),s=new Vu(e);n>0&&(e.baseTexture.wrapMode=ki.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),super._render(e)}}class aB extends ur{constructor(e=1500,r,n=16384,i=!1){super();const s=16384;n>s&&(n=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=be.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(r),this._tintColor=new Qe(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const r=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class lE{constructor(e,r,n){this.geometry=new Rs,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ve.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new _t(xF(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const l=this.dynamicProperties[o];l.offset=r,r+=l.size,this.dynamicStride+=l.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new _t(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const l=this.staticProperties[o];l.offset=i,i+=l.size,this.staticStride+=l.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new _t(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const l=this.dynamicProperties[o];e.addAttribute(l.attributeName,this.dynamicBuffer,0,l.type===ve.UNSIGNED_BYTE,l.type,this.dynamicStride*4,l.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const l=this.staticProperties[o];e.addAttribute(l.attributeName,this.staticBuffer,0,l.type===ve.UNSIGNED_BYTE,l.type,this.staticStride*4,l.offset*4)}}uploadDynamic(e,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,r,n,s.type===ve.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,r,n,s.type===ve.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var lB=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,uB=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class JC extends Jf{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new et,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ve.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=li.from(uB,lB,{}),this.state=fi.for2d()}render(e){const r=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let l=e._buffers;l||(l=e._buffers=this.generateBuffers(e));const h=r[0]._texture.baseTexture,c=h.alphaMode>0;this.state.blendMode=JA(e.blendMode,c),s.state.set(this.state);const f=s.gl,p=e.worldTransform.copyTo(this.tempMatrix);p.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=Qe.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);let m=!1;for(let v=0,_=0;v<o;v+=i,_+=1){let b=o-v;b>i&&(b=i),_>=l.length&&l.push(this._generateOneMoreBuffer(e));const T=l[_];T.uploadDynamic(r,v,b);const x=e._bufferUpdateIDs[_]||0;m=m||T._updateID<x,m&&(T._updateID=e._updateID,T.uploadStatic(r,v,b)),s.geometry.bind(T.geometry),f.drawElements(f.TRIANGLES,b*6,f.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)r.push(new lE(this.properties,s,i));return r}_generateOneMoreBuffer(e){const r=e._batchSize,n=e._properties;return new lE(this.properties,n,r)}uploadVertices(e,r,n,i,s,o){let l=0,h=0,c=0,f=0;for(let p=0;p<n;++p){const m=e[r+p],v=m._texture,_=m.scale.x,b=m.scale.y,T=v.trim,x=v.orig;T?(h=T.x-m.anchor.x*x.width,l=h+T.width,f=T.y-m.anchor.y*x.height,c=f+T.height):(l=x.width*(1-m.anchor.x),h=x.width*-m.anchor.x,c=x.height*(1-m.anchor.y),f=x.height*-m.anchor.y),i[o]=h*_,i[o+1]=f*b,i[o+s]=l*_,i[o+s+1]=f*b,i[o+s*2]=l*_,i[o+s*2+1]=c*b,i[o+s*3]=h*_,i[o+s*3+1]=c*b,o+=s*4}}uploadPosition(e,r,n,i,s,o){for(let l=0;l<n;l++){const h=e[r+l].position;i[o]=h.x,i[o+1]=h.y,i[o+s]=h.x,i[o+s+1]=h.y,i[o+s*2]=h.x,i[o+s*2+1]=h.y,i[o+s*3]=h.x,i[o+s*3+1]=h.y,o+=s*4}}uploadRotation(e,r,n,i,s,o){for(let l=0;l<n;l++){const h=e[r+l].rotation;i[o]=h,i[o+s]=h,i[o+s*2]=h,i[o+s*3]=h,o+=s*4}}uploadUvs(e,r,n,i,s,o){for(let l=0;l<n;++l){const h=e[r+l]._texture._uvs;h?(i[o]=h.x0,i[o+1]=h.y0,i[o+s]=h.x1,i[o+s+1]=h.y1,i[o+s*2]=h.x2,i[o+s*2+1]=h.y2,i[o+s*3]=h.x3,i[o+s*3+1]=h.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,r,n,i,s,o){for(let l=0;l<n;++l){const h=e[r+l],c=Qe.shared.setValue(h._tintRGB).toPremultiplied(h.alpha,h.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}JC.extension={name:"particle",type:oe.RendererPlugin};me.add(JC);class Wu extends pi{constructor(e,r=!0){super(e[0]instanceof ne?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Lt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Lt.shared.add(this.update,this,ks.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const r=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=r/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const r=[];for(let n=0;n<e.length;++n)r.push(ne.from(e[n]));return new Wu(r)}static fromImages(e){const r=[];for(let n=0;n<e.length;++n)r.push(ne.from(e[n]));return new Wu(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof ne)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Lt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Lt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Gl=new Fe;class b1 extends pi{constructor(e,r=100,n=100){super(e),this.tileTransform=new Zf,this._width=r,this._height=n,this.uvMatrix=this.texture.uvMatrix||new m1(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,r,n,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ae),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Gl);const r=this._width,n=this._height,i=-r*this.anchor._x;if(Gl.x>=i&&Gl.x<i+r){const s=-n*this.anchor._y;if(Gl.y>=s&&Gl.y<s+n)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,r){const n=e instanceof ne?e:ne.from(e,r);return new b1(n,r.width,r.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var hB=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,cB=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,dB=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,uE=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fB=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Hc=new et;class eP extends Jf{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new dC,this.state=fi.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=li.from(uE,fB,r),this.shader=e.context.webGLVersion>1?li.from(cB,hB,r):li.from(uE,dB,r)}render(e){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const l=e._texture,h=l.baseTexture,c=h.alphaMode>0,f=e.tileTransform.localTransform,p=e.uvMatrix;let m=h.isPowerOfTwo&&l.frame.width===h.width&&l.frame.height===h.height;m&&(h._glTextures[r.CONTEXT_UID]?m=h.wrapMode!==ki.CLAMP:h.wrapMode===ki.CLAMP&&(h.wrapMode=ki.REPEAT));const v=m?this.simpleShader:this.shader,_=l.width,b=l.height,T=e._width,x=e._height;Hc.set(f.a*_/T,f.b*_/x,f.c*b/T,f.d*b/x,f.tx/T,f.ty/x),Hc.invert(),m?Hc.prepend(p.mapCoord):(v.uniforms.uMapCoord=p.mapCoord.toArray(!0),v.uniforms.uClampFrame=p.uClampFrame,v.uniforms.uClampOffset=p.uClampOffset),v.uniforms.uTransform=Hc.toArray(!0),v.uniforms.uColor=Qe.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(v.uniforms.uColor),v.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),v.uniforms.uSampler=l,r.shader.bind(v),r.geometry.bind(n),this.state.blendMode=JA(e.blendMode,c),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}eP.extension={name:"tilingSprite",type:oe.RendererPlugin};me.add(eP);const tP=class Oy{constructor(e){this.stage=new ur,e=Object.assign({forceCanvas:!1},e),this.renderer=FN(e),Oy._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,r){const n=Oy._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};tP._plugins=[];let ip=tP;me.handleByList(oe.Application,ip._plugins);class rP{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}rP.extension=oe.Application;me.add(rP);var nP={exports:{}},pB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mB=pB,gB=mB;function iP(){}function sP(){}sP.resetWarningCache=iP;var yB=function(){function t(n,i,s,o,l,h){if(h!==gB){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:sP,resetWarningCache:iP};return r.PropTypes=r,r};nP.exports=yB();var vB=nP.exports;const Ze=If(vB);function Nr(t){return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(t)}function oP(t){var e=function(r,n){if(Nr(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Nr(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(t,"string");return Nr(e)==="symbol"?e:String(e)}function vt(t,e,r){return(e=oP(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ug(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ui(t){return function(e){if(Array.isArray(e))return Ug(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return Ug(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ug(e,r):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gt(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]}var _B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xB(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wB=function(t){return t==null};function tu(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=Ui(t);else{if(t===null||Nr(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(r){return!wB(r)&&!isNaN(r)}).map(Number)}function hE(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function zg(t){return t instanceof Fe||t instanceof ni}var vf=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function Gg(t,e,r){if(zg(t[e])&&zg(r))t[e].copyFrom(r);else if(zg(t[e])){var n=tu(r);gt(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(r),Nr(r)),t[e].set(n.shift(),n.shift())}else t[e]=r}var Jo,aP=function(t){var e,r=t;if(!Array.isArray(r)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(t)}var n={};return r.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},lP=function(t){return function(){return!t.apply(void 0,arguments)}},By="children",bB=(vt(Jo={},By,!0),vt(Jo,"parent",!0),vt(Jo,"worldAlpha",!0),vt(Jo,"worldTransform",!0),vt(Jo,"worldVisible",!0),Jo),Ly={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},hi=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(l){return requestAnimationFrame(function(){var h,c;l==null||(h=l.__reactpixi)===null||h===void 0||(c=h.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(l,h){if(r.hasOwnProperty(l))return gt(h.typeofs.some(function(c){return Nr(r[l])===c})||h.instanceofs.some(function(c){return r[l]instanceof c}),"".concat(t," ").concat(l," prop is invalid")),r[l]};if(r.texture)return gt(r.texture instanceof ne,"".concat(t," texture needs to be typeof `Texture`")),r.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,ne]});gt(!!s,"".concat(t," could not get texture from props"));var o=ne.from(s);return o.__reactpixi={root:e},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},EB=lP(aP([].concat(Ui(Object.keys(bB)),Ui(vf))));function ci(t,e,r){var n=!1;if(gt(st.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",Nr(t)),!r.ignoreEvents)for(var i=typeof t.removeListener=="function",s=typeof t.on=="function",o=0;o<vf.length;o++){var l=vf[o];e[l]!==r[l]&&(n=!0,typeof e[l]=="function"&&i&&t.removeListener(l,e[l]),typeof r[l]=="function"&&s&&t.on(l,r[l]))}var h=Object.keys(r||{});if(r.overwriteProps){for(var c=0;c<h.length;c++){var f=h[c];e[f]!==r[f]&&(n=!0,Gg(t,f,r[f]))}return n}for(var p=h.filter(EB),m=0;m<p.length;m++){var v=p[m],_=r[v];r[v]!==e[v]&&(n=!0),_!==void 0?Gg(t,v,_):v in Ly?(console.warn("setting default value: ".concat(v,", from: ").concat(t[v]," to: ").concat(_," for"),t),n=!0,Gg(t,v,Ly[v])):console.warn("ignoring prop: ".concat(v,", from ").concat(t[v]," to ").concat(_," for"),t)}return n}var SB=function(t,e){var r=e.text,n=e.style;return new sO(r,n)},TB=function(){return new ur};function Bs(t,e){if(t==null)return{};var r,n,i=function(o,l){if(o==null)return{};var h,c,f={},p=Object.keys(o);for(c=0;c<p.length;c++)h=p[c],l.indexOf(h)>=0||(f[h]=o[h]);return f}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var AB=["draw","geometry"],CB=function(t,e){var r=e.geometry;gt(!r||r instanceof Ba,"Graphics geometry needs to be a `Graphics`");var n=r?new Ba(r.geometry):new Ba;return n.applyProps=function(i,s,o){var l=o.draw;o.geometry;var h=ci(i,s,Bs(o,AB));return s.draw!==l&&typeof l=="function"&&(h=!0,l.call(n,n)),h},n},PB=["image","texture"],IB=function(t,e){var r=e.leftWidth,n=r===void 0?10:r,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,l=o===void 0?10:o,h=e.bottomHeight,c=h===void 0?10:h,f=hi("NineSlicePlane",t,e),p=new iB(f,n,s,l,c);return p.applyProps=function(m,v,_){var b=_.image,T=_.texture,x=ci(m,v,Bs(_,PB));return(b||T)&&(T!==v.texture&&(x=!0),m.texture=hi("NineSlicePlane",t,_)),x},p};function cE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function jc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cE(Object(r),!0).forEach(function(n){vt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var RB=function(t,e){var r=e.maxSize,n=r===void 0?1500:r,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,l=o!==void 0&&o,h=jc(jc({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),c=jc(jc({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),f=new aB(n,h,s,l);return f.willUnmount=function(p,m,v){p.destroy(c)},f},kB=["image","texture"],MB=function(t,e){var r=new pi(hi("Sprite",t,e));return r.applyProps=function(n,i,s){var o=s.image,l=s.texture,h=ci(n,i,Bs(s,kB));return(l&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(h=!0),n.texture=hi("Sprite",t,s)),h},r},DB=["textures","isPlaying","initialFrame","images"],FB=function(t,e){var r=e.textures,n=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,l=function(c){return c.map(function(f){return gt(f instanceof ne||(f==null?void 0:f.texture),"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),f})},h=n?Wu.fromImages(n):new Wu(l(r));return h[s?"gotoAndPlay":"gotoAndStop"](o||0),h.applyProps=function(c,f,p){var m=p.textures,v=p.isPlaying,_=p.initialFrame,b=p.images,T=ci(c,f,Bs(p,DB));if(b&&f.images!==b){for(var x=[],E=0;E<b.length;++E)x.push(ne.from(b[E]));c.textures=x,T=!0}if(m&&f.textures!==m&&(c.textures=l(m),T=!0),v!==f.isPlaying||_!==f.initialFrame){var w=typeof _=="number"?_:h.currentFrame||0;h[v?"gotoAndPlay":"gotoAndStop"](w),T=!0}return T},h},NB=function(t,e){var r=e.text,n=r===void 0?"":r,i=e.style,s=i===void 0?{}:i,o=e.isSprite,l=new y1(n,s);return o?(l.updateText(),new pi(l.texture)):l},OB=["tileScale","tilePosition","image","texture"],BB=function(t,e){var r=e.width,n=r===void 0?100:r,i=e.height,s=i===void 0?100:i,o=hi("TilingSprite",t,e),l=new b1(o,n,s);return l.applyProps=function(h,c,f){var p=f.tileScale,m=f.tilePosition,v=f.image,_=f.texture,b=ci(h,c,Bs(f,OB));if(m){var T,x=tu(m);(T=h.tilePosition).set.apply(T,Ui(x)),b=!hE(tu(c.tilePosition),x)||b}if(p){var E,w=tu(p);(E=h.tileScale).set.apply(E,Ui(w)),b=!hE(tu(c.tileScale),w)||b}return(v||_)&&(_!==c.texture&&(b=!0),h.texture=hi("Sprite",t,f)),b},l},LB=["image","texture"],UB=function(t,e){var r=hi("Mesh",t,e),n=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,l=o===void 0?En.TRIANGLES:o,h=new sB(r,n,i,s,l);return h.applyProps=function(c,f,p){var m=p.image,v=p.texture,_=ci(c,f,Bs(p,LB));return(m||v)&&(v!==f.texture&&(_=!0),c.texture=hi("Mesh",t,p)),_},h},zB=["image","texture"],GB=function(t,e){var r=hi("SimpleRope",t,e),n=e.points,i=new oB(r,n);return i.applyProps=function(s,o,l){var h=l.image,c=l.texture,f=Bs(l,zB);gt(Array.isArray(l.points),"SimpleRope points needs to be %s","Array<Point>");var p=ci(s,o,f);return(h||c)&&(c!==o.texture&&(p=!0),s.texture=hi("SimpleRope",t,l)),p},i},$B=Object.freeze({__proto__:null,BitmapText:SB,Container:TB,Graphics:CB,NineSlicePlane:IB,ParticleContainer:RB,Sprite:MB,Text:NB,TilingSprite:BB,SimpleMesh:UB,SimpleRope:GB,AnimatedSprite:FB});function dE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dE(Object(r),!0).forEach(function(n){vt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Tr={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},HB=Object.keys(Tr).reduce(function(t,e){return fE(fE({},t),{},vt({},e,$B[e]))},{}),uP={};function jB(t,e){return gt(!!t,"Expect type to be defined, got `%s`",t),gt(!Tr[t],"Component `%s` could not be created, already exists in default components.",t),uP[t]=e,t}var pE,mE,gE,yE,Uy={},zy={},VB={get exports(){return zy},set exports(t){zy=t}},vE={};function WB(){return mE||(mE=1,VB.exports=(pE||(pE=1,function(t){function e(M,j){var N=M.length;M.push(j);e:for(;0<N;){var $=N-1>>>1,se=M[$];if(!(0<i(se,j)))break e;M[$]=j,M[N]=se,N=$}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var j=M[0],N=M.pop();if(N!==j){M[0]=N;e:for(var $=0,se=M.length,Ce=se>>>1;$<Ce;){var Ee=2*($+1)-1,He=M[Ee],Ie=Ee+1,$e=M[Ie];if(0>i(He,N))Ie<se&&0>i($e,He)?(M[$]=$e,M[Ie]=N,$=Ie):(M[$]=He,M[Ee]=N,$=Ee);else{if(!(Ie<se&&0>i($e,N)))break e;M[$]=$e,M[Ie]=N,$=Ie}}}return j}function i(M,j){var N=M.sortIndex-j.sortIndex;return N!==0?N:M.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var h=[],c=[],f=1,p=null,m=3,v=!1,_=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function w(M){for(var j=r(c);j!==null;){if(j.callback===null)n(c);else{if(!(j.startTime<=M))break;n(c),j.sortIndex=j.expirationTime,e(h,j)}j=r(c)}}function A(M){if(b=!1,w(M),!_)if(r(h)!==null)_=!0,_e(P);else{var j=r(c);j!==null&&de(A,j.startTime-M)}}function P(M,j){_=!1,b&&(b=!1,x(L),L=-1),v=!0;var N=m;try{for(w(j),p=r(h);p!==null&&(!(p.expirationTime>j)||M&&!Z());){var $=p.callback;if(typeof $=="function"){p.callback=null,m=p.priorityLevel;var se=$(p.expirationTime<=j);j=t.unstable_now(),typeof se=="function"?p.callback=se:p===r(h)&&n(h),w(j)}else n(h);p=r(h)}if(p!==null)var Ce=!0;else{var Ee=r(c);Ee!==null&&de(A,Ee.startTime-j),Ce=!1}return Ce}finally{p=null,m=N,v=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var D,R=!1,k=null,L=-1,z=5,re=-1;function Z(){return!(t.unstable_now()-re<z)}function B(){if(k!==null){var M=t.unstable_now();re=M;var j=!0;try{j=k(!0,M)}finally{j?D():(R=!1,k=null)}}else R=!1}if(typeof E=="function")D=function(){E(B)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=B,D=function(){ue.postMessage(null)}}else D=function(){T(B,0)};function _e(M){k=M,R||(R=!0,D())}function de(M,j){L=T(function(){M(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,_e(P))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var N=m;m=j;try{return M()}finally{m=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,j){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var N=m;m=M;try{return j()}finally{m=N}},t.unstable_scheduleCallback=function(M,j,N){var $=t.unstable_now();switch(N=typeof N=="object"&&N!==null&&typeof(N=N.delay)=="number"&&0<N?$+N:$,M){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return M={id:f++,callback:j,priorityLevel:M,startTime:N,expirationTime:se=N+se,sortIndex:-1},N>$?(M.sortIndex=N,e(c,M),r(h)===null&&M===r(c)&&(b?(x(L),L=-1):b=!0,de(A,N-$))):(M.sortIndex=se,e(h,M),_||v||(_=!0,_e(P))),M},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(M){var j=m;return function(){var N=m;m=j;try{return M.apply(this,arguments)}finally{m=N}}}}(vE)),vE)),zy}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function XB(){return yE||(yE=1,gE=function(t){var e={},r=ii,n=WB(),i=Object.assign;function s(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),h=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),A=Symbol.iterator;function P(a){return a===null||typeof a!="object"?null:typeof(a=A&&a[A]||a["@@iterator"])=="function"?a:null}function D(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case c:return"Fragment";case h:return"Portal";case p:return"Profiler";case f:return"StrictMode";case b:return"Suspense";case T:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case v:return(a.displayName||"Context")+".Consumer";case m:return(a._context.displayName||"Context")+".Provider";case _:var u=a.render;return(a=a.displayName)||(a=(a=u.displayName||u.name||"")!==""?"ForwardRef("+a+")":"ForwardRef"),a;case x:return(u=a.displayName||null)!==null?u:D(a.type)||"Memo";case E:u=a._payload,a=a._init;try{return D(a(u))}catch{}}return null}function R(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=(a=u.render).displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(u);case 8:return u===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function k(a){var u=a,d=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do 4098&(u=a).flags&&(d=u.return),a=u.return;while(a)}return u.tag===3?d:null}function L(a){if(k(a)!==a)throw Error(s(188))}function z(a){var u=a.alternate;if(!u){if((u=k(a))===null)throw Error(s(188));return u!==a?null:a}for(var d=a,g=u;;){var y=d.return;if(y===null)break;var S=y.alternate;if(S===null){if((g=y.return)!==null){d=g;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===d)return L(y),a;if(S===g)return L(y),u;S=S.sibling}throw Error(s(188))}if(d.return!==g.return)d=y,g=S;else{for(var C=!1,I=y.child;I;){if(I===d){C=!0,d=y,g=S;break}if(I===g){C=!0,g=y,d=S;break}I=I.sibling}if(!C){for(I=S.child;I;){if(I===d){C=!0,d=S,g=y;break}if(I===g){C=!0,g=S,d=y;break}I=I.sibling}if(!C)throw Error(s(189))}}if(d.alternate!==g)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:u}function re(a){return(a=z(a))!==null?Z(a):null}function Z(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=Z(a);if(u!==null)return u;a=a.sibling}return null}function B(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var u=B(a);if(u!==null)return u}a=a.sibling}return null}var Q,ue=Array.isArray,_e=t.getPublicInstance,de=t.getRootHostContext,M=t.getChildHostContext,j=t.prepareForCommit,N=t.resetAfterCommit,$=t.createInstance,se=t.appendInitialChild,Ce=t.finalizeInitialChildren,Ee=t.prepareUpdate,He=t.shouldSetTextContent,Ie=t.createTextInstance,$e=t.scheduleTimeout,Rt=t.cancelTimeout,Gt=t.noTimeout,dt=t.isPrimaryRenderer,Re=t.supportsMutation,qe=t.supportsPersistence,Ue=t.supportsHydration,Ur=t.getInstanceFromNode,zr=t.preparePortalMount,Ls=t.getCurrentEventPriority,mp=t.detachDeletedInstance,ko=t.supportsMicrotasks,fI=t.scheduleMicrotask,al=t.supportsTestSelectors,pI=t.findFiberRoot,mI=t.getBoundingRect,gI=t.getTextContent,ll=t.isHiddenSubtree,yI=t.matchAccessibilityRole,vI=t.setFocusIfFocusable,_I=t.setupIntersectionObserver,xI=t.appendChild,wI=t.appendChildToContainer,bI=t.commitTextUpdate,EI=t.commitMount,SI=t.commitUpdate,TI=t.insertBefore,AI=t.insertInContainerBefore,CI=t.removeChild,PI=t.removeChildFromContainer,U1=t.resetTextContent,II=t.hideInstance,RI=t.hideTextInstance,kI=t.unhideInstance,MI=t.unhideTextInstance,DI=t.clearContainer,FI=t.cloneInstance,z1=t.createContainerChildSet,G1=t.appendChildToContainerChildSet,NI=t.finalizeContainerChildren,gp=t.replaceContainerChildren,$1=t.cloneHiddenInstance,H1=t.cloneHiddenTextInstance,OI=t.canHydrateInstance,BI=t.canHydrateTextInstance,LI=t.canHydrateSuspenseInstance,j1=t.isSuspenseInstancePending,yp=t.isSuspenseInstanceFallback,UI=t.getSuspenseInstanceFallbackErrorDetails,zI=t.registerSuspenseInstanceRetry,vh=t.getNextHydratableSibling,GI=t.getFirstHydratableChild,$I=t.getFirstHydratableChildWithinContainer,HI=t.getFirstHydratableChildWithinSuspenseInstance,jI=t.hydrateInstance,VI=t.hydrateTextInstance,WI=t.hydrateSuspenseInstance,XI=t.getNextHydratableInstanceAfterSuspenseInstance,YI=t.commitHydratedContainer,QI=t.commitHydratedSuspenseInstance,qI=t.clearSuspenseBoundary,KI=t.clearSuspenseBoundaryFromContainer,ZI=t.shouldDeleteUnhydratedTailInstances,JI=t.didNotMatchHydratedContainerTextInstance,e2=t.didNotMatchHydratedTextInstance;function ul(a){if(Q===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);Q=u&&u[1]||""}return`
`+Q+a}var vp=!1;function _p(a,u){if(!a||vp)return"";vp=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(G){var g=G}Reflect.construct(a,[],u)}else{try{u.call()}catch(G){g=G}a.call(u.prototype)}else{try{throw Error()}catch(G){g=G}a()}}catch(G){if(G&&g&&typeof G.stack=="string"){for(var y=G.stack.split(`
`),S=g.stack.split(`
`),C=y.length-1,I=S.length-1;1<=C&&0<=I&&y[C]!==S[I];)I--;for(;1<=C&&0<=I;C--,I--)if(y[C]!==S[I]){if(C!==1||I!==1)do if(C--,0>--I||y[C]!==S[I]){var O=`
`+y[C].replace(" at new "," at ");return a.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",a.displayName)),O}while(1<=C&&0<=I);break}}}finally{vp=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?ul(a):""}var t2=Object.prototype.hasOwnProperty,xp=[],Mo=-1;function Gi(a){return{current:a}}function tt(a){0>Mo||(a.current=xp[Mo],xp[Mo]=null,Mo--)}function Xe(a,u){Mo++,xp[Mo]=a.current,a.current=u}var $i={},Qt=Gi($i),dr=Gi(!1),Us=$i;function Do(a,u){var d=a.type.contextTypes;if(!d)return $i;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===u)return g.__reactInternalMemoizedMaskedChildContext;var y,S={};for(y in d)S[y]=u[y];return g&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=S),S}function Ar(a){return(a=a.childContextTypes)!=null}function wp(){tt(dr),tt(Qt)}function V1(a,u,d){if(Qt.current!==$i)throw Error(s(168));Xe(Qt,u),Xe(dr,d)}function W1(a,u,d){var g=a.stateNode;if(u=u.childContextTypes,typeof g.getChildContext!="function")return d;for(var y in g=g.getChildContext())if(!(y in u))throw Error(s(108,R(a)||"Unknown",y));return i({},d,g)}function _h(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||$i,Us=Qt.current,Xe(Qt,a),Xe(dr,dr.current),!0}function X1(a,u,d){var g=a.stateNode;if(!g)throw Error(s(169));d?(a=W1(a,u,Us),g.__reactInternalMemoizedMergedChildContext=a,tt(dr),tt(Qt),Xe(Qt,a)):tt(dr),Xe(dr,d)}var an=Math.clz32?Math.clz32:function(a){return(a>>>=0)===0?32:31-(r2(a)/n2|0)|0},r2=Math.log,n2=Math.LN2,bp=64,Ep=4194304;function hl(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&a;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&a;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function xh(a,u){var d=a.pendingLanes;if(d===0)return 0;var g=0,y=a.suspendedLanes,S=a.pingedLanes,C=268435455&d;if(C!==0){var I=C&~y;I!==0?g=hl(I):(S&=C)!==0&&(g=hl(S))}else(C=d&~y)!==0?g=hl(C):S!==0&&(g=hl(S));if(g===0)return 0;if(u!==0&&u!==g&&!(u&y)&&((y=g&-g)>=(S=u&-u)||y===16&&4194240&S))return u;if(4&g&&(g|=16&d),(u=a.entangledLanes)!==0)for(a=a.entanglements,u&=g;0<u;)y=1<<(d=31-an(u)),g|=a[d],u&=~y;return g}function i2(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function Sp(a){return(a=-1073741825&a.pendingLanes)!==0?a:1073741824&a?1073741824:0}function Y1(){var a=bp;return!(4194240&(bp<<=1))&&(bp=64),a}function Tp(a){for(var u=[],d=0;31>d;d++)u.push(a);return u}function cl(a,u,d){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),(a=a.eventTimes)[u=31-an(u)]=d}function Ap(a,u){var d=a.entangledLanes|=u;for(a=a.entanglements;d;){var g=31-an(d),y=1<<g;y&u|a[g]&u&&(a[g]|=u),d&=~y}}var ze=0;function Q1(a){return 1<(a&=-a)?4<a?268435455&a?16:536870912:4:1}var Cp=n.unstable_scheduleCallback,q1=n.unstable_cancelCallback,s2=n.unstable_shouldYield,o2=n.unstable_requestPaint,kt=n.unstable_now,Pp=n.unstable_ImmediatePriority,a2=n.unstable_UserBlockingPriority,K1=n.unstable_NormalPriority,l2=n.unstable_IdlePriority,wh=null,Fn=null,ln=typeof Object.is=="function"?Object.is:function(a,u){return a===u&&(a!==0||1/a==1/u)||a!=a&&u!=u},mi=null,bh=!1,Ip=!1;function Z1(a){mi===null?mi=[a]:mi.push(a)}function Nn(){if(!Ip&&mi!==null){Ip=!0;var a=0,u=ze;try{var d=mi;for(ze=1;a<d.length;a++){var g=d[a];do g=g(!0);while(g!==null)}mi=null,bh=!1}catch(y){throw mi!==null&&(mi=mi.slice(a+1)),Cp(Pp,Nn),y}finally{ze=u,Ip=!1}}return null}var Fo=[],No=0,Eh=null,Sh=0,Gr=[],$r=0,zs=null,On=1,gi="";function Gs(a,u){Fo[No++]=Sh,Fo[No++]=Eh,Eh=a,Sh=u}function J1(a,u,d){Gr[$r++]=On,Gr[$r++]=gi,Gr[$r++]=zs,zs=a;var g=On;a=gi;var y=32-an(g)-1;g&=~(1<<y),d+=1;var S=32-an(u)+y;if(30<S){var C=y-y%5;S=(g&(1<<C)-1).toString(32),g>>=C,y-=C,On=1<<32-an(u)+y|d<<y|g,gi=S+a}else On=1<<S|d<<y|g,gi=a}function Rp(a){a.return!==null&&(Gs(a,1),J1(a,1,0))}function kp(a){for(;a===Eh;)Eh=Fo[--No],Fo[No]=null,Sh=Fo[--No],Fo[No]=null;for(;a===zs;)zs=Gr[--$r],Gr[$r]=null,gi=Gr[--$r],Gr[$r]=null,On=Gr[--$r],Gr[$r]=null}var Cr=null,Hr=null,rt=!1,dl=!1,un=null;function e_(a,u){var d=Yr(5,null,null,0);d.elementType="DELETED",d.stateNode=u,d.return=a,(u=a.deletions)===null?(a.deletions=[d],a.flags|=16):u.push(d)}function t_(a,u){switch(a.tag){case 5:return(u=OI(u,a.type,a.pendingProps))!==null&&(a.stateNode=u,Cr=a,Hr=GI(u),!0);case 6:return(u=BI(u,a.pendingProps))!==null&&(a.stateNode=u,Cr=a,Hr=null,!0);case 13:if((u=LI(u))!==null){var d=zs!==null?{id:On,overflow:gi}:null;return a.memoizedState={dehydrated:u,treeContext:d,retryLane:1073741824},(d=Yr(18,null,null,0)).stateNode=u,d.return=a,a.child=d,Cr=a,Hr=null,!0}return!1;default:return!1}}function Mp(a){return(1&a.mode)!=0&&(128&a.flags)==0}function Dp(a){if(rt){var u=Hr;if(u){var d=u;if(!t_(a,u)){if(Mp(a))throw Error(s(418));u=vh(d);var g=Cr;u&&t_(a,u)?e_(g,d):(a.flags=-4097&a.flags|2,rt=!1,Cr=a)}}else{if(Mp(a))throw Error(s(418));a.flags=-4097&a.flags|2,rt=!1,Cr=a}}}function r_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Cr=a}function Th(a){if(!Ue||a!==Cr)return!1;if(!rt)return r_(a),rt=!0,!1;if(a.tag!==3&&(a.tag!==5||ZI(a.type)&&!He(a.type,a.memoizedProps))){var u=Hr;if(u){if(Mp(a))throw n_(),Error(s(418));for(;u;)e_(a,u),u=vh(u)}}if(r_(a),a.tag===13){if(!Ue)throw Error(s(316));if(!(a=(a=a.memoizedState)!==null?a.dehydrated:null))throw Error(s(317));Hr=XI(a)}else Hr=Cr?vh(a.stateNode):null;return!0}function n_(){for(var a=Hr;a;)a=vh(a)}function Oo(){Ue&&(Hr=Cr=null,dl=rt=!1)}function Fp(a){un===null?un=[a]:un.push(a)}var u2=o.ReactCurrentBatchConfig;function Ah(a,u){if(ln(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var d=Object.keys(a),g=Object.keys(u);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var y=d[g];if(!t2.call(u,y)||!ln(a[y],u[y]))return!1}return!0}function h2(a){switch(a.tag){case 5:return ul(a.type);case 16:return ul("Lazy");case 13:return ul("Suspense");case 19:return ul("SuspenseList");case 0:case 2:case 15:return a=_p(a.type,!1);case 11:return a=_p(a.type.render,!1);case 1:return a=_p(a.type,!0);default:return""}}function hn(a,u){if(a&&a.defaultProps){for(var d in u=i({},u),a=a.defaultProps)u[d]===void 0&&(u[d]=a[d]);return u}return u}var Ch=Gi(null),Ph=null,Bo=null,Np=null;function Op(){Np=Bo=Ph=null}function i_(a,u,d){dt?(Xe(Ch,u._currentValue),u._currentValue=d):(Xe(Ch,u._currentValue2),u._currentValue2=d)}function Bp(a){var u=Ch.current;tt(Ch),dt?a._currentValue=u:a._currentValue2=u}function Lp(a,u,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),a===d)break;a=a.return}}function Lo(a,u){Ph=a,Np=Bo=null,(a=a.dependencies)!==null&&a.firstContext!==null&&(a.lanes&u&&(fr=!0),a.firstContext=null)}function jr(a){var u=dt?a._currentValue:a._currentValue2;if(Np!==a)if(a={context:a,memoizedValue:u,next:null},Bo===null){if(Ph===null)throw Error(s(308));Bo=a,Ph.dependencies={lanes:0,firstContext:a}}else Bo=Bo.next=a;return u}var $s=null;function Up(a){$s===null?$s=[a]:$s.push(a)}function s_(a,u,d,g){var y=u.interleaved;return y===null?(d.next=d,Up(u)):(d.next=y.next,y.next=d),u.interleaved=d,Bn(a,g)}function Bn(a,u){a.lanes|=u;var d=a.alternate;for(d!==null&&(d.lanes|=u),d=a,a=a.return;a!==null;)a.childLanes|=u,(d=a.alternate)!==null&&(d.childLanes|=u),d=a,a=a.return;return d.tag===3?d.stateNode:null}var Hi=!1;function zp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o_(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function yi(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function ji(a,u,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(2&Ne)!=0){var y=g.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),g.pending=u,Bn(a,d)}return(y=g.interleaved)===null?(u.next=u,Up(g)):(u.next=y.next,y.next=u),g.interleaved=u,Bn(a,d)}function Ih(a,u,d){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&d)!=0)){var g=u.lanes;d|=g&=a.pendingLanes,u.lanes=d,Ap(a,d)}}function a_(a,u){var d=a.updateQueue,g=a.alternate;if(g!==null&&d===(g=g.updateQueue)){var y=null,S=null;if((d=d.firstBaseUpdate)!==null){do{var C={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?y=S=C:S=S.next=C,d=d.next}while(d!==null);S===null?y=S=u:S=S.next=u}else y=S=u;return d={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:g.shared,effects:g.effects},void(a.updateQueue=d)}(a=d.lastBaseUpdate)===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=u}function Rh(a,u,d,g){var y=a.updateQueue;Hi=!1;var S=y.firstBaseUpdate,C=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var O=I,G=O.next;O.next=null,C===null?S=G:C.next=G,C=O;var V=a.alternate;V!==null&&(I=(V=V.updateQueue).lastBaseUpdate)!==C&&(I===null?V.firstBaseUpdate=G:I.next=G,V.lastBaseUpdate=O)}if(S!==null){var ie=y.baseState;for(C=0,V=G=O=null,I=S;;){var H=I.lane,J=I.eventTime;if((g&H)===H){V!==null&&(V=V.next={eventTime:J,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var pe=a,Pe=I;switch(H=u,J=d,Pe.tag){case 1:if(typeof(pe=Pe.payload)=="function"){ie=pe.call(J,ie,H);break e}ie=pe;break e;case 3:pe.flags=-65537&pe.flags|128;case 0:if((H=typeof(pe=Pe.payload)=="function"?pe.call(J,ie,H):pe)==null)break e;ie=i({},ie,H);break e;case 2:Hi=!0}}I.callback!==null&&I.lane!==0&&(a.flags|=64,(H=y.effects)===null?y.effects=[I]:H.push(I))}else J={eventTime:J,lane:H,tag:I.tag,payload:I.payload,callback:I.callback,next:null},V===null?(G=V=J,O=ie):V=V.next=J,C|=H;if((I=I.next)===null){if((I=y.shared.pending)===null)break;I=(H=I).next,H.next=null,y.lastBaseUpdate=H,y.shared.pending=null}}if(V===null&&(O=ie),y.baseState=O,y.firstBaseUpdate=G,y.lastBaseUpdate=V,(u=y.shared.interleaved)!==null){y=u;do C|=y.lane,y=y.next;while(y!==u)}else S===null&&(y.shared.lanes=0);js|=C,a.lanes=C,a.memoizedState=ie}}function l_(a,u,d){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var g=a[u],y=g.callback;if(y!==null){if(g.callback=null,g=d,typeof y!="function")throw Error(s(191,y));y.call(g)}}}var u_=new r.Component().refs;function Gp(a,u,d,g){d=(d=d(g,u=a.memoizedState))==null?u:i({},u,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var kh={isMounted:function(a){return!!(a=a._reactInternals)&&k(a)===a},enqueueSetState:function(a,u,d){a=a._reactInternals;var g=Zt(),y=Yi(a),S=yi(g,y);S.payload=u,d!=null&&(S.callback=d),(u=ji(a,S,y))!==null&&(Xr(u,a,y,g),Ih(u,a,y))},enqueueReplaceState:function(a,u,d){a=a._reactInternals;var g=Zt(),y=Yi(a),S=yi(g,y);S.tag=1,S.payload=u,d!=null&&(S.callback=d),(u=ji(a,S,y))!==null&&(Xr(u,a,y,g),Ih(u,a,y))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var d=Zt(),g=Yi(a),y=yi(d,g);y.tag=2,u!=null&&(y.callback=u),(u=ji(a,y,g))!==null&&(Xr(u,a,g,d),Ih(u,a,g))}};function h_(a,u,d,g,y,S,C){return typeof(a=a.stateNode).shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,S,C):!u.prototype||!u.prototype.isPureReactComponent||!Ah(d,g)||!Ah(y,S)}function c_(a,u,d){var g=!1,y=$i,S=u.contextType;return typeof S=="object"&&S!==null?S=jr(S):(y=Ar(u)?Us:Qt.current,S=(g=(g=u.contextTypes)!=null)?Do(a,y):$i),u=new u(d,S),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=kh,a.stateNode=u,u._reactInternals=a,g&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=y,a.__reactInternalMemoizedMaskedChildContext=S),u}function d_(a,u,d,g){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,g),u.state!==a&&kh.enqueueReplaceState(u,u.state,null)}function $p(a,u,d,g){var y=a.stateNode;y.props=d,y.state=a.memoizedState,y.refs=u_,zp(a);var S=u.contextType;typeof S=="object"&&S!==null?y.context=jr(S):(S=Ar(u)?Us:Qt.current,y.context=Do(a,S)),y.state=a.memoizedState,typeof(S=u.getDerivedStateFromProps)=="function"&&(Gp(a,u,S,d),y.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(u=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),u!==y.state&&kh.enqueueReplaceState(y,y.state,null),Rh(a,d,y,g),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308)}function fl(a,u,d){if((a=d.ref)!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner){if(d.tag!==1)throw Error(s(309));var g=d.stateNode}if(!g)throw Error(s(147,a));var y=g,S=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===S?u.ref:(u=function(C){var I=y.refs;I===u_&&(I=y.refs={}),C===null?delete I[S]:I[S]=C},u._stringRef=S,u)}if(typeof a!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,a))}return a}function Mh(a,u){throw a=Object.prototype.toString.call(u),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function f_(a){return(0,a._init)(a._payload)}function p_(a){function u(W,F){if(a){var U=W.deletions;U===null?(W.deletions=[F],W.flags|=16):U.push(F)}}function d(W,F){if(!a)return null;for(;F!==null;)u(W,F),F=F.sibling;return null}function g(W,F){for(W=new Map;F!==null;)F.key!==null?W.set(F.key,F):W.set(F.index,F),F=F.sibling;return W}function y(W,F){return(W=qi(W,F)).index=0,W.sibling=null,W}function S(W,F,U){return W.index=U,a?(U=W.alternate)!==null?(U=U.index)<F?(W.flags|=2,F):U:(W.flags|=2,F):(W.flags|=1048576,F)}function C(W){return a&&W.alternate===null&&(W.flags|=2),W}function I(W,F,U,q){return F===null||F.tag!==6?((F=Pm(U,W.mode,q)).return=W,F):((F=y(F,U)).return=W,F)}function O(W,F,U,q){var xe=U.type;return xe===c?V(W,F,U.props.children,q,U.key):F!==null&&(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===E&&f_(xe)===F.type)?((q=y(F,U.props)).ref=fl(W,F,U),q.return=W,q):((q=ic(U.type,U.key,U.props,null,W.mode,q)).ref=fl(W,F,U),q.return=W,q)}function G(W,F,U,q){return F===null||F.tag!==4||F.stateNode.containerInfo!==U.containerInfo||F.stateNode.implementation!==U.implementation?((F=Im(U,W.mode,q)).return=W,F):((F=y(F,U.children||[])).return=W,F)}function V(W,F,U,q,xe){return F===null||F.tag!==7?((F=Xs(U,W.mode,q,xe)).return=W,F):((F=y(F,U)).return=W,F)}function ie(W,F,U){if(typeof F=="string"&&F!==""||typeof F=="number")return(F=Pm(""+F,W.mode,U)).return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case l:return(U=ic(F.type,F.key,F.props,null,W.mode,U)).ref=fl(W,null,F),U.return=W,U;case h:return(F=Im(F,W.mode,U)).return=W,F;case E:return ie(W,(0,F._init)(F._payload),U)}if(ue(F)||P(F))return(F=Xs(F,W.mode,U,null)).return=W,F;Mh(W,F)}return null}function H(W,F,U,q){var xe=F!==null?F.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return xe!==null?null:I(W,F,""+U,q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case l:return U.key===xe?O(W,F,U,q):null;case h:return U.key===xe?G(W,F,U,q):null;case E:return H(W,F,(xe=U._init)(U._payload),q)}if(ue(U)||P(U))return xe!==null?null:V(W,F,U,q,null);Mh(W,U)}return null}function J(W,F,U,q,xe){if(typeof q=="string"&&q!==""||typeof q=="number")return I(F,W=W.get(U)||null,""+q,xe);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case l:return O(F,W=W.get(q.key===null?U:q.key)||null,q,xe);case h:return G(F,W=W.get(q.key===null?U:q.key)||null,q,xe);case E:return J(W,F,U,(0,q._init)(q._payload),xe)}if(ue(q)||P(q))return V(F,W=W.get(U)||null,q,xe,null);Mh(F,q)}return null}function pe(W,F,U,q){for(var xe=null,je=null,ge=F,Ge=F=0,Ht=null;ge!==null&&Ge<U.length;Ge++){ge.index>Ge?(Ht=ge,ge=null):Ht=ge.sibling;var Ve=H(W,ge,U[Ge],q);if(Ve===null){ge===null&&(ge=Ht);break}a&&ge&&Ve.alternate===null&&u(W,ge),F=S(Ve,F,Ge),je===null?xe=Ve:je.sibling=Ve,je=Ve,ge=Ht}if(Ge===U.length)return d(W,ge),rt&&Gs(W,Ge),xe;if(ge===null){for(;Ge<U.length;Ge++)(ge=ie(W,U[Ge],q))!==null&&(F=S(ge,F,Ge),je===null?xe=ge:je.sibling=ge,je=ge);return rt&&Gs(W,Ge),xe}for(ge=g(W,ge);Ge<U.length;Ge++)(Ht=J(ge,W,Ge,U[Ge],q))!==null&&(a&&Ht.alternate!==null&&ge.delete(Ht.key===null?Ge:Ht.key),F=S(Ht,F,Ge),je===null?xe=Ht:je.sibling=Ht,je=Ht);return a&&ge.forEach(function(Ki){return u(W,Ki)}),rt&&Gs(W,Ge),xe}function Pe(W,F,U,q){var xe=P(U);if(typeof xe!="function")throw Error(s(150));if((U=xe.call(U))==null)throw Error(s(151));for(var je=xe=null,ge=F,Ge=F=0,Ht=null,Ve=U.next();ge!==null&&!Ve.done;Ge++,Ve=U.next()){ge.index>Ge?(Ht=ge,ge=null):Ht=ge.sibling;var Ki=H(W,ge,Ve.value,q);if(Ki===null){ge===null&&(ge=Ht);break}a&&ge&&Ki.alternate===null&&u(W,ge),F=S(Ki,F,Ge),je===null?xe=Ki:je.sibling=Ki,je=Ki,ge=Ht}if(Ve.done)return d(W,ge),rt&&Gs(W,Ge),xe;if(ge===null){for(;!Ve.done;Ge++,Ve=U.next())(Ve=ie(W,Ve.value,q))!==null&&(F=S(Ve,F,Ge),je===null?xe=Ve:je.sibling=Ve,je=Ve);return rt&&Gs(W,Ge),xe}for(ge=g(W,ge);!Ve.done;Ge++,Ve=U.next())(Ve=J(ge,W,Ge,Ve.value,q))!==null&&(a&&Ve.alternate!==null&&ge.delete(Ve.key===null?Ge:Ve.key),F=S(Ve,F,Ge),je===null?xe=Ve:je.sibling=Ve,je=Ve);return a&&ge.forEach(function(F2){return u(W,F2)}),rt&&Gs(W,Ge),xe}return function W(F,U,q,xe){if(typeof q=="object"&&q!==null&&q.type===c&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case l:e:{for(var je=q.key,ge=U;ge!==null;){if(ge.key===je){if((je=q.type)===c){if(ge.tag===7){d(F,ge.sibling),(U=y(ge,q.props.children)).return=F,F=U;break e}}else if(ge.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===E&&f_(je)===ge.type){d(F,ge.sibling),(U=y(ge,q.props)).ref=fl(F,ge,q),U.return=F,F=U;break e}d(F,ge);break}u(F,ge),ge=ge.sibling}q.type===c?((U=Xs(q.props.children,F.mode,xe,q.key)).return=F,F=U):((xe=ic(q.type,q.key,q.props,null,F.mode,xe)).ref=fl(F,U,q),xe.return=F,F=xe)}return C(F);case h:e:{for(ge=q.key;U!==null;){if(U.key===ge){if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){d(F,U.sibling),(U=y(U,q.children||[])).return=F,F=U;break e}d(F,U);break}u(F,U),U=U.sibling}(U=Im(q,F.mode,xe)).return=F,F=U}return C(F);case E:return W(F,U,(ge=q._init)(q._payload),xe)}if(ue(q))return pe(F,U,q,xe);if(P(q))return Pe(F,U,q,xe);Mh(F,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,U!==null&&U.tag===6?(d(F,U.sibling),(U=y(U,q)).return=F,F=U):(d(F,U),(U=Pm(q,F.mode,xe)).return=F,F=U),C(F)):d(F,U)}}var Uo=p_(!0),m_=p_(!1),pl={},Vr=Gi(pl),ml=Gi(pl),zo=Gi(pl);function Ln(a){if(a===pl)throw Error(s(174));return a}function Hp(a,u){Xe(zo,u),Xe(ml,a),Xe(Vr,pl),a=de(u),tt(Vr),Xe(Vr,a)}function Go(){tt(Vr),tt(ml),tt(zo)}function g_(a){var u=Ln(zo.current),d=Ln(Vr.current);d!==(u=M(d,a.type,u))&&(Xe(ml,a),Xe(Vr,u))}function jp(a){ml.current===a&&(tt(Vr),tt(ml))}var ft=Gi(0);function Dh(a){for(var u=a;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&((d=d.dehydrated)===null||j1(d)||yp(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(128&u.flags)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Vp=[];function Wp(){for(var a=0;a<Vp.length;a++){var u=Vp[a];dt?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}Vp.length=0}var Fh=o.ReactCurrentDispatcher,Xp=o.ReactCurrentBatchConfig,Hs=0,ot=null,Mt=null,Dt=null,Nh=!1,gl=!1,yl=0,c2=0;function qt(){throw Error(s(321))}function Yp(a,u){if(u===null)return!1;for(var d=0;d<u.length&&d<a.length;d++)if(!ln(a[d],u[d]))return!1;return!0}function Qp(a,u,d,g,y,S){if(Hs=S,ot=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Fh.current=a===null||a.memoizedState===null?m2:g2,a=d(g,y),gl){S=0;do{if(gl=!1,yl=0,25<=S)throw Error(s(301));S+=1,Dt=Mt=null,u.updateQueue=null,Fh.current=y2,a=d(g,y)}while(gl)}if(Fh.current=Lh,u=Mt!==null&&Mt.next!==null,Hs=0,Dt=Mt=ot=null,Nh=!1,u)throw Error(s(300));return a}function qp(){var a=yl!==0;return yl=0,a}function Un(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ot.memoizedState=Dt=a:Dt=Dt.next=a,Dt}function Wr(){if(Mt===null){var a=ot.alternate;a=a!==null?a.memoizedState:null}else a=Mt.next;var u=Dt===null?ot.memoizedState:Dt.next;if(u!==null)Dt=u,Mt=a;else{if(a===null)throw Error(s(310));a={memoizedState:(Mt=a).memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Dt===null?ot.memoizedState=Dt=a:Dt=Dt.next=a}return Dt}function vl(a,u){return typeof u=="function"?u(a):u}function Kp(a){var u=Wr(),d=u.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var g=Mt,y=g.baseQueue,S=d.pending;if(S!==null){if(y!==null){var C=y.next;y.next=S.next,S.next=C}g.baseQueue=y=S,d.pending=null}if(y!==null){S=y.next,g=g.baseState;var I=C=null,O=null,G=S;do{var V=G.lane;if((Hs&V)===V)O!==null&&(O=O.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),g=G.hasEagerState?G.eagerState:a(g,G.action);else{var ie={lane:V,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};O===null?(I=O=ie,C=g):O=O.next=ie,ot.lanes|=V,js|=V}G=G.next}while(G!==null&&G!==S);O===null?C=g:O.next=I,ln(g,u.memoizedState)||(fr=!0),u.memoizedState=g,u.baseState=C,u.baseQueue=O,d.lastRenderedState=g}if((a=d.interleaved)!==null){y=a;do S=y.lane,ot.lanes|=S,js|=S,y=y.next;while(y!==a)}else y===null&&(d.lanes=0);return[u.memoizedState,d.dispatch]}function Zp(a){var u=Wr(),d=u.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var g=d.dispatch,y=d.pending,S=u.memoizedState;if(y!==null){d.pending=null;var C=y=y.next;do S=a(S,C.action),C=C.next;while(C!==y);ln(S,u.memoizedState)||(fr=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),d.lastRenderedState=S}return[S,g]}function y_(){}function v_(a,u){var d=ot,g=Wr(),y=u(),S=!ln(g.memoizedState,y);if(S&&(g.memoizedState=y,fr=!0),g=g.queue,Jp(w_.bind(null,d,g,a),[a]),g.getSnapshot!==u||S||Dt!==null&&1&Dt.memoizedState.tag){if(d.flags|=2048,_l(9,x_.bind(null,d,g,y,u),void 0,null),Ft===null)throw Error(s(349));30&Hs||__(d,u,y)}return y}function __(a,u,d){a.flags|=16384,a={getSnapshot:u,value:d},(u=ot.updateQueue)===null?(u={lastEffect:null,stores:null},ot.updateQueue=u,u.stores=[a]):(d=u.stores)===null?u.stores=[a]:d.push(a)}function x_(a,u,d,g){u.value=d,u.getSnapshot=g,b_(u)&&E_(a)}function w_(a,u,d){return d(function(){b_(u)&&E_(a)})}function b_(a){var u=a.getSnapshot;a=a.value;try{var d=u();return!ln(a,d)}catch{return!0}}function E_(a){var u=Bn(a,1);u!==null&&Xr(u,a,1,-1)}function S_(a){var u=Un();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:a},u.queue=a,a=a.dispatch=p2.bind(null,ot,a),[u.memoizedState,a]}function _l(a,u,d,g){return a={tag:a,create:u,destroy:d,deps:g,next:null},(u=ot.updateQueue)===null?(u={lastEffect:null,stores:null},ot.updateQueue=u,u.lastEffect=a.next=a):(d=u.lastEffect)===null?u.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,u.lastEffect=a),a}function T_(){return Wr().memoizedState}function Oh(a,u,d,g){var y=Un();ot.flags|=a,y.memoizedState=_l(1|u,d,void 0,g===void 0?null:g)}function Bh(a,u,d,g){var y=Wr();g=g===void 0?null:g;var S=void 0;if(Mt!==null){var C=Mt.memoizedState;if(S=C.destroy,g!==null&&Yp(g,C.deps))return void(y.memoizedState=_l(u,d,S,g))}ot.flags|=a,y.memoizedState=_l(1|u,d,S,g)}function A_(a,u){return Oh(8390656,8,a,u)}function Jp(a,u){return Bh(2048,8,a,u)}function C_(a,u){return Bh(4,2,a,u)}function P_(a,u){return Bh(4,4,a,u)}function I_(a,u){return typeof u=="function"?(a=a(),u(a),function(){u(null)}):u!=null?(a=a(),u.current=a,function(){u.current=null}):void 0}function R_(a,u,d){return d=d!=null?d.concat([a]):null,Bh(4,4,I_.bind(null,u,a),d)}function em(){}function k_(a,u){var d=Wr();u=u===void 0?null:u;var g=d.memoizedState;return g!==null&&u!==null&&Yp(u,g[1])?g[0]:(d.memoizedState=[a,u],a)}function M_(a,u){var d=Wr();u=u===void 0?null:u;var g=d.memoizedState;return g!==null&&u!==null&&Yp(u,g[1])?g[0]:(a=a(),d.memoizedState=[a,u],a)}function D_(a,u,d){return 21&Hs?(ln(d,u)||(d=Y1(),ot.lanes|=d,js|=d,a.baseState=!0),u):(a.baseState&&(a.baseState=!1,fr=!0),a.memoizedState=d)}function d2(a,u){var d=ze;ze=d!==0&&4>d?d:4,a(!0);var g=Xp.transition;Xp.transition={};try{a(!1),u()}finally{ze=d,Xp.transition=g}}function F_(){return Wr().memoizedState}function f2(a,u,d){var g=Yi(a);d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},N_(a)?O_(u,d):(d=s_(a,u,d,g))!==null&&(Xr(d,a,g,Zt()),B_(d,u,g))}function p2(a,u,d){var g=Yi(a),y={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(N_(a))O_(u,y);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer)!==null)try{var C=u.lastRenderedState,I=S(C,d);if(y.hasEagerState=!0,y.eagerState=I,ln(I,C)){var O=u.interleaved;return O===null?(y.next=y,Up(u)):(y.next=O.next,O.next=y),void(u.interleaved=y)}}catch{}(d=s_(a,u,y,g))!==null&&(Xr(d,a,g,y=Zt()),B_(d,u,g))}}function N_(a){var u=a.alternate;return a===ot||u!==null&&u===ot}function O_(a,u){gl=Nh=!0;var d=a.pending;d===null?u.next=u:(u.next=d.next,d.next=u),a.pending=u}function B_(a,u,d){if(4194240&d){var g=u.lanes;d|=g&=a.pendingLanes,u.lanes=d,Ap(a,d)}}var Lh={readContext:jr,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},m2={readContext:jr,useCallback:function(a,u){return Un().memoizedState=[a,u===void 0?null:u],a},useContext:jr,useEffect:A_,useImperativeHandle:function(a,u,d){return d=d!=null?d.concat([a]):null,Oh(4194308,4,I_.bind(null,u,a),d)},useLayoutEffect:function(a,u){return Oh(4194308,4,a,u)},useInsertionEffect:function(a,u){return Oh(4,2,a,u)},useMemo:function(a,u){var d=Un();return u=u===void 0?null:u,a=a(),d.memoizedState=[a,u],a},useReducer:function(a,u,d){var g=Un();return u=d!==void 0?d(u):u,g.memoizedState=g.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},g.queue=a,a=a.dispatch=f2.bind(null,ot,a),[g.memoizedState,a]},useRef:function(a){return a={current:a},Un().memoizedState=a},useState:S_,useDebugValue:em,useDeferredValue:function(a){return Un().memoizedState=a},useTransition:function(){var a=S_(!1),u=a[0];return a=d2.bind(null,a[1]),Un().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,d){var g=ot,y=Un();if(rt){if(d===void 0)throw Error(s(407));d=d()}else{if(d=u(),Ft===null)throw Error(s(349));30&Hs||__(g,u,d)}y.memoizedState=d;var S={value:d,getSnapshot:u};return y.queue=S,A_(w_.bind(null,g,S,a),[a]),g.flags|=2048,_l(9,x_.bind(null,g,S,d,u),void 0,null),d},useId:function(){var a=Un(),u=Ft.identifierPrefix;if(rt){var d=gi;u=":"+u+"R"+(d=(On&~(1<<32-an(On)-1)).toString(32)+d),0<(d=yl++)&&(u+="H"+d.toString(32)),u+=":"}else u=":"+u+"r"+(d=c2++).toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},g2={readContext:jr,useCallback:k_,useContext:jr,useEffect:Jp,useImperativeHandle:R_,useInsertionEffect:C_,useLayoutEffect:P_,useMemo:M_,useReducer:Kp,useRef:T_,useState:function(){return Kp(vl)},useDebugValue:em,useDeferredValue:function(a){return D_(Wr(),Mt.memoizedState,a)},useTransition:function(){return[Kp(vl)[0],Wr().memoizedState]},useMutableSource:y_,useSyncExternalStore:v_,useId:F_,unstable_isNewReconciler:!1},y2={readContext:jr,useCallback:k_,useContext:jr,useEffect:Jp,useImperativeHandle:R_,useInsertionEffect:C_,useLayoutEffect:P_,useMemo:M_,useReducer:Zp,useRef:T_,useState:function(){return Zp(vl)},useDebugValue:em,useDeferredValue:function(a){var u=Wr();return Mt===null?u.memoizedState=a:D_(u,Mt.memoizedState,a)},useTransition:function(){return[Zp(vl)[0],Wr().memoizedState]},useMutableSource:y_,useSyncExternalStore:v_,useId:F_,unstable_isNewReconciler:!1};function $o(a,u){try{var d="",g=u;do d+=h2(g),g=g.return;while(g);var y=d}catch(S){y=`
Error generating stack: `+S.message+`
`+S.stack}return{value:a,source:u,stack:y,digest:null}}function tm(a,u,d){return{value:a,source:null,stack:d??null,digest:u??null}}function rm(a,u){try{console.error(u.value)}catch(d){setTimeout(function(){throw d})}}var v2=typeof WeakMap=="function"?WeakMap:Map;function L_(a,u,d){(d=yi(-1,d)).tag=3,d.payload={element:null};var g=u.value;return d.callback=function(){Zh||(Zh=!0,wm=g),rm(0,u)},d}function U_(a,u,d){(d=yi(-1,d)).tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;d.payload=function(){return g(y)},d.callback=function(){rm(0,u)}}var S=a.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){rm(0,u),typeof g!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})}),d}function z_(a,u,d){var g=a.pingCache;if(g===null){g=a.pingCache=new v2;var y=new Set;g.set(u,y)}else(y=g.get(u))===void 0&&(y=new Set,g.set(u,y));y.has(d)||(y.add(d),a=C2.bind(null,a,u,d),u.then(a,a))}function G_(a){do{var u;if((u=a.tag===13)&&(u=(u=a.memoizedState)===null||u.dehydrated!==null),u)return a;a=a.return}while(a!==null);return null}function $_(a,u,d,g,y){return 1&a.mode?(a.flags|=65536,a.lanes=y,a):(a===u?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:((u=yi(-1,1)).tag=2,ji(d,u,1))),d.lanes|=1),a)}var _2=o.ReactCurrentOwner,fr=!1;function pr(a,u,d,g){u.child=a===null?m_(u,null,d,g):Uo(u,a.child,d,g)}function H_(a,u,d,g,y){d=d.render;var S=u.ref;return Lo(u,y),g=Qp(a,u,d,g,S,y),d=qp(),a===null||fr?(rt&&d&&Rp(u),u.flags|=1,pr(a,u,g,y),u.child):(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~y,vi(a,u,y))}function j_(a,u,d,g,y){if(a===null){var S=d.type;return typeof S!="function"||Cm(S)||S.defaultProps!==void 0||d.compare!==null||d.defaultProps!==void 0?((a=ic(d.type,null,g,u,u.mode,y)).ref=u.ref,a.return=u,u.child=a):(u.tag=15,u.type=S,V_(a,u,S,g,y))}if(S=a.child,(a.lanes&y)==0){var C=S.memoizedProps;if((d=(d=d.compare)!==null?d:Ah)(C,g)&&a.ref===u.ref)return vi(a,u,y)}return u.flags|=1,(a=qi(S,g)).ref=u.ref,a.return=u,u.child=a}function V_(a,u,d,g,y){if(a!==null){var S=a.memoizedProps;if(Ah(S,g)&&a.ref===u.ref){if(fr=!1,u.pendingProps=g=S,(a.lanes&y)==0)return u.lanes=a.lanes,vi(a,u,y);131072&a.flags&&(fr=!0)}}return nm(a,u,d,g,y)}function W_(a,u,d){var g=u.pendingProps,y=g.children,S=a!==null?a.memoizedState:null;if(g.mode==="hidden")if(!(1&u.mode))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(jo,Pr),Pr|=d;else{if(!(1073741824&d))return a=S!==null?S.baseLanes|d:d,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,Xe(jo,Pr),Pr|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:d,Xe(jo,Pr),Pr|=g}else S!==null?(g=S.baseLanes|d,u.memoizedState=null):g=d,Xe(jo,Pr),Pr|=g;return pr(a,u,y,d),u.child}function X_(a,u){var d=u.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(u.flags|=512,u.flags|=2097152)}function nm(a,u,d,g,y){var S=Ar(d)?Us:Qt.current;return S=Do(u,S),Lo(u,y),d=Qp(a,u,d,g,S,y),g=qp(),a===null||fr?(rt&&g&&Rp(u),u.flags|=1,pr(a,u,d,y),u.child):(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~y,vi(a,u,y))}function Y_(a,u,d,g,y){if(Ar(d)){var S=!0;_h(u)}else S=!1;if(Lo(u,y),u.stateNode===null)$h(a,u),c_(u,d,g),$p(u,d,g,y),g=!0;else if(a===null){var C=u.stateNode,I=u.memoizedProps;C.props=I;var O=C.context,G=d.contextType;typeof G=="object"&&G!==null?G=jr(G):G=Do(u,G=Ar(d)?Us:Qt.current);var V=d.getDerivedStateFromProps,ie=typeof V=="function"||typeof C.getSnapshotBeforeUpdate=="function";ie||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(I!==g||O!==G)&&d_(u,C,g,G),Hi=!1;var H=u.memoizedState;C.state=H,Rh(u,g,C,y),O=u.memoizedState,I!==g||H!==O||dr.current||Hi?(typeof V=="function"&&(Gp(u,d,V,g),O=u.memoizedState),(I=Hi||h_(u,d,I,g,H,O,G))?(ie||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=O),C.props=g,C.state=O,C.context=G,g=I):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{C=u.stateNode,o_(a,u),I=u.memoizedProps,G=u.type===u.elementType?I:hn(u.type,I),C.props=G,ie=u.pendingProps,H=C.context,typeof(O=d.contextType)=="object"&&O!==null?O=jr(O):O=Do(u,O=Ar(d)?Us:Qt.current);var J=d.getDerivedStateFromProps;(V=typeof J=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(I!==ie||H!==O)&&d_(u,C,g,O),Hi=!1,H=u.memoizedState,C.state=H,Rh(u,g,C,y);var pe=u.memoizedState;I!==ie||H!==pe||dr.current||Hi?(typeof J=="function"&&(Gp(u,d,J,g),pe=u.memoizedState),(G=Hi||h_(u,d,G,g,H,pe,O)||!1)?(V||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,pe,O),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,pe,O)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||I===a.memoizedProps&&H===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||I===a.memoizedProps&&H===a.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=pe),C.props=g,C.state=pe,C.context=O,g=G):(typeof C.componentDidUpdate!="function"||I===a.memoizedProps&&H===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||I===a.memoizedProps&&H===a.memoizedState||(u.flags|=1024),g=!1)}return im(a,u,d,g,S,y)}function im(a,u,d,g,y,S){X_(a,u);var C=(128&u.flags)!=0;if(!g&&!C)return y&&X1(u,d,!1),vi(a,u,S);g=u.stateNode,_2.current=u;var I=C&&typeof d.getDerivedStateFromError!="function"?null:g.render();return u.flags|=1,a!==null&&C?(u.child=Uo(u,a.child,null,S),u.child=Uo(u,null,I,S)):pr(a,u,I,S),u.memoizedState=g.state,y&&X1(u,d,!0),u.child}function Q_(a){var u=a.stateNode;u.pendingContext?V1(0,u.pendingContext,u.pendingContext!==u.context):u.context&&V1(0,u.context,!1),Hp(a,u.containerInfo)}function q_(a,u,d,g,y){return Oo(),Fp(y),u.flags|=256,pr(a,u,d,g),u.child}var xl,wl,Uh,zh,sm={dehydrated:null,treeContext:null,retryLane:0};function om(a){return{baseLanes:a,cachePool:null,transitions:null}}function K_(a,u,d){var g,y=u.pendingProps,S=ft.current,C=!1,I=(128&u.flags)!=0;if((g=I)||(g=(a===null||a.memoizedState!==null)&&(2&S)!=0),g?(C=!0,u.flags&=-129):a!==null&&a.memoizedState===null||(S|=1),Xe(ft,1&S),a===null)return Dp(u),(a=u.memoizedState)!==null&&(a=a.dehydrated)!==null?(1&u.mode?yp(a)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(I=y.children,a=y.fallback,C?(y=u.mode,C=u.child,I={mode:"hidden",children:I},!(1&y)&&C!==null?(C.childLanes=0,C.pendingProps=I):C=sc(I,y,0,null),a=Xs(a,y,d,null),C.return=u,a.return=u,C.sibling=a,u.child=C,u.child.memoizedState=om(d),u.memoizedState=sm,a):am(u,I));if((S=a.memoizedState)!==null&&(g=S.dehydrated)!==null)return function(G,V,ie,H,J,pe,Pe){if(ie)return 256&V.flags?(V.flags&=-257,Gh(G,V,Pe,H=tm(Error(s(422))))):V.memoizedState!==null?(V.child=G.child,V.flags|=128,null):(pe=H.fallback,J=V.mode,H=sc({mode:"visible",children:H.children},J,0,null),(pe=Xs(pe,J,Pe,null)).flags|=2,H.return=V,pe.return=V,H.sibling=pe,V.child=H,1&V.mode&&Uo(V,G.child,null,Pe),V.child.memoizedState=om(Pe),V.memoizedState=sm,pe);if(!(1&V.mode))return Gh(G,V,Pe,null);if(yp(J))return H=UI(J).digest,pe=Error(s(419)),H=tm(pe,H,void 0),Gh(G,V,Pe,H);if(ie=(Pe&G.childLanes)!=0,fr||ie){if((H=Ft)!==null){switch(Pe&-Pe){case 4:J=2;break;case 16:J=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:J=32;break;case 536870912:J=268435456;break;default:J=0}(J=J&(H.suspendedLanes|Pe)?0:J)!==0&&J!==pe.retryLane&&(pe.retryLane=J,Bn(G,J),Xr(H,G,J,-1))}return Am(),Gh(G,V,Pe,H=tm(Error(s(421))))}return j1(J)?(V.flags|=128,V.child=G.child,V=P2.bind(null,G),zI(J,V),null):(G=pe.treeContext,Ue&&(Hr=HI(J),Cr=V,rt=!0,un=null,dl=!1,G!==null&&(Gr[$r++]=On,Gr[$r++]=gi,Gr[$r++]=zs,On=G.id,gi=G.overflow,zs=V)),V=am(V,H.children),V.flags|=4096,V)}(a,u,I,y,g,S,d);if(C){C=y.fallback,I=u.mode,g=(S=a.child).sibling;var O={mode:"hidden",children:y.children};return!(1&I)&&u.child!==S?((y=u.child).childLanes=0,y.pendingProps=O,u.deletions=null):(y=qi(S,O)).subtreeFlags=14680064&S.subtreeFlags,g!==null?C=qi(g,C):(C=Xs(C,I,d,null)).flags|=2,C.return=u,y.return=u,y.sibling=C,u.child=y,y=C,C=u.child,I=(I=a.child.memoizedState)===null?om(d):{baseLanes:I.baseLanes|d,cachePool:null,transitions:I.transitions},C.memoizedState=I,C.childLanes=a.childLanes&~d,u.memoizedState=sm,y}return a=(C=a.child).sibling,y=qi(C,{mode:"visible",children:y.children}),!(1&u.mode)&&(y.lanes=d),y.return=u,y.sibling=null,a!==null&&((d=u.deletions)===null?(u.deletions=[a],u.flags|=16):d.push(a)),u.child=y,u.memoizedState=null,y}function am(a,u){return(u=sc({mode:"visible",children:u},a.mode,0,null)).return=a,a.child=u}function Gh(a,u,d,g){return g!==null&&Fp(g),Uo(u,a.child,null,d),(a=am(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,a}function Z_(a,u,d){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u),Lp(a.return,u,d)}function lm(a,u,d,g,y){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:y}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=d,S.tailMode=y)}function J_(a,u,d){var g=u.pendingProps,y=g.revealOrder,S=g.tail;if(pr(a,u,g.children,d),(2&(g=ft.current))!=0)g=1&g|2,u.flags|=128;else{if(a!==null&&128&a.flags)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Z_(a,d,u);else if(a.tag===19)Z_(a,d,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(Xe(ft,g),(1&u.mode)==0)u.memoizedState=null;else switch(y){case"forwards":for(d=u.child,y=null;d!==null;)(a=d.alternate)!==null&&Dh(a)===null&&(y=d),d=d.sibling;(d=y)===null?(y=u.child,u.child=null):(y=d.sibling,d.sibling=null),lm(u,!1,y,d,S);break;case"backwards":for(d=null,y=u.child,u.child=null;y!==null;){if((a=y.alternate)!==null&&Dh(a)===null){u.child=y;break}a=y.sibling,y.sibling=d,d=y,y=a}lm(u,!0,d,null,S);break;case"together":lm(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function $h(a,u){!(1&u.mode)&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function vi(a,u,d){if(a!==null&&(u.dependencies=a.dependencies),js|=u.lanes,(d&u.childLanes)==0)return null;if(a!==null&&u.child!==a.child)throw Error(s(153));if(u.child!==null){for(d=qi(a=u.child,a.pendingProps),u.child=d,d.return=u;a.sibling!==null;)a=a.sibling,(d=d.sibling=qi(a,a.pendingProps)).return=u;d.sibling=null}return u.child}function zn(a){a.flags|=4}function ex(a,u){if(a!==null&&a.child===u.child)return!0;if(16&u.flags)return!1;for(a=u.child;a!==null;){if(12854&a.flags||12854&a.subtreeFlags)return!1;a=a.sibling}return!0}if(Re)xl=function(a,u){for(var d=u.child;d!==null;){if(d.tag===5||d.tag===6)se(a,d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},wl=function(){},Uh=function(a,u,d,g,y){if((a=a.memoizedProps)!==g){var S=u.stateNode,C=Ln(Vr.current);d=Ee(S,d,a,g,y,C),(u.updateQueue=d)&&zn(u)}},zh=function(a,u,d,g){d!==g&&zn(u)};else if(qe){xl=function(a,u,d,g){for(var y=u.child;y!==null;){if(y.tag===5){var S=y.stateNode;d&&g&&(S=$1(S,y.type,y.memoizedProps,y)),se(a,S)}else if(y.tag===6)S=y.stateNode,d&&g&&(S=H1(S,y.memoizedProps,y)),se(a,S);else if(y.tag!==4){if(y.tag===22&&y.memoizedState!==null)(S=y.child)!==null&&(S.return=y),xl(a,y,!0,!0);else if(y.child!==null){y.child.return=y,y=y.child;continue}}if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return}y.sibling.return=y.return,y=y.sibling}};var tx=function(a,u,d,g){for(var y=u.child;y!==null;){if(y.tag===5){var S=y.stateNode;d&&g&&(S=$1(S,y.type,y.memoizedProps,y)),G1(a,S)}else if(y.tag===6)S=y.stateNode,d&&g&&(S=H1(S,y.memoizedProps,y)),G1(a,S);else if(y.tag!==4){if(y.tag===22&&y.memoizedState!==null)(S=y.child)!==null&&(S.return=y),tx(a,y,!0,!0);else if(y.child!==null){y.child.return=y,y=y.child;continue}}if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return}y.sibling.return=y.return,y=y.sibling}};wl=function(a,u){var d=u.stateNode;if(!ex(a,u)){a=d.containerInfo;var g=z1(a);tx(g,u,!1,!1),d.pendingChildren=g,zn(u),NI(a,g)}},Uh=function(a,u,d,g,y){var S=a.stateNode,C=a.memoizedProps;if((a=ex(a,u))&&C===g)u.stateNode=S;else{var I=u.stateNode,O=Ln(Vr.current),G=null;C!==g&&(G=Ee(I,d,C,g,y,O)),a&&G===null?u.stateNode=S:(S=FI(S,G,d,C,g,u,a,I),Ce(S,d,g,y,O)&&zn(u),u.stateNode=S,a?zn(u):xl(S,u,!1,!1))}},zh=function(a,u,d,g){d!==g?(a=Ln(zo.current),d=Ln(Vr.current),u.stateNode=Ie(g,a,d,u),zn(u)):u.stateNode=a.stateNode}}else wl=function(){},Uh=function(){},zh=function(){};function bl(a,u){if(!rt)switch(a.tailMode){case"hidden":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function ir(a){var u=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(u)for(var y=a.child;y!==null;)d|=y.lanes|y.childLanes,g|=14680064&y.subtreeFlags,g|=14680064&y.flags,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)d|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=g,a.childLanes=d,u}function x2(a,u,d){var g=u.pendingProps;switch(kp(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(u),null;case 1:case 17:return Ar(u.type)&&wp(),ir(u),null;case 3:return d=u.stateNode,Go(),tt(dr),tt(Qt),Wp(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),a!==null&&a.child!==null||(Th(u)?zn(u):a===null||a.memoizedState.isDehydrated&&!(256&u.flags)||(u.flags|=1024,un!==null&&(Sm(un),un=null))),wl(a,u),ir(u),null;case 5:jp(u),d=Ln(zo.current);var y=u.type;if(a!==null&&u.stateNode!=null)Uh(a,u,y,g,d),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!g){if(u.stateNode===null)throw Error(s(166));return ir(u),null}if(a=Ln(Vr.current),Th(u)){if(!Ue)throw Error(s(175));a=jI(u.stateNode,u.type,u.memoizedProps,d,a,u,!dl),u.updateQueue=a,a!==null&&zn(u)}else{var S=$(y,g,d,a,u);xl(S,u,!1,!1),u.stateNode=S,Ce(S,y,g,d,a)&&zn(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return ir(u),null;case 6:if(a&&u.stateNode!=null)zh(a,u,a.memoizedProps,g);else{if(typeof g!="string"&&u.stateNode===null)throw Error(s(166));if(a=Ln(zo.current),d=Ln(Vr.current),Th(u)){if(!Ue)throw Error(s(176));if(a=u.stateNode,d=u.memoizedProps,(g=VI(a,d,u,!dl))&&(y=Cr)!==null)switch(y.tag){case 3:JI(y.stateNode.containerInfo,a,d,(1&y.mode)!=0);break;case 5:e2(y.type,y.memoizedProps,y.stateNode,a,d,(1&y.mode)!=0)}g&&zn(u)}else u.stateNode=Ie(g,a,d,u)}return ir(u),null;case 13:if(tt(ft),g=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(rt&&Hr!==null&&1&u.mode&&!(128&u.flags))n_(),Oo(),u.flags|=98560,y=!1;else if(y=Th(u),g!==null&&g.dehydrated!==null){if(a===null){if(!y)throw Error(s(318));if(!Ue)throw Error(s(344));if(!(y=(y=u.memoizedState)!==null?y.dehydrated:null))throw Error(s(317));WI(y,u)}else Oo(),!(128&u.flags)&&(u.memoizedState=null),u.flags|=4;ir(u),y=!1}else un!==null&&(Sm(un),un=null),y=!0;if(!y)return 65536&u.flags?u:null}return 128&u.flags?(u.lanes=d,u):((d=g!==null)!=(a!==null&&a.memoizedState!==null)&&d&&(u.child.flags|=8192,1&u.mode&&(a===null||1&ft.current?Tt===0&&(Tt=3):Am())),u.updateQueue!==null&&(u.flags|=4),ir(u),null);case 4:return Go(),wl(a,u),a===null&&zr(u.stateNode.containerInfo),ir(u),null;case 10:return Bp(u.type._context),ir(u),null;case 19:if(tt(ft),(y=u.memoizedState)===null)return ir(u),null;if(g=(128&u.flags)!=0,(S=y.rendering)===null)if(g)bl(y,!1);else{if(Tt!==0||a!==null&&128&a.flags)for(a=u.child;a!==null;){if((S=Dh(a))!==null){for(u.flags|=128,bl(y,!1),(a=S.updateQueue)!==null&&(u.updateQueue=a,u.flags|=4),u.subtreeFlags=0,a=d,d=u.child;d!==null;)y=a,(g=d).flags&=14680066,(S=g.alternate)===null?(g.childLanes=0,g.lanes=y,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=S.childLanes,g.lanes=S.lanes,g.child=S.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=S.memoizedProps,g.memoizedState=S.memoizedState,g.updateQueue=S.updateQueue,g.type=S.type,y=S.dependencies,g.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),d=d.sibling;return Xe(ft,1&ft.current|2),u.child}a=a.sibling}y.tail!==null&&kt()>xm&&(u.flags|=128,g=!0,bl(y,!1),u.lanes=4194304)}else{if(!g)if((a=Dh(S))!==null){if(u.flags|=128,g=!0,(a=a.updateQueue)!==null&&(u.updateQueue=a,u.flags|=4),bl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!rt)return ir(u),null}else 2*kt()-y.renderingStartTime>xm&&d!==1073741824&&(u.flags|=128,g=!0,bl(y,!1),u.lanes=4194304);y.isBackwards?(S.sibling=u.child,u.child=S):((a=y.last)!==null?a.sibling=S:u.child=S,y.last=S)}return y.tail!==null?(u=y.tail,y.rendering=u,y.tail=u.sibling,y.renderingStartTime=kt(),u.sibling=null,a=ft.current,Xe(ft,g?1&a|2:1&a),u):(ir(u),null);case 22:case 23:return Tm(),d=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==d&&(u.flags|=8192),d&&1&u.mode?1073741824&Pr&&(ir(u),Re&&6&u.subtreeFlags&&(u.flags|=8192)):ir(u),null;case 24:case 25:return null}throw Error(s(156,u.tag))}function w2(a,u){switch(kp(u),u.tag){case 1:return Ar(u.type)&&wp(),65536&(a=u.flags)?(u.flags=-65537&a|128,u):null;case 3:return Go(),tt(dr),tt(Qt),Wp(),65536&(a=u.flags)&&!(128&a)?(u.flags=-65537&a|128,u):null;case 5:return jp(u),null;case 13:if(tt(ft),(a=u.memoizedState)!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(s(340));Oo()}return 65536&(a=u.flags)?(u.flags=-65537&a|128,u):null;case 19:return tt(ft),null;case 4:return Go(),null;case 10:return Bp(u.type._context),null;case 22:case 23:return Tm(),null;default:return null}}var Hh=!1,Kt=!1,b2=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ho(a,u){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){nt(a,u,g)}else d.current=null}function rx(a,u,d){try{d()}catch(g){nt(a,u,g)}}var nx=!1;function El(a,u,d){var g=u.updateQueue;if((g=g!==null?g.lastEffect:null)!==null){var y=g=g.next;do{if((y.tag&a)===a){var S=y.destroy;y.destroy=void 0,S!==void 0&&rx(u,d,S)}y=y.next}while(y!==g)}}function jh(a,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var d=u=u.next;do{if((d.tag&a)===a){var g=d.create;d.destroy=g()}d=d.next}while(d!==u)}}function um(a){var u=a.ref;if(u!==null){var d=a.stateNode;a.tag===5?a=_e(d):a=d,typeof u=="function"?u(a):u.current=a}}function ix(a){var u=a.alternate;u!==null&&(a.alternate=null,ix(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode)!==null&&mp(u),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function sx(a){return a.tag===5||a.tag===3||a.tag===4}function ox(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||sx(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(2&a.flags||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(2&a.flags))return a.stateNode}}function hm(a,u,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?AI(d,a,u):wI(d,a);else if(g!==4&&(a=a.child)!==null)for(hm(a,u,d),a=a.sibling;a!==null;)hm(a,u,d),a=a.sibling}function cm(a,u,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?TI(d,a,u):xI(d,a);else if(g!==4&&(a=a.child)!==null)for(cm(a,u,d),a=a.sibling;a!==null;)cm(a,u,d),a=a.sibling}var sr=null,Gn=!1;function $n(a,u,d){for(d=d.child;d!==null;)dm(a,u,d),d=d.sibling}function dm(a,u,d){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(wh,d)}catch{}switch(d.tag){case 5:Kt||Ho(d,u);case 6:if(Re){var g=sr,y=Gn;sr=null,$n(a,u,d),Gn=y,(sr=g)!==null&&(Gn?PI(sr,d.stateNode):CI(sr,d.stateNode))}else $n(a,u,d);break;case 18:Re&&sr!==null&&(Gn?KI(sr,d.stateNode):qI(sr,d.stateNode));break;case 4:Re?(g=sr,y=Gn,sr=d.stateNode.containerInfo,Gn=!0,$n(a,u,d),sr=g,Gn=y):(qe&&(g=d.stateNode.containerInfo,y=z1(g),gp(g,y)),$n(a,u,d));break;case 0:case 11:case 14:case 15:if(!Kt&&(g=d.updateQueue)!==null&&(g=g.lastEffect)!==null){y=g=g.next;do{var S=y,C=S.destroy;S=S.tag,C!==void 0&&(2&S||4&S)&&rx(d,u,C),y=y.next}while(y!==g)}$n(a,u,d);break;case 1:if(!Kt&&(Ho(d,u),typeof(g=d.stateNode).componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(I){nt(d,u,I)}$n(a,u,d);break;case 21:$n(a,u,d);break;case 22:1&d.mode?(Kt=(g=Kt)||d.memoizedState!==null,$n(a,u,d),Kt=g):$n(a,u,d);break;default:$n(a,u,d)}}function ax(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new b2),u.forEach(function(g){var y=I2.bind(null,a,g);d.has(g)||(d.add(g),g.then(y,y))})}}function cn(a,u){var d=u.deletions;if(d!==null)for(var g=0;g<d.length;g++){var y=d[g];try{var S=a,C=u;if(Re){var I=C;e:for(;I!==null;){switch(I.tag){case 5:sr=I.stateNode,Gn=!1;break e;case 3:case 4:sr=I.stateNode.containerInfo,Gn=!0;break e}I=I.return}if(sr===null)throw Error(s(160));dm(S,C,y),sr=null,Gn=!1}else dm(S,C,y);var O=y.alternate;O!==null&&(O.return=null),y.return=null}catch(G){nt(y,u,G)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)lx(u,a),u=u.sibling}function lx(a,u){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(cn(u,a),Hn(a),4&g){try{El(3,a,a.return),jh(3,a)}catch(H){nt(a,a.return,H)}try{El(5,a,a.return)}catch(H){nt(a,a.return,H)}}break;case 1:cn(u,a),Hn(a),512&g&&d!==null&&Ho(d,d.return);break;case 5:if(cn(u,a),Hn(a),512&g&&d!==null&&Ho(d,d.return),Re){if(32&a.flags){var y=a.stateNode;try{U1(y)}catch(H){nt(a,a.return,H)}}if(4&g&&(y=a.stateNode)!=null){var S=a.memoizedProps;if(d=d!==null?d.memoizedProps:S,g=a.type,u=a.updateQueue,a.updateQueue=null,u!==null)try{SI(y,u,g,d,S,a)}catch(H){nt(a,a.return,H)}}}break;case 6:if(cn(u,a),Hn(a),4&g&&Re){if(a.stateNode===null)throw Error(s(162));y=a.stateNode,S=a.memoizedProps,d=d!==null?d.memoizedProps:S;try{bI(y,d,S)}catch(H){nt(a,a.return,H)}}break;case 3:if(cn(u,a),Hn(a),4&g){if(Re&&Ue&&d!==null&&d.memoizedState.isDehydrated)try{YI(u.containerInfo)}catch(H){nt(a,a.return,H)}if(qe){y=u.containerInfo,S=u.pendingChildren;try{gp(y,S)}catch(H){nt(a,a.return,H)}}}break;case 4:if(cn(u,a),Hn(a),4&g&&qe){y=(S=a.stateNode).containerInfo,S=S.pendingChildren;try{gp(y,S)}catch(H){nt(a,a.return,H)}}break;case 13:cn(u,a),Hn(a),8192&(y=a.child).flags&&(S=y.memoizedState!==null,y.stateNode.isHidden=S,!S||y.alternate!==null&&y.alternate.memoizedState!==null||(_m=kt())),4&g&&ax(a);break;case 22:var C=d!==null&&d.memoizedState!==null;if(1&a.mode?(Kt=(d=Kt)||C,cn(u,a),Kt=d):cn(u,a),Hn(a),8192&g){if(d=a.memoizedState!==null,(a.stateNode.isHidden=d)&&!C&&(1&a.mode)!=0)for(he=a,g=a.child;g!==null;){for(u=he=g;he!==null;){var I=(C=he).child;switch(C.tag){case 0:case 11:case 14:case 15:El(4,C,C.return);break;case 1:Ho(C,C.return);var O=C.stateNode;if(typeof O.componentWillUnmount=="function"){var G=C,V=C.return;try{var ie=G;O.props=ie.memoizedProps,O.state=ie.memoizedState,O.componentWillUnmount()}catch(H){nt(G,V,H)}}break;case 5:Ho(C,C.return);break;case 22:if(C.memoizedState!==null){cx(u);continue}}I!==null?(I.return=C,he=I):cx(u)}g=g.sibling}if(Re){e:if(g=null,Re)for(u=a;;){if(u.tag===5){if(g===null){g=u;try{y=u.stateNode,d?II(y):kI(u.stateNode,u.memoizedProps)}catch(H){nt(a,a.return,H)}}}else if(u.tag===6){if(g===null)try{S=u.stateNode,d?RI(S):MI(S,u.memoizedProps)}catch(H){nt(a,a.return,H)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:cn(u,a),Hn(a),4&g&&ax(a);break;case 21:break;default:cn(u,a),Hn(a)}}function Hn(a){var u=a.flags;if(2&u){try{if(Re){e:{for(var d=a.return;d!==null;){if(sx(d)){var g=d;break e}d=d.return}throw Error(s(160))}switch(g.tag){case 5:var y=g.stateNode;32&g.flags&&(U1(y),g.flags&=-33),cm(a,ox(a),y);break;case 3:case 4:var S=g.stateNode.containerInfo;hm(a,ox(a),S);break;default:throw Error(s(161))}}}catch(C){nt(a,a.return,C)}a.flags&=-3}4096&u&&(a.flags&=-4097)}function E2(a,u,d){he=a,ux(a)}function ux(a,u,d){for(var g=(1&a.mode)!=0;he!==null;){var y=he,S=y.child;if(y.tag===22&&g){var C=y.memoizedState!==null||Hh;if(!C){var I=y.alternate,O=I!==null&&I.memoizedState!==null||Kt;I=Hh;var G=Kt;if(Hh=C,(Kt=O)&&!G)for(he=y;he!==null;)O=(C=he).child,C.tag===22&&C.memoizedState!==null?dx(y):O!==null?(O.return=C,he=O):dx(y);for(;S!==null;)he=S,ux(S),S=S.sibling;he=y,Hh=I,Kt=G}hx(a)}else 8772&y.subtreeFlags&&S!==null?(S.return=y,he=S):hx(a)}}function hx(a){for(;he!==null;){var u=he;if(8772&u.flags){var d=u.alternate;try{if(8772&u.flags)switch(u.tag){case 0:case 11:case 15:Kt||jh(5,u);break;case 1:var g=u.stateNode;if(4&u.flags&&!Kt)if(d===null)g.componentDidMount();else{var y=u.elementType===u.type?d.memoizedProps:hn(u.type,d.memoizedProps);g.componentDidUpdate(y,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=u.updateQueue;S!==null&&l_(u,S,g);break;case 3:var C=u.updateQueue;if(C!==null){if(d=null,u.child!==null)switch(u.child.tag){case 5:d=_e(u.child.stateNode);break;case 1:d=u.child.stateNode}l_(u,C,d)}break;case 5:var I=u.stateNode;d===null&&4&u.flags&&EI(I,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Ue&&u.memoizedState===null){var O=u.alternate;if(O!==null){var G=O.memoizedState;if(G!==null){var V=G.dehydrated;V!==null&&QI(V)}}}break;default:throw Error(s(163))}Kt||512&u.flags&&um(u)}catch(ie){nt(u,u.return,ie)}}if(u===a){he=null;break}if((d=u.sibling)!==null){d.return=u.return,he=d;break}he=u.return}}function cx(a){for(;he!==null;){var u=he;if(u===a){he=null;break}var d=u.sibling;if(d!==null){d.return=u.return,he=d;break}he=u.return}}function dx(a){for(;he!==null;){var u=he;try{switch(u.tag){case 0:case 11:case 15:var d=u.return;try{jh(4,u)}catch(O){nt(u,d,O)}break;case 1:var g=u.stateNode;if(typeof g.componentDidMount=="function"){var y=u.return;try{g.componentDidMount()}catch(O){nt(u,y,O)}}var S=u.return;try{um(u)}catch(O){nt(u,S,O)}break;case 5:var C=u.return;try{um(u)}catch(O){nt(u,C,O)}}}catch(O){nt(u,u.return,O)}if(u===a){he=null;break}var I=u.sibling;if(I!==null){I.return=u.return,he=I;break}he=u.return}}var Vh=0,Wh=1,Xh=2,Yh=3,Qh=4;if(typeof Symbol=="function"&&Symbol.for){var Sl=Symbol.for;Vh=Sl("selector.component"),Wh=Sl("selector.has_pseudo_class"),Xh=Sl("selector.role"),Yh=Sl("selector.test_id"),Qh=Sl("selector.text")}function fm(a){var u=Ur(a);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if((a=pI(a))===null)throw Error(s(362));return a.stateNode.current}function pm(a,u){switch(u.$$typeof){case Vh:if(a.type===u.value)return!0;break;case Wh:e:{u=u.value,a=[a,0];for(var d=0;d<a.length;){var g=a[d++],y=a[d++],S=u[y];if(g.tag!==5||!ll(g)){for(;S!=null&&pm(g,S);)S=u[++y];if(y===u.length){u=!0;break e}for(g=g.child;g!==null;)a.push(g,y),g=g.sibling}}u=!1}return u;case Xh:if(a.tag===5&&yI(a.stateNode,u.value))return!0;break;case Qh:if((a.tag===5||a.tag===6)&&(a=gI(a))!==null&&0<=a.indexOf(u.value))return!0;break;case Yh:if(a.tag===5&&typeof(a=a.memoizedProps["data-testname"])=="string"&&a.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function mm(a){switch(a.$$typeof){case Vh:return"<"+(D(a.value)||"Unknown")+">";case Wh:return":has("+(mm(a)||"")+")";case Xh:return'[role="'+a.value+'"]';case Qh:return'"'+a.value+'"';case Yh:return'[data-testname="'+a.value+'"]';default:throw Error(s(365))}}function fx(a,u){var d=[];a=[a,0];for(var g=0;g<a.length;){var y=a[g++],S=a[g++],C=u[S];if(y.tag!==5||!ll(y)){for(;C!=null&&pm(y,C);)C=u[++S];if(S===u.length)d.push(y);else for(y=y.child;y!==null;)a.push(y,S),y=y.sibling}}return d}function gm(a,u){if(!al)throw Error(s(363));a=fx(a=fm(a),u),u=[],a=Array.from(a);for(var d=0;d<a.length;){var g=a[d++];if(g.tag===5)ll(g)||u.push(g.stateNode);else for(g=g.child;g!==null;)a.push(g),g=g.sibling}return u}var S2=Math.ceil,qh=o.ReactCurrentDispatcher,ym=o.ReactCurrentOwner,yt=o.ReactCurrentBatchConfig,Ne=0,Ft=null,bt=null,$t=0,Pr=0,jo=Gi(0),Tt=0,Tl=null,js=0,Kh=0,vm=0,Al=null,Ir=null,_m=0,xm=1/0,Vi=null;function Vo(){xm=kt()+500}var px,Zh=!1,wm=null,Wi=null,Jh=!1,Xi=null,ec=0,Cl=0,bm=null,tc=-1,rc=0;function Zt(){return 6&Ne?kt():tc!==-1?tc:tc=kt()}function Yi(a){return 1&a.mode?2&Ne&&$t!==0?$t&-$t:u2.transition!==null?(rc===0&&(rc=Y1()),rc):(a=ze)!==0?a:Ls():1}function Xr(a,u,d,g){if(50<Cl)throw Cl=0,bm=null,Error(s(185));cl(a,d,g),2&Ne&&a===Ft||(a===Ft&&(!(2&Ne)&&(Kh|=d),Tt===4&&Qi(a,$t)),mr(a,g),d===1&&Ne===0&&!(1&u.mode)&&(Vo(),bh&&Nn()))}function mr(a,u){var d=a.callbackNode;(function(y,S){for(var C=y.suspendedLanes,I=y.pingedLanes,O=y.expirationTimes,G=y.pendingLanes;0<G;){var V=31-an(G),ie=1<<V,H=O[V];H===-1?ie&C&&!(ie&I)||(O[V]=i2(ie,S)):H<=S&&(y.expiredLanes|=ie),G&=~ie}})(a,u);var g=xh(a,a===Ft?$t:0);if(g===0)d!==null&&q1(d),a.callbackNode=null,a.callbackPriority=0;else if(u=g&-g,a.callbackPriority!==u){if(d!=null&&q1(d),u===1)a.tag===0?function(y){bh=!0,Z1(y)}(gx.bind(null,a)):Z1(gx.bind(null,a)),ko?fI(function(){!(6&Ne)&&Nn()}):Cp(Pp,Nn),d=null;else{switch(Q1(g)){case 1:d=Pp;break;case 4:d=a2;break;case 16:default:d=K1;break;case 536870912:d=l2}d=Sx(d,mx.bind(null,a))}a.callbackPriority=u,a.callbackNode=d}}function mx(a,u){if(tc=-1,rc=0,(6&Ne)!=0)throw Error(s(327));var d=a.callbackNode;if(Ws()&&a.callbackNode!==d)return null;var g=xh(a,a===Ft?$t:0);if(g===0)return null;if(30&g||g&a.expiredLanes||u)u=nc(a,g);else{u=g;var y=Ne;Ne|=2;var S=_x();for(Ft===a&&$t===u||(Vi=null,Vo(),Vs(a,u));;)try{A2();break}catch(I){vx(a,I)}Op(),qh.current=S,Ne=y,bt!==null?u=0:(Ft=null,$t=0,u=Tt)}if(u!==0){if(u===2&&(y=Sp(a))!==0&&(g=y,u=Em(a,y)),u===1)throw d=Tl,Vs(a,0),Qi(a,g),mr(a,kt()),d;if(u===6)Qi(a,g);else{if(y=a.current.alternate,(30&g)==0&&!function(I){for(var O=I;;){if(16384&O.flags){var G=O.updateQueue;if(G!==null&&(G=G.stores)!==null)for(var V=0;V<G.length;V++){var ie=G[V],H=ie.getSnapshot;ie=ie.value;try{if(!ln(H(),ie))return!1}catch{return!1}}}if(G=O.child,16384&O.subtreeFlags&&G!==null)G.return=O,O=G;else{if(O===I)break;for(;O.sibling===null;){if(O.return===null||O.return===I)return!0;O=O.return}O.sibling.return=O.return,O=O.sibling}}return!0}(y)&&((u=nc(a,g))===2&&(S=Sp(a))!==0&&(g=S,u=Em(a,S)),u===1))throw d=Tl,Vs(a,0),Qi(a,g),mr(a,kt()),d;switch(a.finishedWork=y,a.finishedLanes=g,u){case 0:case 1:throw Error(s(345));case 2:case 5:Wo(a,Ir,Vi);break;case 3:if(Qi(a,g),(130023424&g)===g&&10<(u=_m+500-kt())){if(xh(a,0)!==0)break;if(((y=a.suspendedLanes)&g)!==g){Zt(),a.pingedLanes|=a.suspendedLanes&y;break}a.timeoutHandle=$e(Wo.bind(null,a,Ir,Vi),u);break}Wo(a,Ir,Vi);break;case 4:if(Qi(a,g),(4194240&g)===g)break;for(u=a.eventTimes,y=-1;0<g;){var C=31-an(g);S=1<<C,(C=u[C])>y&&(y=C),g&=~S}if(g=y,10<(g=(120>(g=kt()-g)?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*S2(g/1960))-g)){a.timeoutHandle=$e(Wo.bind(null,a,Ir,Vi),g);break}Wo(a,Ir,Vi);break;default:throw Error(s(329))}}}return mr(a,kt()),a.callbackNode===d?mx.bind(null,a):null}function Em(a,u){var d=Al;return a.current.memoizedState.isDehydrated&&(Vs(a,u).flags|=256),(a=nc(a,u))!==2&&(u=Ir,Ir=d,u!==null&&Sm(u)),a}function Sm(a){Ir===null?Ir=a:Ir.push.apply(Ir,a)}function Qi(a,u){for(u&=~vm,u&=~Kh,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var d=31-an(u),g=1<<d;a[d]=-1,u&=~g}}function gx(a){if(6&Ne)throw Error(s(327));Ws();var u=xh(a,0);if(!(1&u))return mr(a,kt()),null;var d=nc(a,u);if(a.tag!==0&&d===2){var g=Sp(a);g!==0&&(u=g,d=Em(a,g))}if(d===1)throw d=Tl,Vs(a,0),Qi(a,u),mr(a,kt()),d;if(d===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,Wo(a,Ir,Vi),mr(a,kt()),null}function yx(a){Xi!==null&&Xi.tag===0&&!(6&Ne)&&Ws();var u=Ne;Ne|=1;var d=yt.transition,g=ze;try{if(yt.transition=null,ze=1,a)return a()}finally{ze=g,yt.transition=d,!(6&(Ne=u))&&Nn()}}function Tm(){Pr=jo.current,tt(jo)}function Vs(a,u){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==Gt&&(a.timeoutHandle=Gt,Rt(d)),bt!==null)for(d=bt.return;d!==null;){var g=d;switch(kp(g),g.tag){case 1:(g=g.type.childContextTypes)!=null&&wp();break;case 3:Go(),tt(dr),tt(Qt),Wp();break;case 5:jp(g);break;case 4:Go();break;case 13:case 19:tt(ft);break;case 10:Bp(g.type._context);break;case 22:case 23:Tm()}d=d.return}if(Ft=a,bt=a=qi(a.current,null),$t=Pr=u,Tt=0,Tl=null,vm=Kh=js=0,Ir=Al=null,$s!==null){for(u=0;u<$s.length;u++)if((g=(d=$s[u]).interleaved)!==null){d.interleaved=null;var y=g.next,S=d.pending;if(S!==null){var C=S.next;S.next=y,g.next=C}d.pending=g}$s=null}return a}function vx(a,u){for(;;){var d=bt;try{if(Op(),Fh.current=Lh,Nh){for(var g=ot.memoizedState;g!==null;){var y=g.queue;y!==null&&(y.pending=null),g=g.next}Nh=!1}if(Hs=0,Dt=Mt=ot=null,gl=!1,yl=0,ym.current=null,d===null||d.return===null){Tt=1,Tl=u,bt=null;break}e:{var S=a,C=d.return,I=d,O=u;if(u=$t,I.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var G=O,V=I,ie=V.tag;if(!(1&V.mode)&&(ie===0||ie===11||ie===15)){var H=V.alternate;H?(V.updateQueue=H.updateQueue,V.memoizedState=H.memoizedState,V.lanes=H.lanes):(V.updateQueue=null,V.memoizedState=null)}var J=G_(C);if(J!==null){J.flags&=-257,$_(J,C,I,0,u),1&J.mode&&z_(S,G,u),O=G;var pe=(u=J).updateQueue;if(pe===null){var Pe=new Set;Pe.add(O),u.updateQueue=Pe}else pe.add(O);break e}if(!(1&u)){z_(S,G,u),Am();break e}O=Error(s(426))}else if(rt&&1&I.mode){var W=G_(C);if(W!==null){!(65536&W.flags)&&(W.flags|=256),$_(W,C,I,0,u),Fp($o(O,I));break e}}S=O=$o(O,I),Tt!==4&&(Tt=2),Al===null?Al=[S]:Al.push(S),S=C;do{switch(S.tag){case 3:S.flags|=65536,u&=-u,S.lanes|=u,a_(S,L_(0,O,u));break e;case 1:I=O;var F=S.type,U=S.stateNode;if(!(128&S.flags)&&(typeof F.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Wi===null||!Wi.has(U)))){S.flags|=65536,u&=-u,S.lanes|=u,a_(S,U_(S,I,u));break e}}S=S.return}while(S!==null)}wx(d)}catch(q){u=q,bt===d&&d!==null&&(bt=d=d.return);continue}break}}function _x(){var a=qh.current;return qh.current=Lh,a===null?Lh:a}function Am(){Tt!==0&&Tt!==3&&Tt!==2||(Tt=4),Ft===null||!(268435455&js)&&!(268435455&Kh)||Qi(Ft,$t)}function nc(a,u){var d=Ne;Ne|=2;var g=_x();for(Ft===a&&$t===u||(Vi=null,Vs(a,u));;)try{T2();break}catch(y){vx(a,y)}if(Op(),Ne=d,qh.current=g,bt!==null)throw Error(s(261));return Ft=null,$t=0,Tt}function T2(){for(;bt!==null;)xx(bt)}function A2(){for(;bt!==null&&!s2();)xx(bt)}function xx(a){var u=px(a.alternate,a,Pr);a.memoizedProps=a.pendingProps,u===null?wx(a):bt=u,ym.current=null}function wx(a){var u=a;do{var d=u.alternate;if(a=u.return,(32768&u.flags)==0){if((d=x2(d,u,Pr))!==null)return void(bt=d)}else{if((d=w2(d,u))!==null)return d.flags&=32767,void(bt=d);if(a===null)return Tt=6,void(bt=null);a.flags|=32768,a.subtreeFlags=0,a.deletions=null}if((u=u.sibling)!==null)return void(bt=u);bt=u=a}while(u!==null);Tt===0&&(Tt=5)}function Wo(a,u,d){var g=ze,y=yt.transition;try{yt.transition=null,ze=1,function(S,C,I,O){do Ws();while(Xi!==null);if(6&Ne)throw Error(s(327));I=S.finishedWork;var G=S.finishedLanes;if(I===null)return null;if(S.finishedWork=null,S.finishedLanes=0,I===S.current)throw Error(s(177));S.callbackNode=null,S.callbackPriority=0;var V=I.lanes|I.childLanes;if(function(J,pe){var Pe=J.pendingLanes&~pe;J.pendingLanes=pe,J.suspendedLanes=0,J.pingedLanes=0,J.expiredLanes&=pe,J.mutableReadLanes&=pe,J.entangledLanes&=pe,pe=J.entanglements;var W=J.eventTimes;for(J=J.expirationTimes;0<Pe;){var F=31-an(Pe),U=1<<F;pe[F]=0,W[F]=-1,J[F]=-1,Pe&=~U}}(S,V),S===Ft&&(bt=Ft=null,$t=0),!(2064&I.subtreeFlags)&&!(2064&I.flags)||Jh||(Jh=!0,Sx(K1,function(){return Ws(),null})),V=(15990&I.flags)!=0,(15990&I.subtreeFlags)!=0||V){V=yt.transition,yt.transition=null;var ie=ze;ze=1;var H=Ne;Ne|=4,ym.current=null,function(J,pe){for(j(J.containerInfo),he=pe;he!==null;)if(pe=(J=he).child,(1028&J.subtreeFlags)!=0&&pe!==null)pe.return=J,he=pe;else for(;he!==null;){J=he;try{var Pe=J.alternate;if(1024&J.flags)switch(J.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Pe!==null){var W=Pe.memoizedProps,F=Pe.memoizedState,U=J.stateNode,q=U.getSnapshotBeforeUpdate(J.elementType===J.type?W:hn(J.type,W),F);U.__reactInternalSnapshotBeforeUpdate=q}break;case 3:Re&&DI(J.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(xe){nt(J,J.return,xe)}if((pe=J.sibling)!==null){pe.return=J.return,he=pe;break}he=J.return}Pe=nx,nx=!1}(S,I),lx(I,S),N(S.containerInfo),S.current=I,E2(I),o2(),Ne=H,ze=ie,yt.transition=V}else S.current=I;if(Jh&&(Jh=!1,Xi=S,ec=G),V=S.pendingLanes,V===0&&(Wi=null),function(J){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(wh,J,void 0,(128&J.current.flags)==128)}catch{}}(I.stateNode),mr(S,kt()),C!==null)for(O=S.onRecoverableError,I=0;I<C.length;I++)G=C[I],O(G.value,{componentStack:G.stack,digest:G.digest});if(Zh)throw Zh=!1,S=wm,wm=null,S;1&ec&&S.tag!==0&&Ws(),V=S.pendingLanes,1&V?S===bm?Cl++:(Cl=0,bm=S):Cl=0,Nn()}(a,u,d,g)}finally{yt.transition=y,ze=g}return null}function Ws(){if(Xi!==null){var a=Q1(ec),u=yt.transition,d=ze;try{if(yt.transition=null,ze=16>a?16:a,Xi===null)var g=!1;else{if(a=Xi,Xi=null,ec=0,(6&Ne)!=0)throw Error(s(331));var y=Ne;for(Ne|=4,he=a.current;he!==null;){var S=he,C=S.child;if(16&he.flags){var I=S.deletions;if(I!==null){for(var O=0;O<I.length;O++){var G=I[O];for(he=G;he!==null;){var V=he;switch(V.tag){case 0:case 11:case 15:El(8,V,S)}var ie=V.child;if(ie!==null)ie.return=V,he=ie;else for(;he!==null;){var H=(V=he).sibling,J=V.return;if(ix(V),V===G){he=null;break}if(H!==null){H.return=J,he=H;break}he=J}}}var pe=S.alternate;if(pe!==null){var Pe=pe.child;if(Pe!==null){pe.child=null;do{var W=Pe.sibling;Pe.sibling=null,Pe=W}while(Pe!==null)}}he=S}}if(2064&S.subtreeFlags&&C!==null)C.return=S,he=C;else e:for(;he!==null;){if(2048&(S=he).flags)switch(S.tag){case 0:case 11:case 15:El(9,S,S.return)}var F=S.sibling;if(F!==null){F.return=S.return,he=F;break e}he=S.return}}var U=a.current;for(he=U;he!==null;){var q=(C=he).child;if(2064&C.subtreeFlags&&q!==null)q.return=C,he=q;else e:for(C=U;he!==null;){if(2048&(I=he).flags)try{switch(I.tag){case 0:case 11:case 15:jh(9,I)}}catch(je){nt(I,I.return,je)}if(I===C){he=null;break e}var xe=I.sibling;if(xe!==null){xe.return=I.return,he=xe;break e}he=I.return}}if(Ne=y,Nn(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(wh,a)}catch{}g=!0}return g}finally{ze=d,yt.transition=u}}return!1}function bx(a,u,d){a=ji(a,u=L_(0,u=$o(d,u),1),1),u=Zt(),a!==null&&(cl(a,1,u),mr(a,u))}function nt(a,u,d){if(a.tag===3)bx(a,a,d);else for(;u!==null;){if(u.tag===3){bx(u,a,d);break}if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Wi===null||!Wi.has(g))){u=ji(u,a=U_(u,a=$o(d,a),1),1),a=Zt(),u!==null&&(cl(u,1,a),mr(u,a));break}}u=u.return}}function C2(a,u,d){var g=a.pingCache;g!==null&&g.delete(u),u=Zt(),a.pingedLanes|=a.suspendedLanes&d,Ft===a&&($t&d)===d&&(Tt===4||Tt===3&&(130023424&$t)===$t&&500>kt()-_m?Vs(a,0):vm|=d),mr(a,u)}function Ex(a,u){u===0&&(1&a.mode?(u=Ep,!(130023424&(Ep<<=1))&&(Ep=4194304)):u=1);var d=Zt();(a=Bn(a,u))!==null&&(cl(a,u,d),mr(a,d))}function P2(a){var u=a.memoizedState,d=0;u!==null&&(d=u.retryLane),Ex(a,d)}function I2(a,u){var d=0;switch(a.tag){case 13:var g=a.stateNode,y=a.memoizedState;y!==null&&(d=y.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(s(314))}g!==null&&g.delete(u),Ex(a,d)}function Sx(a,u){return Cp(a,u)}function R2(a,u,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(a,u,d,g){return new R2(a,u,d,g)}function Cm(a){return!(!(a=a.prototype)||!a.isReactComponent)}function qi(a,u){var d=a.alternate;return d===null?((d=Yr(a.tag,u,a.key,a.mode)).elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=u,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=14680064&a.flags,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,u=a.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function ic(a,u,d,g,y,S){var C=2;if(g=a,typeof a=="function")Cm(a)&&(C=1);else if(typeof a=="string")C=5;else e:switch(a){case c:return Xs(d.children,y,S,u);case f:C=8,y|=8;break;case p:return(a=Yr(12,d,u,2|y)).elementType=p,a.lanes=S,a;case b:return(a=Yr(13,d,u,y)).elementType=b,a.lanes=S,a;case T:return(a=Yr(19,d,u,y)).elementType=T,a.lanes=S,a;case w:return sc(d,y,S,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case m:C=10;break e;case v:C=9;break e;case _:C=11;break e;case x:C=14;break e;case E:C=16,g=null;break e}throw Error(s(130,a==null?a:typeof a,""))}return(u=Yr(C,d,u,y)).elementType=a,u.type=g,u.lanes=S,u}function Xs(a,u,d,g){return(a=Yr(7,a,g,u)).lanes=d,a}function sc(a,u,d,g){return(a=Yr(22,a,g,u)).elementType=w,a.lanes=d,a.stateNode={isHidden:!1},a}function Pm(a,u,d){return(a=Yr(6,a,null,u)).lanes=d,a}function Im(a,u,d){return(u=Yr(4,a.children!==null?a.children:[],a.key,u)).lanes=d,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function k2(a,u,d,g,y){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Gt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tp(0),this.expirationTimes=Tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tp(0),this.identifierPrefix=g,this.onRecoverableError=y,Ue&&(this.mutableSourceEagerHydrationData=null)}function Tx(a,u,d,g,y,S,C,I,O){return a=new k2(a,u,d,I,O),u===1?(u=1,S===!0&&(u|=8)):u=0,S=Yr(3,null,null,u),a.current=S,S.stateNode=a,S.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},zp(S),a}function Ax(a){if(!a)return $i;e:{if(k(a=a._reactInternals)!==a||a.tag!==1)throw Error(s(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ar(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(s(171))}if(a.tag===1){var d=a.type;if(Ar(d))return W1(a,d,u)}return u}function Cx(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return(a=re(u))===null?null:a.stateNode}function Px(a,u){if((a=a.memoizedState)!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<u?d:u}}function oc(a,u){Px(a,u),(a=a.alternate)&&Px(a,u)}function M2(a){return(a=re(a))===null?null:a.stateNode}function D2(){return null}return px=function(a,u,d){if(a!==null)if(a.memoizedProps!==u.pendingProps||dr.current)fr=!0;else{if(!(a.lanes&d)&&!(128&u.flags))return fr=!1,function(ie,H,J){switch(H.tag){case 3:Q_(H),Oo();break;case 5:g_(H);break;case 1:Ar(H.type)&&_h(H);break;case 4:Hp(H,H.stateNode.containerInfo);break;case 10:i_(0,H.type._context,H.memoizedProps.value);break;case 13:var pe=H.memoizedState;if(pe!==null)return pe.dehydrated!==null?(Xe(ft,1&ft.current),H.flags|=128,null):J&H.child.childLanes?K_(ie,H,J):(Xe(ft,1&ft.current),(ie=vi(ie,H,J))!==null?ie.sibling:null);Xe(ft,1&ft.current);break;case 19:if(pe=(J&H.childLanes)!=0,(128&ie.flags)!=0){if(pe)return J_(ie,H,J);H.flags|=128}var Pe=H.memoizedState;if(Pe!==null&&(Pe.rendering=null,Pe.tail=null,Pe.lastEffect=null),Xe(ft,ft.current),pe)break;return null;case 22:case 23:return H.lanes=0,W_(ie,H,J)}return vi(ie,H,J)}(a,u,d);fr=(131072&a.flags)!=0}else fr=!1,rt&&1048576&u.flags&&J1(u,Sh,u.index);switch(u.lanes=0,u.tag){case 2:var g=u.type;$h(a,u),a=u.pendingProps;var y=Do(u,Qt.current);Lo(u,d),y=Qp(null,u,g,a,y,d);var S=qp();return u.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ar(g)?(S=!0,_h(u)):S=!1,u.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,zp(u),y.updater=kh,u.stateNode=y,y._reactInternals=u,$p(u,g,a,d),u=im(null,u,g,!0,S,d)):(u.tag=0,rt&&S&&Rp(u),pr(null,u,y,d),u=u.child),u;case 16:g=u.elementType;e:{switch($h(a,u),a=u.pendingProps,g=(y=g._init)(g._payload),u.type=g,y=u.tag=function(ie){if(typeof ie=="function")return Cm(ie)?1:0;if(ie!=null){if((ie=ie.$$typeof)===_)return 11;if(ie===x)return 14}return 2}(g),a=hn(g,a),y){case 0:u=nm(null,u,g,a,d);break e;case 1:u=Y_(null,u,g,a,d);break e;case 11:u=H_(null,u,g,a,d);break e;case 14:u=j_(null,u,g,hn(g.type,a),d);break e}throw Error(s(306,g,""))}return u;case 0:return g=u.type,y=u.pendingProps,nm(a,u,g,y=u.elementType===g?y:hn(g,y),d);case 1:return g=u.type,y=u.pendingProps,Y_(a,u,g,y=u.elementType===g?y:hn(g,y),d);case 3:e:{if(Q_(u),a===null)throw Error(s(387));g=u.pendingProps,y=(S=u.memoizedState).element,o_(a,u),Rh(u,g,null,d);var C=u.memoizedState;if(g=C.element,Ue&&S.isDehydrated){if(S={element:g,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},u.updateQueue.baseState=S,u.memoizedState=S,256&u.flags){u=q_(a,u,g,d,y=$o(Error(s(423)),u));break e}if(g!==y){u=q_(a,u,g,d,y=$o(Error(s(424)),u));break e}for(Ue&&(Hr=$I(u.stateNode.containerInfo),Cr=u,rt=!0,un=null,dl=!1),d=m_(u,null,g,d),u.child=d;d;)d.flags=-3&d.flags|4096,d=d.sibling}else{if(Oo(),g===y){u=vi(a,u,d);break e}pr(a,u,g,d)}u=u.child}return u;case 5:return g_(u),a===null&&Dp(u),g=u.type,y=u.pendingProps,S=a!==null?a.memoizedProps:null,C=y.children,He(g,y)?C=null:S!==null&&He(g,S)&&(u.flags|=32),X_(a,u),pr(a,u,C,d),u.child;case 6:return a===null&&Dp(u),null;case 13:return K_(a,u,d);case 4:return Hp(u,u.stateNode.containerInfo),g=u.pendingProps,a===null?u.child=Uo(u,null,g,d):pr(a,u,g,d),u.child;case 11:return g=u.type,y=u.pendingProps,H_(a,u,g,y=u.elementType===g?y:hn(g,y),d);case 7:return pr(a,u,u.pendingProps,d),u.child;case 8:case 12:return pr(a,u,u.pendingProps.children,d),u.child;case 10:e:{if(g=u.type._context,y=u.pendingProps,S=u.memoizedProps,i_(0,g,C=y.value),S!==null)if(ln(S.value,C)){if(S.children===y.children&&!dr.current){u=vi(a,u,d);break e}}else for((S=u.child)!==null&&(S.return=u);S!==null;){var I=S.dependencies;if(I!==null){C=S.child;for(var O=I.firstContext;O!==null;){if(O.context===g){if(S.tag===1){(O=yi(-1,d&-d)).tag=2;var G=S.updateQueue;if(G!==null){var V=(G=G.shared).pending;V===null?O.next=O:(O.next=V.next,V.next=O),G.pending=O}}S.lanes|=d,(O=S.alternate)!==null&&(O.lanes|=d),Lp(S.return,d,u),I.lanes|=d;break}O=O.next}}else if(S.tag===10)C=S.type===u.type?null:S.child;else if(S.tag===18){if((C=S.return)===null)throw Error(s(341));C.lanes|=d,(I=C.alternate)!==null&&(I.lanes|=d),Lp(C,d,u),C=S.sibling}else C=S.child;if(C!==null)C.return=S;else for(C=S;C!==null;){if(C===u){C=null;break}if((S=C.sibling)!==null){S.return=C.return,C=S;break}C=C.return}S=C}pr(a,u,y.children,d),u=u.child}return u;case 9:return y=u.type,g=u.pendingProps.children,Lo(u,d),g=g(y=jr(y)),u.flags|=1,pr(a,u,g,d),u.child;case 14:return y=hn(g=u.type,u.pendingProps),j_(a,u,g,y=hn(g.type,y),d);case 15:return V_(a,u,u.type,u.pendingProps,d);case 17:return g=u.type,y=u.pendingProps,y=u.elementType===g?y:hn(g,y),$h(a,u),u.tag=1,Ar(g)?(a=!0,_h(u)):a=!1,Lo(u,d),c_(u,g,y),$p(u,g,y,d),im(null,u,g,!0,a,d);case 19:return J_(a,u,d);case 22:return W_(a,u,d)}throw Error(s(156,u.tag))},e.attemptContinuousHydration=function(a){if(a.tag===13){var u=Bn(a,134217728);u!==null&&Xr(u,a,134217728,Zt()),oc(a,134217728)}},e.attemptDiscreteHydration=function(a){if(a.tag===13){var u=Bn(a,1);u!==null&&Xr(u,a,1,Zt()),oc(a,1)}},e.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var u=Yi(a),d=Bn(a,u);d!==null&&Xr(d,a,u,Zt()),oc(a,u)}},e.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var d=hl(u.pendingLanes);d!==0&&(Ap(u,1|d),mr(u,kt()),!(6&Ne)&&(Vo(),Nn()))}break;case 13:yx(function(){var g=Bn(a,1);if(g!==null){var y=Zt();Xr(g,a,1,y)}}),oc(a,1)}},e.batchedUpdates=function(a,u){var d=Ne;Ne|=1;try{return a(u)}finally{(Ne=d)===0&&(Vo(),bh&&Nn())}},e.createComponentSelector=function(a){return{$$typeof:Vh,value:a}},e.createContainer=function(a,u,d,g,y,S,C){return Tx(a,u,!1,null,0,g,0,S,C)},e.createHasPseudoClassSelector=function(a){return{$$typeof:Wh,value:a}},e.createHydrationContainer=function(a,u,d,g,y,S,C,I,O){return(a=Tx(d,g,!0,a,0,S,0,I,O)).context=Ax(null),d=a.current,(S=yi(g=Zt(),y=Yi(d))).callback=u??null,ji(d,S,y),a.current.lanes=y,cl(a,y,g),mr(a,g),a},e.createPortal=function(a,u,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:g==null?null:""+g,children:a,containerInfo:u,implementation:d}},e.createRoleSelector=function(a){return{$$typeof:Xh,value:a}},e.createTestNameSelector=function(a){return{$$typeof:Yh,value:a}},e.createTextSelector=function(a){return{$$typeof:Qh,value:a}},e.deferredUpdates=function(a){var u=ze,d=yt.transition;try{return yt.transition=null,ze=16,a()}finally{ze=u,yt.transition=d}},e.discreteUpdates=function(a,u,d,g,y){var S=ze,C=yt.transition;try{return yt.transition=null,ze=1,a(u,d,g,y)}finally{ze=S,yt.transition=C,Ne===0&&Vo()}},e.findAllNodes=gm,e.findBoundingRects=function(a,u){if(!al)throw Error(s(363));u=gm(a,u),a=[];for(var d=0;d<u.length;d++)a.push(mI(u[d]));for(u=a.length-1;0<u;u--)for(var g=(d=a[u]).x,y=g+d.width,S=d.y,C=S+d.height,I=u-1;0<=I;I--)if(u!==I){var O=a[I],G=O.x,V=G+O.width,ie=O.y,H=ie+O.height;if(g>=G&&S>=ie&&y<=V&&C<=H){a.splice(u,1);break}if(!(g!==G||d.width!==O.width||H<S||ie>C)){ie>S&&(O.height+=ie-S,O.y=S),H<C&&(O.height=C-ie),a.splice(u,1);break}if(!(S!==ie||d.height!==O.height||V<g||G>y)){G>g&&(O.width+=G-g,O.x=g),V<y&&(O.width=y-G),a.splice(u,1);break}}return a},e.findHostInstance=Cx,e.findHostInstanceWithNoPortals=function(a){return(a=(a=z(a))!==null?B(a):null)===null?null:a.stateNode},e.findHostInstanceWithWarning=function(a){return Cx(a)},e.flushControlled=function(a){var u=Ne;Ne|=1;var d=yt.transition,g=ze;try{yt.transition=null,ze=1,a()}finally{ze=g,yt.transition=d,(Ne=u)===0&&(Vo(),Nn())}},e.flushPassiveEffects=Ws,e.flushSync=yx,e.focusWithin=function(a,u){if(!al)throw Error(s(363));for(u=fx(a=fm(a),u),u=Array.from(u),a=0;a<u.length;){var d=u[a++];if(!ll(d)){if(d.tag===5&&vI(d.stateNode))return!0;for(d=d.child;d!==null;)u.push(d),d=d.sibling}}return!1},e.getCurrentUpdatePriority=function(){return ze},e.getFindAllNodesFailureDescription=function(a,u){if(!al)throw Error(s(363));var d=0,g=[];a=[fm(a),0];for(var y=0;y<a.length;){var S=a[y++],C=a[y++],I=u[C];if((S.tag!==5||!ll(S))&&(pm(S,I)&&(g.push(mm(I)),++C>d&&(d=C)),C<u.length))for(S=S.child;S!==null;)a.push(S,C),S=S.sibling}if(d<u.length){for(a=[];d<u.length;d++)a.push(mm(u[d]));return`findAllNodes was able to match part of the selector:
  `+g.join(" > ")+`

No matching component was found for:
  `+a.join(" > ")}return null},e.getPublicRootInstance=function(a){return(a=a.current).child?a.child.tag===5?_e(a.child.stateNode):a.child.stateNode:null},e.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:M2,findFiberByHostInstance:a.findFiberByHostInstance||D2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)a=!0;else{try{wh=u.inject(a),Fn=u}catch{}a=!!u.checkDCE}}return a},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(a,u,d,g){if(!al)throw Error(s(363));a=gm(a,u);var y=_I(a,d,g).disconnect;return{disconnect:function(){y()}}},e.registerMutableSourceForHydration=function(a,u){var d=u._getVersion;d=d(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,d]:a.mutableSourceEagerHydrationData.push(u,d)},e.runWithPriority=function(a,u){var d=ze;try{return ze=a,u()}finally{ze=d}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(a,u,d,g){var y=u.current,S=Zt(),C=Yi(y);return d=Ax(d),u.context===null?u.context=d:u.pendingContext=d,(u=yi(S,C)).payload={element:a},(g=g===void 0?null:g)!==null&&(u.callback=g),(a=ji(y,u,C))!==null&&(Xr(a,y,C,S),Ih(a,y,C)),C},e}),gE}({get exports(){return Uy},set exports(t){Uy=t}}).exports=XB();var YB=xB(Uy),hP={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},Gy={},Vc={get exports(){return Gy},set exports(t){Gy=t}};(function(){var t,e,r,n,i,s;typeof performance<"u"&&performance!==null&&performance.now?Vc.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Vc.exports=function(){return(t()-i)/1e6},e=process.hrtime,n=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=n-s):Date.now?(Vc.exports=function(){return Date.now()-r},r=Date.now()):(Vc.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(_B);var _E,Ea={},qs={};({get exports(){return Ea},set exports(t){Ea=t}}).exports=(_E||(_E=1,qs.ConcurrentRoot=1,qs.ContinuousEventPriority=4,qs.DefaultEventPriority=16,qs.DiscreteEventPriority=1,qs.IdleEventPriority=536870912,qs.LegacyRoot=0),qs);var QB={};function $g(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function cP(t,e){var r,n,i;(r=t.willUnmount)===null||r===void 0||r.call(t,t,e),((n=t.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(i=t.children)!==null&&i!==void 0&&i.length&&Ui(t.children).forEach(function(s){cP(s,t)})}function xE(t,e){var r;cP(e,t),t.removeChild(e);var n=(r=e.config)!==null&&r!==void 0?r:{},i=n.destroy,s=i===void 0||i,o=n.destroyChildren,l=o===void 0||o,h=n.destroyTexture,c=h!==void 0&&h,f=n.destroyBaseTexture,p=f!==void 0&&f;s&&e.destroy({children:l,texture:c,baseTexture:p})}function wE(t,e,r){var n,i;gt(e!==r,"Cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var s=t.getChildIndex(r);t.addChildAt(e,s),(n=t.__reactpixi)===null||n===void 0||(i=n.root)===null||i===void 0||i.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var bE=null,Sn=YB({getRootHostContext:function(){return QB},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return Ea.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ea.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ea.ContinuousEventPriority;default:return Ea.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=HB[t];if(typeof s=="function"&&(e=s(i,n)),!e){var o=uP[t];o&&((e=o.create(n,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((r=e)===null||r===void 0?void 0:r.applyProps)=="function"?e.applyProps:ci)(e,{},n)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var r=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=r},finalizeInitialChildren:function(t,e,r){return!1},prepareUpdate:function(t,e,r,n,i,s){return bE=function(o,l,h,c){var f=null;for(var p in h)!c.hasOwnProperty(p)&&h.hasOwnProperty(p)&&h[p]!==null&&(p===By||(f||(f=[]),f.push(p,null)));for(var m in c){var v=c[m],_=h!==null?h[m]:void 0;!c.hasOwnProperty(m)||v===_||v===null&&_===null||m===By||(f||(f=[]),f.push(m,v))}return f}(0,0,r,n)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var r=e.alpha===void 0||e.alpha>0,n=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(r&&n&&i)},createTextInstance:function(t,e,r){gt(!1,'Error trying to add text node "'.concat(t,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:Gy,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=$g.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=$g.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=$g.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=xE.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=xE.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:wE,insertInContainerBefore:function(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=wE.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(t,e,r,n,i){var s,o,l=t&&t.applyProps;typeof l!="function"&&(l=ci),(l(t,n,i)||bE)&&((s=t.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,r,n,i){},commitTextUpdate:function(t,e,r){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),qB=hP.dependencies["react-dom"].replace(/[^0-9.]/g,""),KB=hP.name;Sn.injectIntoDevTools({bundleType:0,version:qB,rendererPackageName:KB,findHostInstanceByFiber:Sn.findHostInstance});var As=new Map;function dP(t){if(gt(ur.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `Container`."),As.has(t)){var e=As.get(t).pixiFiberContainer;Sn.updateContainer(null,e,void 0,function(){As.delete(t)})}}function fP(t){gt(ur.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `Container`.");var e=As.get(t);if(gt(!e,"createRoot should only be called once"),!e){var r=Sn.createContainer(t);e={pixiFiberContainer:r,reactRoot:{render:function(n){return Sn.updateContainer(n,r,void 0),Sn.getPublicRootInstance(r)},unmount:function(){dP(t),As.delete(t)}}},As.set(t,e)}return e.reactRoot}function ZB(t,e,r){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),r!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),As.has(e)?n=As.get(e).reactRoot:n=fP(e),n.render(t)}function JB(t){dP(t)}function Xu(){return Xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xu.apply(this,arguments)}function e4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oP(n.key),n)}}function wi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _f(t,e){return _f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},_f(t,e)}function r4(t,e){if(e&&(Nr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wi(t)}function xf(t){return xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xf(t)}var sp=ii.createContext(null),pP=sp.Provider,mP=sp.Consumer,n4=function(t){var e=ii.forwardRef(function(r,n){return ii.createElement(mP,null,function(i){return ii.createElement(t,Xu({},r,{ref:n,app:i}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function i4(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=xf(t);if(e){var i=xf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return r4(this,r)}}function EE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EE(Object(r),!0).forEach(function(n){vt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var SE=function(){},gP={width:Ze.number,height:Ze.number,onMount:Ze.func,onUnmount:Ze.func,raf:Ze.bool,renderOnComponentChange:Ze.bool,children:Ze.node,options:Ze.shape({autoStart:Ze.bool,width:Ze.number,height:Ze.number,useContextAlpha:Ze.bool,backgroundAlpha:Ze.number,autoDensity:Ze.bool,antialias:Ze.bool,preserveDrawingBuffer:Ze.bool,resolution:Ze.number,forceCanvas:Ze.bool,backgroundColor:Ze.number,clearBeforeRender:Ze.bool,powerPreference:Ze.string,sharedTicker:Ze.bool,sharedLoader:Ze.bool,resizeTo:function(t,e){var r=t[e];r&&gt(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Nr(r),", expect `window` or an `HTMLElement`."))},view:function(t,e,r){var n=t[e];n&&gt(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Nr(n),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},s4={width:800,height:600,onMount:SE,onUnmount:SE,raf:!0,renderOnComponentChange:!0},$y=function(t){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&_f(s,o)})(i,ii.Component);var e,r,n=i4(i);function i(){var s;e4(this,i);for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];return vt(wi(s=n.call.apply(n,[this].concat(l))),"_canvas",null),vt(wi(s),"_mediaQuery",null),vt(wi(s),"_ticker",null),vt(wi(s),"_needsUpdate",!0),vt(wi(s),"app",null),vt(wi(s),"updateSize",function(){var c=s.props,f=c.width,p=c.height,m=c.options;m!=null&&m.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(f,p)}),vt(wi(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),vt(wi(s),"renderStage",function(){var c=s.props,f=c.renderOnComponentChange;!c.raf&&f&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(r=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,l=s.width,h=s.height,c=s.options,f=s.raf,p=s.renderOnComponentChange;this.app=new ip(Wc(Wc({width:l,height:h,view:this._canvas},c),{},{autoDensity:(c==null?void 0:c.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[f?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Sn.createContainer(this.app.stage),Sn.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),c!=null&&c.autoDensity&&window.matchMedia&&(c==null?void 0:c.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),p&&!f&&(this._ticker=new Lt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,l){var h,c=this.props,f=c.width,p=c.height,m=c.raf,v=c.renderOnComponentChange,_=c.options;(_==null?void 0:_.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(_==null?void 0:_.resolution)&&(this.app.renderer.resolution=_.resolution,this.resetInteractionManager()),s.height===p&&s.width===f&&((h=s.options)===null||h===void 0?void 0:h.resolution)===(_==null?void 0:_.resolution)||this.updateSize(),s.raf!==m&&this.app.ticker[m?"start":"stop"](),Sn.updateContainer(this.getChildren(),this.mountNode,this),s.width===f&&s.height===p&&s.raf===m&&s.renderOnComponentChange===v&&s.options===_||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return ii.createElement(pP,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Sn.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,l=this,h=this.props.options;return h&&h.view?(gt(h.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):ii.createElement("canvas",Xu({},(s=this.props,o=[].concat(Ui(Object.keys(gP)),Ui(Object.keys(Ly))),Object.keys(s).filter(function(c){return!o.includes(c)}).reduce(function(c,f){return Wc(Wc({},c),{},vt({},f,s[f]))},{})),{ref:function(c){return l._canvas=c}}))}}])&&t4(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),i}();$y.propTypes=gP,$y.defaultProps=s4;var o4=$y;function yP(){var t=X.useContext(sp);return gt(t instanceof ip,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),t}function a4(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=yP();gt(typeof t=="function","`useTick` needs a callback function."),gt(r instanceof ip,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var n=X.useRef(null);X.useEffect(function(){n.current=t},[t]),X.useEffect(function(){if(e){var i=function(s){return n.current.apply(r.ticker,[s,r.ticker])};return r.ticker.add(i),function(){r.ticker&&r.ticker.remove(i)}}},[e])}function l4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hy(t,e,r){return Hy=l4()?Reflect.construct.bind():function(n,i,s){var o=[null];o.push.apply(o,i);var l=new(Function.bind.apply(n,o));return s&&_f(l,s.prototype),l},Hy.apply(null,arguments)}var u4=["children","apply"];function TE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TE(Object(r),!0).forEach(function(n){vt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var h4=function(t,e){gt(Nr(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(e),n=function(i){var s=i.children,o=i.apply,l=Bs(i,u4),h=X.useRef(X.useMemo(function(){return r.map(function(p){var m,v=(l==null||(m=l[p])===null||m===void 0?void 0:m.construct)||[];return Hy(e[p],Ui(v))})},[r])),c=X.useMemo(function(){return r.reduce(function(p,m,v){return Xc(Xc({},p),{},vt({},m,h.current[v]))},{})},[r]),f=X.useMemo(function(){return Object.keys(l).filter(lP(aP(r))).reduce(function(p,m){return Xc(Xc({},p),{},vt({},m,l[m]))},{})},[l,r]);return r.forEach(function(p,m){return Object.assign(h.current[m],l[p])}),o&&function(){for(var p=arguments.length,m=new Array(p),v=0;v<p;v++)m[v]=arguments[v];return m.every(function(_){return typeof _=="function"})}(o)&&o.call(t,c),ii.createElement(t,Xu({},f,{filters:h.current}),s)};return n.displayName="FilterWrapper",n.propTypes={children:Ze.node,apply:Ze.func},n},c4=Tr.BitmapText,d4=Tr.Container,f4=Tr.Graphics,p4=Tr.NineSlicePlane,m4=Tr.ParticleContainer,g4=Tr.Sprite,y4=Tr.AnimatedSprite,v4=Tr.Text,_4=Tr.TilingSprite,x4=Tr.SimpleMesh,w4=Tr.SimpleRope;const b4=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:y4,AppConsumer:mP,AppContext:sp,AppProvider:pP,BitmapText:c4,Container:d4,Graphics:f4,NineSlicePlane:p4,ParticleContainer:m4,PixiComponent:jB,PixiFiber:Sn,SimpleMesh:x4,SimpleRope:w4,Sprite:g4,Stage:o4,TYPES:Tr,Text:v4,TilingSprite:_4,applyDefaultProps:ci,createRoot:fP,eventHandlers:vf,render:ZB,unmountComponentAtNode:JB,useApp:yP,useTick:a4,withFilters:h4,withPixiApp:n4},Symbol.toStringTag,{value:"Module"})),E4=hv(b4);EA.exports=E4;var fe=EA.exports;const xn={BASE_URL:"https://www.aktasalper.com/asteroid-escape/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let S4=0;function ms(t,e){const r=`atom${++S4}`,n={toString(){return(xn?"production":void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof t=="function"?n.read=t:(n.init=t,n.read=T4,n.write=A4),n}function T4(t){return t(this)}function A4(t,e,r){return e(this,typeof r=="function"?r(t(this)):r)}const AE=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,Hg=t=>"init"in t,jg=t=>!!t.write,wf=new WeakMap,jy=t=>{var e;return Vy(t)&&!((e=wf.get(t))!=null&&e[1])},C4=(t,e)=>{const r=wf.get(t);if(r)r[1]=!0,r[0].forEach(n=>n(e));else if((xn?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},P4=t=>{if(wf.has(t))return;const e=[new Set,!1];wf.set(t,e);const r=()=>{e[1]=!0};t.then(r,r),t.onCancel=n=>{e[0].add(n)}},Vy=t=>typeof(t==null?void 0:t.then)=="function",CE=t=>"v"in t||"e"in t,Yc=t=>{if("e"in t)throw t.e;if((xn?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},vP=(t,e,r)=>{r.p.has(t)||(r.p.add(t),e.then(()=>{r.p.delete(t)},()=>{r.p.delete(t)}))},PE=(t,e,r,n,i)=>{var s;if((xn?"production":void 0)!=="production"&&n===e)throw new Error("[Bug] atom cannot depend on itself");r.d.set(n,i.n),jy(r.v)&&vP(e,r.v,i),(s=i.m)==null||s.t.add(e),t&&I4(t,n,e)},ea=()=>[new Map,new Map,new Set],Vg=(t,e,r)=>{t[0].has(e)||t[0].set(e,new Set),t[1].set(e,r)},I4=(t,e,r)=>{const n=t[0].get(e);n&&n.add(r)},R4=(t,e)=>t[0].get(e),IE=(t,e)=>{t[2].add(e)},Ks=t=>{for(;t[1].size||t[2].size;){t[0].clear();const e=new Set(t[1].values());t[1].clear();const r=new Set(t[2]);t[2].clear(),e.forEach(n=>{var i;return(i=n.m)==null?void 0:i.l.forEach(s=>s())}),r.forEach(n=>n())}},_P=t=>{let e;(xn?"production":void 0)!=="production"&&(e=new Set);const r=(b,T,x)=>{const E="v"in T,w=T.v,A=jy(T.v)?T.v:null;if(Vy(x)){P4(x);for(const P of T.d.keys())vP(b,x,t(P,T));T.v=x,delete T.e}else T.v=x,delete T.e;(!E||!Object.is(w,T.v))&&(++T.n,A&&C4(A,x))},n=(b,T,x,E)=>{var w;if(!(E!=null&&E(T))&&CE(x)&&(x.m||Array.from(x.d).every(([L,z])=>n(b,L,t(L,x),E).n===z)))return x;x.d.clear();let A=!0;const P=L=>{if(AE(T,L)){const re=t(L,x);if(!CE(re))if(Hg(L))r(L,re,L.init);else throw new Error("no atom init");return Yc(re)}const z=n(b,L,t(L,x),E);if(A)PE(b,T,x,L,z);else{const re=ea();PE(re,T,x,L,z),c(re,T,x),Ks(re)}return Yc(z)};let D,R;const k={get signal(){return D||(D=new AbortController),D.signal},get setSelf(){return(xn?"production":void 0)!=="production"&&!jg(T)&&console.warn("setSelf function cannot be used with read-only atom"),!R&&jg(T)&&(R=(...L)=>{if((xn?"production":void 0)!=="production"&&A&&console.warn("setSelf function cannot be called in sync"),!A)return h(T,...L)}),R}};try{const L=T.read(P,k);if(r(T,x,L),Vy(L)){(w=L.onCancel)==null||w.call(L,()=>D==null?void 0:D.abort());const z=()=>{if(x.m){const re=ea();c(re,T,x),Ks(re)}};L.then(z,z)}return x}catch(L){return delete x.v,x.e=L,++x.n,x}finally{A=!1}},i=b=>Yc(n(void 0,b,t(b))),s=(b,T,x)=>{var E,w;const A=new Map;for(const P of((E=x.m)==null?void 0:E.t)||[])A.set(P,t(P,x));for(const P of x.p)A.set(P,t(P,x));return(w=R4(b,T))==null||w.forEach(P=>{A.set(P,t(P,x))}),A},o=(b,T,x)=>{const E=[],w=new Set,A=(R,k)=>{if(!w.has(R)){w.add(R);for(const[L,z]of s(b,R,k))R!==L&&A(L,z);E.push([R,k,k.n])}};A(T,x);const P=new Set([T]),D=R=>w.has(R);for(let R=E.length-1;R>=0;--R){const[k,L,z]=E[R];let re=!1;for(const Z of L.d.keys())if(Z!==k&&P.has(Z)){re=!0;break}re&&(n(b,k,L,D),c(b,k,L),z!==L.n&&(Vg(b,k,L),P.add(k))),w.delete(k)}},l=(b,T,x,...E)=>{const w=D=>Yc(n(b,D,t(D,x))),A=(D,...R)=>{const k=t(D,x);let L;if(AE(T,D)){if(!Hg(D))throw new Error("atom not writable");const z="v"in k,re=k.v,Z=R[0];r(D,k,Z),c(b,D,k),(!z||!Object.is(re,k.v))&&(Vg(b,D,k),o(b,D,k))}else L=l(b,D,k,...R);return Ks(b),L};return T.write(w,A,...E)},h=(b,...T)=>{const x=ea(),E=l(x,b,t(b),...T);return Ks(x),E},c=(b,T,x)=>{if(x.m&&!jy(x.v)){for(const E of x.d.keys())x.m.d.has(E)||(f(b,E,t(E,x)).t.add(T),x.m.d.add(E));for(const E of x.m.d||[])if(!x.d.has(E)){x.m.d.delete(E);const w=p(b,E,t(E,x));w==null||w.t.delete(T)}}},f=(b,T,x)=>{if(!x.m){n(b,T,x);for(const E of x.d.keys())f(b,E,t(E,x)).t.add(T);if(x.m={l:new Set,d:new Set(x.d.keys()),t:new Set},(xn?"production":void 0)!=="production"&&e.add(T),jg(T)&&T.onMount){const E=x.m,{onMount:w}=T;IE(b,()=>{const A=w((...P)=>l(b,T,x,...P));A&&(E.u=A)})}}return x.m},p=(b,T,x)=>{if(x.m&&!x.m.l.size&&!Array.from(x.m.t).some(E=>{var w;return(w=t(E,x).m)==null?void 0:w.d.has(T)})){const E=x.m.u;E&&IE(b,E),delete x.m,(xn?"production":void 0)!=="production"&&e.delete(T);for(const w of x.d.keys()){const A=p(b,w,t(w,x));A==null||A.t.delete(T)}return}return x.m},_={get:i,set:h,sub:(b,T)=>{const x=ea(),E=t(b),w=f(x,b,E);Ks(x);const A=w.l;return A.add(T),()=>{A.delete(T);const P=ea();p(P,b,E),Ks(P)}},unstable_derive:b=>_P(...b(t))};return(xn?"production":void 0)!=="production"&&Object.assign(_,{dev4_get_internal_weak_map:()=>({get:T=>{const x=t(T);if(x.n!==0)return x}}),dev4_get_mounted_atoms:()=>e,dev4_restore_atoms:T=>{const x=ea();for(const[E,w]of T)if(Hg(E)){const A=t(E),P="v"in A,D=A.v;r(E,A,w),c(x,E,A),(!P||!Object.is(D,A.v))&&(Vg(x,E,A),o(x,E,A))}Ks(x)}}),_},k4=()=>{const t=new WeakMap;return _P(r=>{let n=t.get(r);return n||(n={d:new Map,p:new Set,n:0},t.set(r,n)),n})};let $l;const M4=()=>($l||($l=k4(),(xn?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=$l),globalThis.__JOTAI_DEFAULT_STORE__!==$l&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),$l),xP={BASE_URL:"https://www.aktasalper.com/asteroid-escape/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},D4=X.createContext(void 0),wP=t=>X.useContext(D4)||M4(),bP=t=>typeof(t==null?void 0:t.then)=="function",F4=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},N4=ii.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(F4(t),t)}),Wg=new WeakMap,O4=t=>{let e=Wg.get(t);return e||(e=new Promise((r,n)=>{let i=t;const s=h=>c=>{i===h&&r(c)},o=h=>c=>{i===h&&n(c)},l=h=>{"onCancel"in h&&typeof h.onCancel=="function"&&h.onCancel(c=>{if((xP?"production":void 0)!=="production"&&c===h)throw new Error("[Bug] p is not updated even after cancelation");bP(c)?(Wg.set(c,e),i=c,c.then(s(c),o(c)),l(c)):r(c)})};t.then(s(t),o(t)),l(t)}),Wg.set(t,e)),e};function B4(t,e){const r=wP(),[[n,i,s],o]=X.useReducer(c=>{const f=r.get(t);return Object.is(c[0],f)&&c[1]===r&&c[2]===t?c:[f,r,t]},void 0,()=>[r.get(t),r,t]);let l=n;if((i!==r||s!==t)&&(o(),l=r.get(t)),X.useEffect(()=>{const c=r.sub(t,()=>{o()});return o(),c},[r,t,void 0]),X.useDebugValue(l),bP(l)){const c=O4(l);return N4(c)}return l}function L4(t,e){const r=wP();return X.useCallback((...i)=>{if((xP?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return r.set(t,...i)},[r,t])}function Be(t,e){return[B4(t),L4(t)]}const wt={health:ms(100),shield:ms(!1),travelSpeed:ms(.2),distanceTraveled:ms(0)};function E1(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+t/4).toString(16))}const Sr={isStarted:ms(!1),isOver:ms(!1),isFinished:ms(!1),session:ms(E1())},we={baseUrl:"https://www.aktasalper.com/asteroid-escape",fonts:["Space Grotesk Variable","Arial"],canvas:{width:360,height:800},game:{finalDistance:10}},Cd=()=>Math.floor(Math.random()*we.canvas.width),EP=new et;st.prototype._cacheAsBitmap=!1;st.prototype._cacheData=null;st.prototype._cacheAsBitmapResolution=null;st.prototype._cacheAsBitmapMultisample=null;class U4{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(st.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new U4),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});st.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};st.prototype._initCachedDisplayObject=function(t){var m,v;if((m=this._cacheData)!=null&&m.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(new Ae,!0);if((v=this.filters)!=null&&v.length){const _=this.filters[0].padding;r.pad(_)}const n=this.cacheAsBitmapResolution||t.resolution;r.ceil(n),r.width=Math.max(r.width,1/n),r.height=Math.max(r.height,1/n);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),l=t.projection.transform,h=Ro.create({width:r.width,height:r.height,resolution:n,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${To()}`;this._cacheData.textureCacheId=c,Se.addToCache(h.baseTexture,c),ne.addToCache(h,c);const f=this.transform.localTransform.copyTo(EP).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=l,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const p=new pi(h);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(r.x/r.width),p.anchor.y=-(r.y/r.height),p.alpha=e,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)};st.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};st.prototype._initCachedDisplayObjectCanvas=function(t){var f;if((f=this._cacheData)!=null&&f.sprite)return;const e=this.getLocalBounds(new Ae,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,i=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=Ro.create({width:e.width,height:e.height,resolution:s}),l=`cacheAsBitmap_${To()}`;this._cacheData.textureCacheId=l,Se.addToCache(o.baseTexture,l),ne.addToCache(o,l);const h=EP;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=e.x,h.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new pi(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};st.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};st.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};st.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Se.removeFromCache(this._cacheData.textureCacheId),ne.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};st.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};st.prototype.name=null;ur.prototype.getChildByName=function(t,e){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(let r=0,n=this.children.length;r<n;r++){const i=this.children[r];if(!i.getChildByName)continue;const s=i.getChildByName(t,!0);if(s)return s}return null};st.prototype.getGlobalPosition=function(t=new Fe,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var z4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class G4 extends ar{constructor(e=1){super(BN,z4,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const $4={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},H4=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function j4(t){const e=$4[t],r=e.length;let n=H4,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let l=0;l<t;l++){let h=s.replace("%index%",l.toString());o=l,l>=r&&(o=t-l-1),h=h.replace("%value%",e[o].toString()),i+=h,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}const V4=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function W4(t,e){const r=Math.ceil(t/2);let n=V4,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let l=s.replace("%index%",o.toString());l=l.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}class Wy extends ar{constructor(e,r=8,n=4,i=ar.defaultResolution,s=5){const o=W4(s,e),l=j4(s);super(o,l),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(e,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let l=r,h=s;this.state.blend=!1,e.applyFilter(this,l,h,ei.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(l,ei.BLIT),this.uniforms.uSampler=h;const f=h;h=l,l=f,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,h,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class SP extends ar{constructor(e=8,r=4,n=ar.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Wy(!0,e,r,n,i),this.blurYFilter=new Wy(!1,e,r,n,i),this.resolution=n,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const l=e.getFilterTexture();this.blurXFilter.apply(e,r,l,ei.CLEAR),this.blurYFilter.apply(e,l,n,i),e.returnFilterTexture(l)}else o?this.blurYFilter.apply(e,r,n,i):this.blurXFilter.apply(e,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var X4=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Xy extends ar{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(MC,X4,e),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,i,s]=Qe.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,l=s(o),h=n+(1-n)*o,c=o*(1-n)-l*i,f=o*(1-n)+l*i,p=o*(1-n)+l*i,m=n+o*(1-n),v=o*(1-n)-l*i,_=o*(1-n)-l*i,b=o*(1-n)+l*i,T=n+o*(1-n),x=[h,c,f,0,0,p,m,v,0,0,_,b,T,0,0,0,0,0,1,0];this._loadMatrix(x,r)}contrast(e,r){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(e=0,r){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,i,s){e=e||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=Qe.shared,[l,h,c]=o.setValue(n).toArray(),[f,p,m]=o.setValue(i).toArray(),v=[.3,.59,.11,0,0,l,h,c,e,0,f,p,m,r,0,l-f,h-p,c-m,0,0];this._loadMatrix(v,s)}night(e,r){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Xy.prototype.grayscale=Xy.prototype.greyscale;var Y4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Q4=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class q4 extends ar{constructor(e,r){const n=new et;e.renderable=!1,super(Q4,Y4,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,r==null&&(r=20),this.scale=new Fe(r,r)}apply(e,r,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),e.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var K4=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,Z4=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class J4 extends ar{constructor(){super(Z4,K4)}}var eL=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class tL extends ar{constructor(e=.5,r=Math.random()){super(MC,eL,{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const RE={AlphaFilter:G4,BlurFilter:SP,BlurFilterPass:Wy,ColorMatrixFilter:Xy,DisplacementFilter:q4,FXAAFilter:J4,NoiseFilter:tL};Object.entries(RE).forEach(([t,e])=>{Object.defineProperty(RE,t,{get(){return ke("7.1.0",`filters.${t} has moved to ${t}`),e}})});class rL{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Lt.system.add(this.tickerUpdate,this,ks.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Lt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const us=new rL;class ph{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=ph.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Fe,this.page=new Fe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class bf extends ph{constructor(){super(...arguments),this.client=new Fe,this.movement=new Fe,this.offset=new Fe,this.global=new Fe,this.screen=new Fe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,n,i,s,o,l,h,c,f,p,m,v,_,b){throw new Error("Method not implemented.")}}class gn extends bf{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class La extends bf{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}La.DOM_DELTA_PIXEL=0,La.DOM_DELTA_LINE=1,La.DOM_DELTA_PAGE=2;const nL=2048,iL=new Fe,Xg=new Fe;class sL{constructor(e){this.dispatch=new hh,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){us.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,iL.set(e,r),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,r){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const r=[e];for(let n=0;n<nL&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,n,i,s,o=!1){let l=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(us.pauseUpdate=!1),e.interactiveChildren&&e.children){const f=e.children;for(let p=f.length-1;p>=0;p--){const m=f[p],v=this.hitTestMoveRecursive(m,this._isInteractive(r)?r:m.eventMode,n,i,s,o||s(e,n));if(v){if(v.length>0&&!v[v.length-1].parent)continue;const _=e.isInteractive();(v.length>0||_)&&(_&&this._allInteractiveElements.push(e),v.push(e)),this._hitElements.length===0&&(this._hitElements=v),l=!0}}}const h=this._isInteractive(r),c=e.isInteractive();return h&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:l?this._hitElements:h&&!s(e,n)&&i(e,n)?c?[e]:[]:null}hitTestRecursive(e,r,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(us.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let c=h.length-1;c>=0;c--){const f=h[c],p=this.hitTestRecursive(f,this._isInteractive(r)?r:f.eventMode,n,i,s);if(p){if(p.length>0&&!p[p.length-1].parent)continue;const m=e.isInteractive();return(p.length>0||m)&&p.push(e),p}}}const o=this._isInteractive(r),l=e.isInteractive();return o&&i(e,n)?l?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){var n;if(e.hitArea&&(e.worldTransform.applyInverse(r,Xg),!e.hitArea.contains(Xg.x,Xg.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,r)))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){var s,o;r=r??e.type;const n=`on${r}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof gn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var h,c;if(!(e instanceof gn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((h=i.overTargets)==null?void 0:h.length)>0&&s!==r.target){const f=e.type==="mousemove"?"mouseout":"pointerout",p=this.createPointerEvent(e,f,s);if(this.dispatchEvent(p,"pointerout"),n&&this.dispatchEvent(p,"mouseout"),!r.composedPath().includes(s)){const m=this.createPointerEvent(e,"pointerleave",s);for(m.eventPhase=m.AT_TARGET;m.target&&!r.composedPath().includes(m.target);)m.currentTarget=m.target,this.notifyTarget(m),n&&this.notifyTarget(m,"mouseleave"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(p)}if(s!==r.target){const f=e.type==="mousemove"?"mouseover":"pointerover",p=this.clonePointerEvent(r,f);this.dispatchEvent(p,"pointerover"),n&&this.dispatchEvent(p,"mouseover");let m=s==null?void 0:s.parent;for(;m&&m!==this.rootTarget.parent&&m!==r.target;)m=m.parent;if(!m||m===this.rootTarget.parent){const v=this.clonePointerEvent(r,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==s&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),n&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(p)}const o=[],l=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),l&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),l&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),l&&o.push("globalmousemove"),this.cursor=(c=r.target)==null?void 0:c.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var o;if(!(e instanceof gn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof gn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.dispatchEvent(n,l?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let l=s;for(;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const h=n.button===2;this.notifyTarget(n,h?"rightupoutside":"mouseupoutside")}l=l.parent}delete i.pressTargetsByButton[e.button],o=l}if(o){const l=this.clonePointerEvent(n,"click");l.target=o,l.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:l.target,timeStamp:r});const h=i.clicksByButton[e.button];if(h.target===l.target&&r-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=l.target,h.timeStamp=r,l.detail=h.clickCount,l.pointerType==="mouse"){const c=l.button===2;this.dispatchEvent(l,c?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap"),this.freeEvent(l)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof gn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof La)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let n=1;n<e.length&&e[n].parent===r;n++)r=e[n];return r}createPointerEvent(e,r,n){const i=this.allocateEvent(gn);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(e){const r=this.allocateEvent(La);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const n=this.allocateEvent(gn);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=r??n.type,n}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof gn&&r instanceof gn&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof bf&&r instanceof bf&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const n=e.currentTarget._events[r];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const oL=1,aL={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Yy=class Qy{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new sL(null),us.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new gn(null),this.rootWheelEvent=new La(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Qy.defaultEventFeatures},{set:(r,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),r[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,Qy._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":r&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":r&&Object.assign(this.domElement.style,n);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=r.length;n<i;n++){const s=r[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,us.pointerMoved();const r=this.normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const n=r!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const l=this.bootstrapEvent(this.rootPointerEvent,i[s]);l.type+=n,this.rootBoundary.mapEvent(l)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this.removeEvents(),this.domElement=e,us.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;us.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;us.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,r,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(r-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,r.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=oL),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,r.push(n)}else r.push(e);return r}normalizeWheelEvent(e){const r=this.rootWheelEvent;return this.transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=aL[e.type]||e.type),e}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}};Yy.extension={name:"events",type:[oe.RendererSystem,oe.CanvasRendererSystem]},Yy.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let qy=Yy;me.add(qy);function kE(t){return t==="dynamic"||t==="static"}const lL={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??kE(qy.defaultEventMode)},set interactive(t){ke("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??qy.defaultEventMode},set eventMode(t){this._internalInteractive=kE(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof r=="object"?r.signal:void 0,s=typeof r=="object"?r.once===!0:!1,o=typeof e=="function"?void 0:e;t=n?`${t}capture`:t;const l=typeof e=="function"?e:e.handleEvent,h=this;i&&i.addEventListener("abort",()=>{h.off(t,l,o)}),s?h.once(t,l,o):h.on(t,l,o)},removeEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof ph))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};st.mixin(lL);const uL={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};st.mixin(uL);const hL=9,Qc=100,cL=0,dL=0,ME=2,DE=1,fL=-1e3,pL=-1e3,mL=2;class TP{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Pi.tablet||Pi.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${Qc}px`,r.style.height=`${Qc}px`,r.style.position="absolute",r.style.top=`${cL}px`,r.style.left=`${dL}px`,r.style.zIndex=ME.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${DE}px`,e.style.height=`${DE}px`,e.style.position="absolute",e.style.top=`${fL}px`,e.style.left=`${pL}px`,e.style.zIndex=mL.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const e=performance.now();if(Pi.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:l,resolution:h}=this.renderer,c=i/o*h,f=s/l*h;let p=this.div;p.style.left=`${r}px`,p.style.top=`${n}px`,p.style.width=`${o}px`,p.style.height=`${l}px`;for(let m=0;m<this.children.length;m++){const v=this.children[m];if(v.renderId!==this.renderId)v._accessibleActive=!1,Da(this.children,m,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,m--;else{p=v._accessibleDiv;let _=v.hitArea;const b=v.worldTransform;v.hitArea?(p.style.left=`${(b.tx+_.x*b.a)*c}px`,p.style.top=`${(b.ty+_.y*b.d)*f}px`,p.style.width=`${_.width*b.a*c}px`,p.style.height=`${_.height*b.d*f}px`):(_=v.getBounds(),this.capHitArea(_),p.style.left=`${_.x*c}px`,p.style.top=`${_.y*f}px`,p.style.width=`${_.width*c}px`,p.style.height=`${_.height*f}px`,p.title!==v.accessibleTitle&&v.accessibleTitle!==null&&(p.title=v.accessibleTitle),p.getAttribute("aria-label")!==v.accessibleHint&&v.accessibleHint!==null&&p.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==p.title||v.tabIndex!==p.tabIndex)&&(p.title=v.accessibleTitle,p.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:n}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${Qc}px`,r.style.height=`${Qc}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=ME.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new ph(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===hL&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}TP.extension={name:"accessibility",type:[oe.RendererPlugin,oe.CanvasRendererPlugin]};me.add(TP);var jt=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(jt||{});const Ef={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let qn,oa;function FE(){oa={bptc:qn.getExtension("EXT_texture_compression_bptc"),astc:qn.getExtension("WEBGL_compressed_texture_astc"),etc:qn.getExtension("WEBGL_compressed_texture_etc"),s3tc:qn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:qn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:qn.getExtension("WEBGL_compressed_texture_pvrtc")||qn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:qn.getExtension("WEBGL_compressed_texture_etc1"),atc:qn.getExtension("WEBGL_compressed_texture_atc")}}const gL={extension:{type:oe.DetectionParser,priority:2},test:async()=>{const t=le.ADAPTER.createCanvas().getContext("webgl");return t?(qn=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{oa||FE();const e=[];for(const r in oa)oa[r]&&e.push(r);return[...e,...t]},remove:async t=>(oa||FE(),t.filter(e=>!(e in oa)))};me.add(gL);class yL extends Yf{constructor(e,r={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,r),this.origin=n,this.buffer=i?new fy(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new fy(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class vo extends yL{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=vo._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||vo._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:l,levelWidth:h,levelHeight:c,levelBuffer:f}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,l,this.format,h,c,0,f)}return!0}onBlobLoaded(){this._levelBuffers=vo._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,r,n,i,s,o,l){const h=new Array(n);let c=e.byteOffset,f=o,p=l,m=f+i-1&~(i-1),v=p+s-1&~(s-1),_=m*v*Ef[r];for(let b=0;b<n;b++)h[b]={levelID:b,levelWidth:n>1?f:m,levelHeight:n>1?p:v,levelBuffer:new Uint8Array(e.buffer,c,_)},c+=_,f=f>>1||1,p=p>>1||1,m=f+i-1&~(i-1),v=p+s-1&~(s-1),_=m*v*Ef[r];return h}}const Yg=4,qc=124,vL=32,NE=20,_L=542327876,Kc={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},xL={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Zc={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},wL=1,bL=2,EL=4,SL=64,TL=512,AL=131072,CL=827611204,PL=861165636,IL=894720068,RL=808540228,kL=4,ML={[CL]:jt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[PL]:jt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[IL]:jt.COMPRESSED_RGBA_S3TC_DXT5_EXT},DL={70:jt.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:jt.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:jt.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:jt.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:jt.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:jt.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:jt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:jt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:jt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:jt.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:jt.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:jt.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:jt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function FL(t){const e=new Uint32Array(t);if(e[0]!==_L)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,qc/Uint32Array.BYTES_PER_ELEMENT),n=r[Kc.HEIGHT],i=r[Kc.WIDTH],s=r[Kc.MIPMAP_COUNT],o=new Uint32Array(t,Kc.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,vL/Uint32Array.BYTES_PER_ELEMENT),l=o[wL];if(l&EL){const h=o[xL.FOURCC];if(h!==RL){const E=ML[h],w=Yg+qc,A=new Uint8Array(t,w);return[new vo(A,{format:E,width:i,height:n,levels:s})]}const c=Yg+qc,f=new Uint32Array(e.buffer,c,NE/Uint32Array.BYTES_PER_ELEMENT),p=f[Zc.DXGI_FORMAT],m=f[Zc.RESOURCE_DIMENSION],v=f[Zc.MISC_FLAG],_=f[Zc.ARRAY_SIZE],b=DL[p];if(b===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${p}`);if(v===kL)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const T=new Array,x=Yg+qc+NE;if(_===1)T.push(new Uint8Array(t,x));else{const E=Ef[b];let w=0,A=i,P=n;for(let R=0;R<s;R++){const k=Math.max(1,A+3&-4),L=Math.max(1,P+3&-4),z=k*L*E;w+=z,A=A>>>1,P=P>>>1}let D=x;for(let R=0;R<_;R++)T.push(new Uint8Array(t,D,w)),D+=w}return T.map(E=>new vo(E,{format:b,width:i,height:n,levels:s}))}throw l&SL?new Error("DDSParser does not support uncompressed texture data."):l&TL?new Error("DDSParser does not supported YUV uncompressed texture data."):l&AL?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&bL?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const OE=[171,75,84,88,32,49,49,187,13,10,26,10],NL=67305985,pn={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Ky=64,BE={[ve.UNSIGNED_BYTE]:1,[ve.UNSIGNED_SHORT]:2,[ve.INT]:4,[ve.UNSIGNED_INT]:4,[ve.FLOAT]:4,[ve.HALF_FLOAT]:8},OL={[ee.RGBA]:4,[ee.RGB]:3,[ee.RG]:2,[ee.RED]:1,[ee.LUMINANCE]:1,[ee.LUMINANCE_ALPHA]:2,[ee.ALPHA]:1},BL={[ve.UNSIGNED_SHORT_4_4_4_4]:2,[ve.UNSIGNED_SHORT_5_5_5_1]:2,[ve.UNSIGNED_SHORT_5_6_5]:2};function LL(t,e,r=!1){const n=new DataView(e);if(!UL(t,n))return null;const i=n.getUint32(pn.ENDIANNESS,!0)===NL,s=n.getUint32(pn.GL_TYPE,i),o=n.getUint32(pn.GL_FORMAT,i),l=n.getUint32(pn.GL_INTERNAL_FORMAT,i),h=n.getUint32(pn.PIXEL_WIDTH,i),c=n.getUint32(pn.PIXEL_HEIGHT,i)||1,f=n.getUint32(pn.PIXEL_DEPTH,i)||1,p=n.getUint32(pn.NUMBER_OF_ARRAY_ELEMENTS,i)||1,m=n.getUint32(pn.NUMBER_OF_FACES,i),v=n.getUint32(pn.NUMBER_OF_MIPMAP_LEVELS,i),_=n.getUint32(pn.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||f!==1)throw new Error("Only 2D textures are supported");if(m!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(p!==1)throw new Error("WebGL does not support array textures");const b=4,T=4,x=h+3&-4,E=c+3&-4,w=new Array(p);let A=h*c;s===0&&(A=x*E);let P;if(s!==0?BE[s]?P=BE[s]*OL[o]:P=BL[s]:P=Ef[l],P===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const D=r?GL(n,_,i):null;let R=A*P,k=h,L=c,z=x,re=E,Z=Ky+_;for(let B=0;B<v;B++){const Q=n.getUint32(Z,i);let ue=Z+4;for(let _e=0;_e<p;_e++){let de=w[_e];de||(de=w[_e]=new Array(v)),de[B]={levelID:B,levelWidth:v>1||s!==0?k:z,levelHeight:v>1||s!==0?L:re,levelBuffer:new Uint8Array(e,ue,R)},ue+=R}Z+=Q+4,Z=Z%4!==0?Z+4-Z%4:Z,k=k>>1||1,L=L>>1||1,z=k+b-1&~(b-1),re=L+T-1&~(T-1),R=z*re*P}return s!==0?{uncompressed:w.map(B=>{let Q=B[0].levelBuffer,ue=!1;return s===ve.FLOAT?Q=new Float32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4):s===ve.UNSIGNED_INT?(ue=!0,Q=new Uint32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)):s===ve.INT&&(ue=!0,Q=new Int32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)),{resource:new Yf(Q,{width:B[0].levelWidth,height:B[0].levelHeight}),type:s,format:ue?zL(o):o}}),kvData:D}:{compressed:w.map(B=>new vo(null,{format:l,width:h,height:c,levels:v,levelBuffers:B})),kvData:D}}function UL(t,e){for(let r=0;r<OE.length;r++)if(e.getUint8(r)!==OE[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function zL(t){switch(t){case ee.RGBA:return ee.RGBA_INTEGER;case ee.RGB:return ee.RGB_INTEGER;case ee.RG:return ee.RG_INTEGER;case ee.RED:return ee.RED_INTEGER;default:return t}}function GL(t,e,r){const n=new Map;let i=0;for(;i<e;){const s=t.getUint32(Ky+i,r),o=Ky+i+4,l=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let h=0;for(;h<s&&t.getUint8(o+h)!==0;h++);if(h===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,h)),f=new DataView(t.buffer,o+h+1,s-h-1);n.set(c,f),i+=4+s+l}return n}const $L={extension:{type:oe.LoadParser,priority:Mn.High},name:"loadDDS",test(t){return Os(t,".dds")},async load(t,e,r){const n=await(await le.ADAPTER.fetch(t)).arrayBuffer(),i=FL(n).map(s=>{const o=new Se(s,{mipmap:ui.OFF,alphaMode:_r.NO_PREMULTIPLIED_ALPHA,resolution:Bi(t),...e.data});return fh(o,r,t)});return i.length===1?i[0]:i},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};me.add($L);const HL={extension:{type:oe.LoadParser,priority:Mn.High},name:"loadKTX",test(t){return Os(t,".ktx")},async load(t,e,r){const n=await(await le.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=LL(t,n),l=i??s,h={mipmap:ui.OFF,alphaMode:_r.NO_PREMULTIPLIED_ALPHA,resolution:Bi(t),...e.data},c=l.map(f=>{l===s&&Object.assign(h,{type:f.type,format:f.format});const p=f.resource??f,m=new Se(p,h);return m.ktxKeyValueData=o,fh(m,r,t)});return c.length===1?c[0]:c},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};me.add(HL);const jL=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],VL={extension:oe.ResolveParser,test:t=>{const e=zt.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var n,i;const e=t.split("."),r=e.pop();if(["ktx","dds"].includes(r)){const s=e.pop();if(jL.includes(s))return{resolution:parseFloat(((n=le.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:s,src:t}}return{resolution:parseFloat(((i=le.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:r,src:t}}};me.add(VL);const Jc=new Ae,WL=4,AP=class ru{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,r,n,i){const s=new Image;return s.src=await this.base64(e,r,n,i),s}async base64(e,r,n,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,l)=>{s.toBlob(h=>{if(!h){l(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=l,c.readAsDataURL(h)},r,n)});if(s.toDataURL!==void 0)return s.toDataURL(r,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:r,quality:n});return new Promise((l,h)=>{const c=new FileReader;c.onload=()=>l(c.result),c.onerror=h,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:l}=this._rawPixels(e,r);o&&ru._flipY(n,i,s),l&&ru._unpremultiplyAlpha(n);const h=new bF(i,s,1),c=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return h.context.putImageData(c,0,0),h.canvas}pixels(e,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:l}=this._rawPixels(e,r);return o&&ru._flipY(n,i,s),l&&ru._unpremultiplyAlpha(n),n}_rawPixels(e,r){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,l,h=!1;e&&(e instanceof Ro?l=e:(l=n.generateTexture(e,{region:r,resolution:n.resolution,multisample:n.multisample}),h=!0,r&&(Jc.width=r.width,Jc.height=r.height,r=Jc)));const c=n.gl;if(l){if(i=l.baseTexture.resolution,r=r??l.frame,s=!1,o=l.baseTexture.alphaMode>0&&l.baseTexture.format===ee.RGBA,!h){n.renderTexture.bind(l);const v=l.framebuffer.glFramebuffers[n.CONTEXT_UID];v.blitFramebuffer&&n.framebuffer.bind(v.blitFramebuffer)}}else i=n.resolution,r||(r=Jc,r.width=n.width/i,r.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const f=Math.max(Math.round(r.width*i),1),p=Math.max(Math.round(r.height*i),1),m=new Uint8Array(WL*f*p);return c.readPixels(Math.round(r.x*i),Math.round(r.y*i),f,p,c.RGBA,c.UNSIGNED_BYTE,m),h&&(l==null||l.destroy(!0)),{pixels:m,width:f,height:p,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,r,n){const i=r<<2,s=n>>1,o=new Uint8Array(i);for(let l=0;l<s;l++){const h=l*i,c=(n-l-1)*i;o.set(e.subarray(h,h+i)),e.copyWithin(h,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const r=e.length;for(let n=0;n<r;n+=4){const i=e[n+3];if(i!==0){const s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};AP.extension={name:"extract",type:oe.RendererSystem};let XL=AP;me.add(XL);class YL{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function QL(t,e){var n;let r=!1;if((n=t==null?void 0:t._textures)!=null&&n.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof ne){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),r=!0)}}return r}function qL(t,e){if(t.baseTexture instanceof Se){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function KL(t,e){if(t._texture&&t._texture instanceof ne){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function ZL(t,e){return e instanceof y1?(e.updateText(!0),!0):!1}function JL(t,e){if(e instanceof Er){const r=e.toFontString();return os.measureFont(r),!0}return!1}function eU(t,e){if(t instanceof y1){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function tU(t,e){return t instanceof Er?(e.includes(t)||e.push(t),!0):!1}const CP=class PP{constructor(e){this.limiter=new YL(PP.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(eU),this.registerFindHook(tU),this.registerFindHook(QL),this.registerFindHook(qL),this.registerFindHook(KL),this.registerUploadHook(ZL),this.registerUploadHook(JL)}upload(e){return new Promise(r=>{e&&this.add(e),this.queue.length?(this.completes.push(r),this.ticking||(this.ticking=!0,Lt.system.addOnce(this.tick,this,ks.UTILITY))):r()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let r=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Lt.system.addOnce(this.tick,this,ks.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let r=0,n=e.length;r<n;r++)e[r]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](e,this.queue);r++);if(e instanceof ur)for(let r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}destroy(){this.ticking&&Lt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};CP.uploadsPerFrame=4;let Zy=CP;Object.defineProperties(le,{UPLOADS_PER_FRAME:{get(){return Zy.uploadsPerFrame},set(t){ke("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Zy.uploadsPerFrame=t}}});function IP(t,e){return e instanceof Se?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function rU(t,e){if(!(e instanceof Ba))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&IP(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function nU(t,e){return t instanceof Ba?(e.push(t),!0):!1}class RP extends Zy{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(nU),this.registerUploadHook(IP),this.registerUploadHook(rU)}}RP.extension={name:"prepare",type:oe.RendererSystem};me.add(RP);const kP=class nu{constructor(e,r,n){this.linkedSheets=[],(e instanceof Se||e instanceof ne)&&(e={texture:e,data:r,resolutionFilename:n});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:l=""}=e;this.cachePrefix=l,this._texture=i instanceof ne?i:null,this.baseTexture=i instanceof Se?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const h=this.baseTexture.resource;this.resolution=this._updateResolution(o||(h?h.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:r}=this.data.meta;let n=Bi(e,null);return n===null&&(n=typeof r=="number"?r:parseFloat(r??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=nu.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const n=nu.BATCH_SIZE;for(;r-e<n&&r<this._frameKeys.length;){const i=this._frameKeys[r],s=this._frames[i],o=s.frame;if(o){let l=null,h=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,f=new Ae(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?l=new Ae(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):l=new Ae(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new Ae(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new ne(this.baseTexture,l,f,h,s.rotated?2:0,s.anchor,s.borders),ne.addToCache(this.textures[i],this.cachePrefix+i.toString())}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let n=0;n<e[r].length;n++){const i=e[r][n];this.animations[r].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*nu.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*nu.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var r;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)==null||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};kP.BATCH_SIZE=1e3;let LE=kP;const iU=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function MP(t,e,r){const n={};if(t.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!r){const i=zt.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(n,MP([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return n}const sU={extension:oe.Asset,cache:{test:t=>t instanceof LE,getCacheableAssets:(t,e)=>MP(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),n=e.pop();return r==="json"&&iU.includes(n)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=le.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:oe.LoadParser,priority:Mn.Normal},async testParse(t,e){return zt.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var f,p;const{texture:n,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=zt.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(n&&n.baseTexture)l=n;else{const m=Dy(o+(i??t.meta.image),e.src);l=(await r.load([m]))[m]}const h=new LE({texture:l.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await h.parse();const c=(f=t==null?void 0:t.meta)==null?void 0:f.related_multi_packs;if(Array.isArray(c)){const m=[];for(const _ of c){if(typeof _!="string")continue;let b=o+_;(p=e.data)!=null&&p.ignoreMultiPack||(b=Dy(b,e.src),m.push(r.load({src:b,data:{ignoreMultiPack:!0}})))}const v=await Promise.all(m);h.linkedSheets=v,v.forEach(_=>{_.linkedSheets=[h].concat(h.linkedSheets.filter(b=>b!==_))})}return h},unload(t){t.destroy(!0)}}};me.add(sU);const Jy=class aa extends Er{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new aa(Object.keys(aa.defaultOptions).reduce((r,n)=>({...r,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete aa.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,r={}){const{availableFonts:n}=aa;if(n[e]){const i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return le.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const l=URL.createObjectURL(i),h=new FileReader;h.onload=()=>s([l,h.result]),h.onerror=o,h.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:zt.basename(e,zt.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},r);n[e]=o,this._fonts.push(o),this.styleID++;const l=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=l,await l.load(),document.fonts.add(l),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const r=e.filter(n=>!this._overrides.includes(n));r.length>0&&(this._overrides.push(...r),this.styleID++)}removeOverride(...e){const r=e.filter(n=>this._overrides.includes(n));r.length>0&&(this._overrides=this._overrides.filter(n=>!r.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,r)=>`${e}
            @font-face {
                font-family: "${r.family}";
                src: url('${r.dataSrc}');
                font-weight: ${r.weight};
                font-style: ${r.style};
                font-display: ${r.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=vF(e)),typeof e=="number"?yF(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const r=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&r<1&&(e+=(r*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,aa.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(r=>setTimeout(r,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=le.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Jy.availableFonts={},Jy.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Qg=Jy;const ed=class la extends pi{constructor(e="",r={}){super(ne.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=ne.from(n,{scaleMode:le.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new Ae,i.trim=new Ae,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",l=document.createElementNS(s,"svg"),h=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),f=document.createElementNS(o,"style");h.setAttribute("width","10000"),h.setAttribute("height","10000"),h.style.overflow="hidden",l.appendChild(h),this.maxWidth=la.defaultMaxWidth,this.maxHeight=la.defaultMaxHeight,this._domElement=c,this._styleElement=f,this._svgRoot=l,this._foreignObject=h,this._foreignObject.appendChild(f),this._foreignObject.appendChild(c),this._image=n,this._loadImage=new Image,this._autoResolution=la.defaultAutoResolution,this._resolution=la.defaultResolution??le.RESOLUTION,this.text=e,this.style=r}measureText(e){var f,p;const{text:r,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:r,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:l}=s;(o>this.maxWidth||l>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const h=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(l));return this._svgRoot.setAttribute("width",h.toString()),this._svgRoot.setAttribute("height",c.toString()),r!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(f=this._style)==null?void 0:f.toCSS(i)}),this._styleElement.textContent=(p=this._style)==null?void 0:p.toGlobalCSS()),{width:h+n.padding*2,height:c+n.padding*2}}async updateText(e=!0){const{style:r,_image:n,_loadImage:i}=this;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const l=this._updateID;await new Promise(h=>{i.onload=async()=>{if(l<this._updateID){h();return}await r.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),h()};const c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:r,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=r;r.trim.width=r._frame.width=n.width/i,r.trim.height=r._frame.height=n.height/i,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-s*2,r.orig.height=r._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,i,s,o,l;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},la.defaultDestroyOptions,e),super.destroy(e);const r=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=r,(i=this._svgRoot)==null||i.remove(),this._svgRoot=r,(s=this._domElement)==null||s.remove(),this._domElement=r,(o=this._foreignObject)==null||o.remove(),this._foreignObject=r,(l=this._styleElement)==null||l.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const r=fs(this.scale.x)||1;this.scale.x=r*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const r=fs(this.scale.y)||1;this.scale.y=r*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Qg?(this.ownsStyle=!1,this._style=e):e instanceof Er?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Qg.from(e)):(this.ownsStyle=!0,this._style=new Qg(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};ed.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},ed.defaultMaxWidth=2024,ed.defaultMaxHeight=2024,ed.defaultAutoResolution=!0;function oU(t){t.beginFill(16724736,.4),t.moveTo(-19,-16),t.lineTo(19,-16),t.lineTo(19,16),t.lineTo(-19,16),t.endFill()}const aU=X.forwardRef(({name:t,x:e,y:r},n)=>Y.jsx(fe.Graphics,{ref:n,name:t,draw:oU,x:e,y:r,visible:!1})),Yu=t=>[...Array(t).keys()],lU=({name:t,isExploding:e,x:r,handleRemove:n})=>{const[i,s]=X.useState([]),[o,l]=X.useState(0),[h,c]=X.useState(0),f=X.useRef(null),p=X.useRef(Math.round(Math.random())),[m]=Be(wt.travelSpeed),v=X.useCallback(_=>{e&&_===6&&n()},[e]);return X.useEffect(()=>{const _=Yu(7).map(b=>ne.from(`${we.baseUrl}/environment/asteroid/asteroid-${b}.png`));s(_)},[]),fe.useTick(()=>{var T;const _=Math.random()*.005;if(p.current===1?c(h+_):c(h-_),e)return;const b=((T=f==null?void 0:f.current)==null?void 0:T.height)??0;if(o+1>we.canvas.height+b)n();else{const x=m<=1?1:m;l(E=>E+1*x)}}),i.length===0?null:Y.jsxs(Y.Fragment,{children:[Y.jsx(aU,{name:t,x:r,y:o}),Y.jsx(fe.AnimatedSprite,{ref:f,eventMode:"static",animationSpeed:.1,isPlaying:e,textures:i,x:r,y:o,anchor:{x:.5,y:.5},rotation:h,zIndex:20,onFrameChange:v})]})};function uU({collidingAsteroids:t,setCollidingAsteroids:e}){const[r,n]=X.useState([]),[i,s]=X.useState(3),[o,l]=X.useState(10),[h]=Be(Sr.isOver),c=X.useRef(-1),f=X.useRef(-1);fe.useTick(()=>{if(h)return;const m=Math.floor(performance.now()/1e3);if(m!==c.current&&m%i===0&&r.length<o){const v={id:E1(),x:Cd()};n(_=>[..._,v]),c.current=m}m!==f.current&&m%10===0&&i>1&&(s(v=>v-1),l(v=>v+10),f.current=m)});const p=X.useCallback(m=>{n(v=>v.filter(_=>_.id!==m))},[]);return Y.jsx(fe.Container,{name:"Asteroid-Belt",children:r.map(m=>Y.jsx(lU,{name:`Asteroid-${m.id}`,x:m.x,isExploding:t.includes(`Asteroid-${m.id}`),handleRemove:()=>{p(m.id),e(t.filter(v=>v!==`Asteroid-${m.id}`))}},m.id))})}var S1=gh(),Te=t=>mh(t,S1),T1=gh();Te.write=t=>mh(t,T1);var op=gh();Te.onStart=t=>mh(t,op);var A1=gh();Te.onFrame=t=>mh(t,A1);var C1=gh();Te.onFinish=t=>mh(t,C1);var Ua=[];Te.setTimeout=(t,e)=>{const r=Te.now()+e,n=()=>{const s=Ua.findIndex(o=>o.cancel==n);~s&&Ua.splice(s,1),ys-=~s?1:0},i={time:r,handler:t,cancel:n};return Ua.splice(DP(r),0,i),ys+=1,FP(),i};var DP=t=>~(~Ua.findIndex(e=>e.time>t)||~Ua.length);Te.cancel=t=>{op.delete(t),A1.delete(t),C1.delete(t),S1.delete(t),T1.delete(t)};Te.sync=t=>{ev=!0,Te.batchedUpdates(t),ev=!1};Te.throttle=t=>{let e;function r(){try{t(...e)}finally{e=null}}function n(...i){e=i,Te.onStart(r)}return n.handler=t,n.cancel=()=>{op.delete(r),e=null},n};var P1=typeof window<"u"?window.requestAnimationFrame:()=>{};Te.use=t=>P1=t;Te.now=typeof performance<"u"?()=>performance.now():Date.now;Te.batchedUpdates=t=>t();Te.catch=console.error;Te.frameLoop="always";Te.advance=()=>{Te.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):OP()};var gs=-1,ys=0,ev=!1;function mh(t,e){ev?(e.delete(t),t(0)):(e.add(t),FP())}function FP(){gs<0&&(gs=0,Te.frameLoop!=="demand"&&P1(NP))}function hU(){gs=-1}function NP(){~gs&&(P1(NP),Te.batchedUpdates(OP))}function OP(){const t=gs;gs=Te.now();const e=DP(gs);if(e&&(BP(Ua.splice(0,e),r=>r.handler()),ys-=e),!ys){hU();return}op.flush(),S1.flush(t?Math.min(64,gs-t):16.667),A1.flush(),T1.flush(),C1.flush()}function gh(){let t=new Set,e=t;return{add(r){ys+=e==t&&!t.has(r)?1:0,t.add(r)},delete(r){return ys-=e==t&&t.has(r)?1:0,t.delete(r)},flush(r){e.size&&(t=new Set,ys-=e.size,BP(e,n=>n(r)&&t.add(n)),ys+=t.size,e=t)}}}function BP(t,e){t.forEach(r=>{try{e(r)}catch(n){Te.catch(n)}})}var cU=Object.defineProperty,dU=(t,e)=>{for(var r in e)cU(t,r,{get:e[r],enumerable:!0})},kn={};dU(kn,{assign:()=>pU,colors:()=>Cs,createStringInterpolator:()=>R1,skipAnimation:()=>UP,to:()=>LP,willAdvance:()=>k1});function tv(){}var fU=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0}),te={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ei(t,e){if(te.arr(t)){if(!te.arr(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return t===e}var Oe=(t,e)=>t.forEach(e);function di(t,e,r){if(te.arr(t)){for(let n=0;n<t.length;n++)e.call(r,t[n],`${n}`);return}for(const n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n)}var Dr=t=>te.und(t)?[]:te.arr(t)?t:[t];function _u(t,e){if(t.size){const r=Array.from(t);t.clear(),Oe(r,e)}}var iu=(t,...e)=>_u(t,r=>r(...e)),I1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),R1,LP,Cs=null,UP=!1,k1=tv,pU=t=>{t.to&&(LP=t.to),t.now&&(Te.now=t.now),t.colors!==void 0&&(Cs=t.colors),t.skipAnimation!=null&&(UP=t.skipAnimation),t.createStringInterpolator&&(R1=t.createStringInterpolator),t.requestAnimationFrame&&Te.use(t.requestAnimationFrame),t.batchedUpdates&&(Te.batchedUpdates=t.batchedUpdates),t.willAdvance&&(k1=t.willAdvance),t.frameLoop&&(Te.frameLoop=t.frameLoop)},xu=new Set,Jr=[],qg=[],Sf=0,ap={get idle(){return!xu.size&&!Jr.length},start(t){Sf>t.priority?(xu.add(t),Te.onStart(mU)):(zP(t),Te(rv))},advance:rv,sort(t){if(Sf)Te.onFrame(()=>ap.sort(t));else{const e=Jr.indexOf(t);~e&&(Jr.splice(e,1),GP(t))}},clear(){Jr=[],xu.clear()}};function mU(){xu.forEach(zP),xu.clear(),Te(rv)}function zP(t){Jr.includes(t)||GP(t)}function GP(t){Jr.splice(gU(Jr,e=>e.priority>t.priority),0,t)}function rv(t){const e=qg;for(let r=0;r<Jr.length;r++){const n=Jr[r];Sf=n.priority,n.idle||(k1(n),n.advance(t),n.idle||e.push(n))}return Sf=0,qg=Jr,qg.length=0,Jr=e,Jr.length>0}function gU(t,e){const r=t.findIndex(e);return r<0?t.length:r}var yU=(t,e,r)=>Math.min(Math.max(r,t),e),vU={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Tn="[-+]?\\d*\\.?\\d+",Tf=Tn+"%";function lp(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var _U=new RegExp("rgb"+lp(Tn,Tn,Tn)),xU=new RegExp("rgba"+lp(Tn,Tn,Tn,Tn)),wU=new RegExp("hsl"+lp(Tn,Tf,Tf)),bU=new RegExp("hsla"+lp(Tn,Tf,Tf,Tn)),EU=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,SU=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,TU=/^#([0-9a-fA-F]{6})$/,AU=/^#([0-9a-fA-F]{8})$/;function CU(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=TU.exec(t))?parseInt(e[1]+"ff",16)>>>0:Cs&&Cs[t]!==void 0?Cs[t]:(e=_U.exec(t))?(ta(e[1])<<24|ta(e[2])<<16|ta(e[3])<<8|255)>>>0:(e=xU.exec(t))?(ta(e[1])<<24|ta(e[2])<<16|ta(e[3])<<8|GE(e[4]))>>>0:(e=EU.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=AU.exec(t))?parseInt(e[1],16)>>>0:(e=SU.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=wU.exec(t))?(UE(zE(e[1]),td(e[2]),td(e[3]))|255)>>>0:(e=bU.exec(t))?(UE(zE(e[1]),td(e[2]),td(e[3]))|GE(e[4]))>>>0:null}function Kg(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function UE(t,e,r){const n=r<.5?r*(1+e):r+e-r*e,i=2*r-n,s=Kg(i,n,t+1/3),o=Kg(i,n,t),l=Kg(i,n,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(l*255)<<8}function ta(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function zE(t){return(parseFloat(t)%360+360)%360/360}function GE(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function td(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function $E(t){let e=CU(t);if(e===null)return t;e=e||0;const r=(e&4278190080)>>>24,n=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${r}, ${n}, ${i}, ${s})`}var Qu=(t,e,r)=>{if(te.fun(t))return t;if(te.arr(t))return Qu({range:t,output:e,extrapolate:r});if(te.str(t.output[0]))return R1(t);const n=t,i=n.output,s=n.range||[0,1],o=n.extrapolateLeft||n.extrapolate||"extend",l=n.extrapolateRight||n.extrapolate||"extend",h=n.easing||(c=>c);return c=>{const f=IU(c,s);return PU(c,s[f],s[f+1],i[f],i[f+1],h,o,l,n.map)}};function PU(t,e,r,n,i,s,o,l,h){let c=h?h(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>r){if(l==="identity")return c;l==="clamp"&&(c=r)}return n===i?n:e===r?t<=e?n:i:(e===-1/0?c=-c:r===1/0?c=c-e:c=(c-e)/(r-e),c=s(c),n===-1/0?c=-c:i===1/0?c=c+n:c=c*(i-n)+n,c)}function IU(t,e){for(var r=1;r<e.length-1&&!(e[r]>=t);++r);return r-1}var RU=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return yU(0,1,i/t)},Af=1.70158,rd=Af*1.525,HE=Af+1,jE=2*Math.PI/3,VE=2*Math.PI/4.5,nd=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,kU={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>HE*t*t*t-Af*t*t,easeOutBack:t=>1+HE*Math.pow(t-1,3)+Af*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((rd+1)*2*t-rd)/2:(Math.pow(2*t-2,2)*((rd+1)*(t*2-2)+rd)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*jE),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*jE)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*VE))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*VE)/2+1,easeInBounce:t=>1-nd(1-t),easeOutBounce:nd,easeInOutBounce:t=>t<.5?(1-nd(1-2*t))/2:(1+nd(2*t-1))/2,steps:RU},qu=Symbol.for("FluidValue.get"),Ja=Symbol.for("FluidValue.observers"),Zr=t=>!!(t&&t[qu]),gr=t=>t&&t[qu]?t[qu]():t,WE=t=>t[Ja]||null;function MU(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ku(t,e){const r=t[Ja];r&&r.forEach(n=>{MU(n,e)})}var $P=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");DU(this,t)}},DU=(t,e)=>HP(t,qu,e);function ol(t,e){if(t[qu]){let r=t[Ja];r||HP(t,Ja,r=new Set),r.has(e)||(r.add(e),t.observerAdded&&t.observerAdded(r.size,e))}return e}function Zu(t,e){const r=t[Ja];if(r&&r.has(e)){const n=r.size-1;n?r.delete(e):t[Ja]=null,t.observerRemoved&&t.observerRemoved(n,e)}}var HP=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0}),Pd=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,FU=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,XE=new RegExp(`(${Pd.source})(%|[a-z]+)`,"i"),NU=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,up=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,jP=t=>{const[e,r]=OU(t);if(!e||I1())return t;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(r&&r.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(r);return i||t}else{if(r&&up.test(r))return jP(r);if(r)return r}return t},OU=t=>{const e=up.exec(t);if(!e)return[,];const[,r,n]=e;return[r,n]},Zg,BU=(t,e,r,n,i)=>`rgba(${Math.round(e)}, ${Math.round(r)}, ${Math.round(n)}, ${i})`,VP=t=>{Zg||(Zg=Cs?new RegExp(`(${Object.keys(Cs).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>gr(s).replace(up,jP).replace(FU,$E).replace(Zg,$E)),r=e.map(s=>s.match(Pd).map(Number)),i=r[0].map((s,o)=>r.map(l=>{if(!(o in l))throw Error('The arity of each "output" value must be equal');return l[o]})).map(s=>Qu({...t,output:s}));return s=>{var h;const o=!XE.test(e[0])&&((h=e.find(c=>XE.test(c)))==null?void 0:h.replace(Pd,""));let l=0;return e[0].replace(Pd,()=>`${i[l++](s)}${o||""}`).replace(NU,BU)}},M1="react-spring: ",WP=t=>{const e=t;let r=!1;if(typeof e!="function")throw new TypeError(`${M1}once requires a function parameter`);return(...n)=>{r||(e(...n),r=!0)}},LU=WP(console.warn);function UU(){LU(`${M1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var zU=WP(console.warn);function GU(){zU(`${M1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function hp(t){return te.str(t)&&(t[0]=="#"||/\d/.test(t)||!I1()&&up.test(t)||t in(Cs||{}))}var D1=I1()?X.useEffect:X.useLayoutEffect,$U=()=>{const t=X.useRef(!1);return D1(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function XP(){const t=X.useState()[1],e=$U();return()=>{e.current&&t(Math.random())}}function HU(t,e){const[r]=X.useState(()=>({inputs:e,result:t()})),n=X.useRef(),i=n.current;let s=i;return s?e&&s.inputs&&jU(e,s.inputs)||(s={inputs:e,result:t()}):s=r,X.useEffect(()=>{n.current=s,i==r&&(r.inputs=r.result=void 0)},[s]),s.result}function jU(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var YP=t=>X.useEffect(t,VU),VU=[];function YE(t){const e=X.useRef();return X.useEffect(()=>{e.current=t}),e.current}var Ju=Symbol.for("Animated:node"),WU=t=>!!t&&t[Ju]===t,Jn=t=>t&&t[Ju],F1=(t,e)=>fU(t,Ju,e),cp=t=>t&&t[Ju]&&t[Ju].getPayload(),QP=class{constructor(){F1(this,this)}getPayload(){return this.payload||[]}},yh=class extends QP{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,te.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new yh(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return te.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,te.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},eh=class extends yh{constructor(t){super(0),this._string=null,this._toString=Qu({output:[t,t]})}static create(t){return new eh(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(te.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Qu({output:[this.getValue(),t]})),this._value=0,super.reset()}},Cf={dependencies:null},dp=class extends QP{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return di(this.source,(r,n)=>{WU(r)?e[n]=r.getValue(t):Zr(r)?e[n]=gr(r):t||(e[n]=r)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Oe(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return di(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Cf.dependencies&&Zr(t)&&Cf.dependencies.add(t);const e=cp(t);e&&Oe(e,r=>this.add(r))}},qP=class extends dp{constructor(t){super(t)}static create(t){return new qP(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((r,n)=>r.setValue(t[n])).some(Boolean):(super.setValue(t.map(XU)),!0)}};function XU(t){return(hp(t)?eh:yh).create(t)}function nv(t){const e=Jn(t);return e?e.constructor:te.arr(t)?qP:hp(t)?eh:yh}var QE=(t,e)=>{const r=!te.fun(t)||t.prototype&&t.prototype.isReactComponent;return X.forwardRef((n,i)=>{const s=X.useRef(null),o=r&&X.useCallback(_=>{s.current=qU(i,_)},[i]),[l,h]=QU(n,e),c=XP(),f=()=>{const _=s.current;if(r&&!_)return;(_?e.applyAnimatedValues(_,l.getValue(!0)):!1)===!1&&c()},p=new YU(f,h),m=X.useRef();D1(()=>(m.current=p,Oe(h,_=>ol(_,p)),()=>{m.current&&(Oe(m.current.deps,_=>Zu(_,m.current)),Te.cancel(m.current.update))})),X.useEffect(f,[]),YP(()=>()=>{const _=m.current;Oe(_.deps,b=>Zu(b,_))});const v=e.getComponentProps(l.getValue());return X.createElement(t,{...v,ref:o})})},YU=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Te.write(this.update)}};function QU(t,e){const r=new Set;return Cf.dependencies=r,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new dp(t),Cf.dependencies=null,[t,r]}function qU(t,e){return t&&(te.fun(t)?t(e):t.current=e),e}var qE=Symbol.for("AnimatedComponent"),KP=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:r=i=>new dp(i),getComponentProps:n=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:r,getComponentProps:n},s=o=>{const l=KE(o)||"Anonymous";return te.str(o)?o=s[o]||(s[o]=QE(o,i)):o=o[qE]||(o[qE]=QE(o,i)),o.displayName=`Animated(${l})`,o};return di(t,(o,l)=>{te.arr(t)&&(l=KE(o)),s[l]=s(o)}),{animated:s}},KE=t=>te.str(t)?t:t&&te.str(t.displayName)?t.displayName:te.fun(t)&&t.name||null;function lo(t,...e){return te.fun(t)?t(...e):t}var wu=(t,e)=>t===!0||!!(e&&t&&(te.fun(t)?t(e):Dr(t).includes(e))),ZP=(t,e)=>te.obj(t)?e&&t[e]:t,JP=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,KU=t=>t,N1=(t,e=KU)=>{let r=ZU;t.default&&t.default!==!0&&(t=t.default,r=Object.keys(t));const n={};for(const i of r){const s=e(t[i],i);te.und(s)||(n[i]=s)}return n},ZU=["config","onProps","onStart","onChange","onPause","onResume","onRest"],JU={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function e5(t){const e={};let r=0;if(di(t,(n,i)=>{JU[i]||(e[i]=n,r++)}),r)return e}function eI(t){const e=e5(t);if(e){const r={to:e};return di(t,(n,i)=>i in e||(r[i]=n)),r}return{...t}}function th(t){return t=gr(t),te.arr(t)?t.map(th):hp(t)?kn.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function t5(t){for(const e in t)return!0;return!1}function iv(t){return te.fun(t)||te.arr(t)&&te.obj(t[0])}function r5(t,e){var r;(r=t.ref)==null||r.delete(t),e==null||e.delete(t)}function n5(t,e){var r;e&&t.ref!==e&&((r=t.ref)==null||r.delete(t),e.add(t),t.ref=e)}var i5={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},sv={...i5.default,mass:1,damping:1,easing:kU.linear,clamp:!1},s5=class{constructor(){this.velocity=0,Object.assign(this,sv)}};function o5(t,e,r){r&&(r={...r},ZE(r,e),e={...r,...e}),ZE(t,e),Object.assign(t,e);for(const o in sv)t[o]==null&&(t[o]=sv[o]);let{frequency:n,damping:i}=t;const{mass:s}=t;return te.und(n)||(n<.01&&(n=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/n,2)*s,t.friction=4*Math.PI*i*s/n),t}function ZE(t,e){if(!te.und(e.decay))t.duration=void 0;else{const r=!te.und(e.tension)||!te.und(e.friction);(r||!te.und(e.frequency)||!te.und(e.damping)||!te.und(e.mass))&&(t.duration=void 0,t.decay=void 0),r&&(t.frequency=void 0)}}var JE=[],a5=class{constructor(){this.changed=!1,this.values=JE,this.toValues=null,this.fromValues=JE,this.config=new s5,this.immediate=!1}};function tI(t,{key:e,props:r,defaultProps:n,state:i,actions:s}){return new Promise((o,l)=>{let h,c,f=wu(r.cancel??(n==null?void 0:n.cancel),e);if(f)v();else{te.und(r.pause)||(i.paused=wu(r.pause,e));let _=n==null?void 0:n.pause;_!==!0&&(_=i.paused||wu(_,e)),h=lo(r.delay||0,e),_?(i.resumeQueue.add(m),s.pause()):(s.resume(),m())}function p(){i.resumeQueue.add(m),i.timeouts.delete(c),c.cancel(),h=c.time-Te.now()}function m(){h>0&&!kn.skipAnimation?(i.delayed=!0,c=Te.setTimeout(v,h),i.pauseQueue.add(p),i.timeouts.add(c)):v()}function v(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(p),i.timeouts.delete(c),t<=(i.cancelId||0)&&(f=!0);try{s.start({...r,callId:t,cancel:f},o)}catch(_){l(_)}}})}var O1=(t,e)=>e.length==1?e[0]:e.some(r=>r.cancelled)?za(t.get()):e.every(r=>r.noop)?rI(t.get()):wn(t.get(),e.every(r=>r.finished)),rI=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),wn=(t,e,r=!1)=>({value:t,finished:e,cancelled:r}),za=t=>({value:t,cancelled:!0,finished:!1});function nI(t,e,r,n){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:l,promise:h}=r;return!s&&t===l&&!e.reset?h:r.promise=(async()=>{r.asyncId=i,r.asyncTo=t;const c=N1(e,(T,x)=>x==="onRest"?void 0:T);let f,p;const m=new Promise((T,x)=>(f=T,p=x)),v=T=>{const x=i<=(r.cancelId||0)&&za(n)||i!==r.asyncId&&wn(n,!1);if(x)throw T.result=x,p(T),T},_=(T,x)=>{const E=new eS,w=new tS;return(async()=>{if(kn.skipAnimation)throw rh(r),w.result=wn(n,!1),p(w),w;v(E);const A=te.obj(T)?{...T}:{...x,to:T};A.parentId=i,di(c,(D,R)=>{te.und(A[R])&&(A[R]=D)});const P=await n.start(A);return v(E),r.paused&&await new Promise(D=>{r.resumeQueue.add(D)}),P})()};let b;if(kn.skipAnimation)return rh(r),wn(n,!1);try{let T;te.arr(t)?T=(async x=>{for(const E of x)await _(E)})(t):T=Promise.resolve(t(_,n.stop.bind(n))),await Promise.all([T.then(f),m]),b=wn(n.get(),!0,!1)}catch(T){if(T instanceof eS)b=T.result;else if(T instanceof tS)b=T.result;else throw T}finally{i==r.asyncId&&(r.asyncId=s,r.asyncTo=s?l:void 0,r.promise=s?h:void 0)}return te.fun(o)&&Te.batchedUpdates(()=>{o(b,n,n.item)}),b})()}function rh(t,e){_u(t.timeouts,r=>r.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var eS=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},tS=class extends Error{constructor(){super("SkipAnimationSignal")}},ov=t=>t instanceof B1,l5=1,B1=class extends $P{constructor(){super(...arguments),this.id=l5++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Jn(this);return t&&t.getValue()}to(...t){return kn.to(this,t)}interpolate(...t){return UU(),kn.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ku(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||ap.sort(this),Ku(this,{type:"priority",parent:this,priority:t})}},Ao=Symbol.for("SpringPhase"),iI=1,av=2,lv=4,Jg=t=>(t[Ao]&iI)>0,es=t=>(t[Ao]&av)>0,Hl=t=>(t[Ao]&lv)>0,rS=(t,e)=>e?t[Ao]|=av|iI:t[Ao]&=~av,nS=(t,e)=>e?t[Ao]|=lv:t[Ao]&=~lv,u5=class extends B1{constructor(t,e){if(super(),this.animation=new a5,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!te.und(t)||!te.und(e)){const r=te.obj(t)?{...t}:{...e,from:t};te.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(es(this)||this._state.asyncTo)||Hl(this)}get goal(){return gr(this.animation.to)}get velocity(){const t=Jn(this);return t instanceof yh?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Jg(this)}get isAnimating(){return es(this)}get isPaused(){return Hl(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,r=!1;const n=this.animation;let{toValues:i}=n;const{config:s}=n,o=cp(n.to);!o&&Zr(n.to)&&(i=Dr(gr(n.to))),n.values.forEach((c,f)=>{if(c.done)return;const p=c.constructor==eh?1:o?o[f].lastPosition:i[f];let m=n.immediate,v=p;if(!m){if(v=c.lastPosition,s.tension<=0){c.done=!0;return}let _=c.elapsedTime+=t;const b=n.fromValues[f],T=c.v0!=null?c.v0:c.v0=te.arr(s.velocity)?s.velocity[f]:s.velocity;let x;const E=s.precision||(b==p?.005:Math.min(1,Math.abs(p-b)*.001));if(te.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,A=Math.exp(-(1-w)*_);v=b+T/(1-w)*(1-A),m=Math.abs(c.lastPosition-v)<=E,x=T*A}else{x=c.lastVelocity==null?T:c.lastVelocity;const w=s.restVelocity||E/10,A=s.clamp?0:s.bounce,P=!te.und(A),D=b==p?c.v0>0:b<p;let R,k=!1;const L=1,z=Math.ceil(t/L);for(let re=0;re<z&&(R=Math.abs(x)>w,!(!R&&(m=Math.abs(p-v)<=E,m)));++re){P&&(k=v==p||v>p==D,k&&(x=-x*A,v=p));const Z=-s.tension*1e-6*(v-p),B=-s.friction*.001*x,Q=(Z+B)/s.mass;x=x+Q*L,v=v+x*L}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,_=c.elapsedTime+=t)),w=(s.progress||0)+_/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),v=b+s.easing(w)*(p-b),x=(v-c.lastPosition)/t,m=w==1}c.lastVelocity=x,Number.isNaN(v)&&(console.warn("Got NaN while animating:",this),m=!0)}o&&!o[f].done&&(m=!1),m?c.done=!0:e=!1,c.setValue(v,s.round)&&(r=!0)});const l=Jn(this),h=l.getValue();if(e){const c=gr(n.to);(h!==c||r)&&!s.decay?(l.setValue(c),this._onChange(c)):r&&s.decay&&this._onChange(h),this._stop()}else r&&this._onChange(h)}set(t){return Te.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(es(this)){const{to:t,config:e}=this.animation;Te.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let r;return te.und(t)?(r=this.queue||[],this.queue=[]):r=[te.obj(t)?t:{...e,to:t}],Promise.all(r.map(n=>this._update(n))).then(n=>O1(this,n))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),rh(this._state,t&&this._lastCallId),Te.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:r,from:n}=t;r=te.obj(r)?r[e]:r,(r==null||iv(r))&&(r=void 0),n=te.obj(n)?n[e]:n,n==null&&(n=void 0);const i={to:r,from:n};return Jg(this)||(t.reverse&&([r,n]=[n,r]),n=gr(n),te.und(n)?Jn(this)||this._set(r):this._set(n)),i}_update({...t},e){const{key:r,defaultProps:n}=this;t.default&&Object.assign(n,N1(t,(o,l)=>/^on/.test(l)?ZP(o,r):o)),sS(this,t,"onProps"),Vl(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return tI(++this._lastCallId,{key:r,props:t,defaultProps:n,state:s,actions:{pause:()=>{Hl(this)||(nS(this,!0),iu(s.pauseQueue),Vl(this,"onPause",wn(this,jl(this,this.animation.to)),this))},resume:()=>{Hl(this)&&(nS(this,!1),es(this)&&this._resume(),iu(s.resumeQueue),Vl(this,"onResume",wn(this,jl(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const l=sI(t);if(l)return this._update(l,!0)}return o})}_merge(t,e,r){if(e.cancel)return this.stop(!0),r(za(this));const n=!te.und(t.to),i=!te.und(t.from);if(n||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return r(za(this));const{key:s,defaultProps:o,animation:l}=this,{to:h,from:c}=l;let{to:f=h,from:p=c}=t;i&&!n&&(!e.default||te.und(f))&&(f=p),e.reverse&&([f,p]=[p,f]);const m=!Ei(p,c);m&&(l.from=p),p=gr(p);const v=!Ei(f,h);v&&this._focus(f);const _=iv(e.to),{config:b}=l,{decay:T,velocity:x}=b;(n||i)&&(b.velocity=0),e.config&&!_&&o5(b,lo(e.config,s),e.config!==o.config?lo(o.config,s):void 0);let E=Jn(this);if(!E||te.und(f))return r(wn(this,!0));const w=te.und(e.reset)?i&&!e.default:!te.und(p)&&wu(e.reset,s),A=w?p:this.get(),P=th(f),D=te.num(P)||te.arr(P)||hp(P),R=!_&&(!D||wu(o.immediate||e.immediate,s));if(v){const re=nv(f);if(re!==E.constructor)if(R)E=this._set(P);else throw Error(`Cannot animate between ${E.constructor.name} and ${re.name}, as the "to" prop suggests`)}const k=E.constructor;let L=Zr(f),z=!1;if(!L){const re=w||!Jg(this)&&m;(v||re)&&(z=Ei(th(A),P),L=!z),(!Ei(l.immediate,R)&&!R||!Ei(b.decay,T)||!Ei(b.velocity,x))&&(L=!0)}if(z&&es(this)&&(l.changed&&!w?L=!0:L||this._stop(h)),!_&&((L||Zr(h))&&(l.values=E.getPayload(),l.toValues=Zr(f)?null:k==eh?[1]:Dr(P)),l.immediate!=R&&(l.immediate=R,!R&&!w&&this._set(h)),L)){const{onRest:re}=l;Oe(c5,B=>sS(this,e,B));const Z=wn(this,jl(this,h));iu(this._pendingCalls,Z),this._pendingCalls.add(r),l.changed&&Te.batchedUpdates(()=>{var B;l.changed=!w,re==null||re(Z,this),w?lo(o.onRest,Z):(B=l.onStart)==null||B.call(l,Z,this)})}w&&this._set(A),_?r(nI(e.to,e,this._state,this)):L?this._start():es(this)&&!v?this._pendingCalls.add(r):r(rI(A))}_focus(t){const e=this.animation;t!==e.to&&(WE(this)&&this._detach(),e.to=t,WE(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Zr(e)&&(ol(e,this),ov(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Zr(t)&&Zu(t,this)}_set(t,e=!0){const r=gr(t);if(!te.und(r)){const n=Jn(this);if(!n||!Ei(r,n.getValue())){const i=nv(r);!n||n.constructor!=i?F1(this,i.create(r)):n.setValue(r),n&&Te.batchedUpdates(()=>{this._onChange(r,e)})}}return Jn(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Vl(this,"onStart",wn(this,jl(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),lo(this.animation.onChange,t,this)),lo(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Jn(this).reset(gr(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),es(this)||(rS(this,!0),Hl(this)||this._resume())}_resume(){kn.skipAnimation?this.finish():ap.start(this)}_stop(t,e){if(es(this)){rS(this,!1);const r=this.animation;Oe(r.values,i=>{i.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),Ku(this,{type:"idle",parent:this});const n=e?za(this.get()):wn(this.get(),jl(this,t??r.to));iu(this._pendingCalls,n),r.changed&&(r.changed=!1,Vl(this,"onRest",n,this))}}};function jl(t,e){const r=th(e),n=th(t.get());return Ei(n,r)}function sI(t,e=t.loop,r=t.to){const n=lo(e);if(n){const i=n!==!0&&eI(n),s=(i||t).reverse,o=!i||i.reset;return nh({...t,loop:e,default:!1,pause:void 0,to:!s||iv(r)?r:void 0,from:o?t.from:void 0,reset:o,...i})}}function nh(t){const{to:e,from:r}=t=eI(t),n=new Set;return te.obj(e)&&iS(e,n),te.obj(r)&&iS(r,n),t.keys=n.size?Array.from(n):null,t}function h5(t){const e=nh(t);return te.und(e.default)&&(e.default=N1(e)),e}function iS(t,e){di(t,(r,n)=>r!=null&&e.add(n))}var c5=["onStart","onRest","onChange","onPause","onResume"];function sS(t,e,r){t.animation[r]=e[r]!==JP(e,r)?ZP(e[r],t.key):void 0}function Vl(t,e,...r){var n,i,s,o;(i=(n=t.animation)[e])==null||i.call(n,...r),(o=(s=t.defaultProps)[e])==null||o.call(s,...r)}var d5=["onStart","onChange","onRest"],f5=1,p5=class{constructor(t,e){this.id=f5++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,r)=>t[r]=e.get()),t}set(t){for(const e in t){const r=t[e];te.und(r)||this.springs[e].set(r)}}update(t){return t&&this.queue.push(nh(t)),this}start(t){let{queue:e}=this;return t?e=Dr(t).map(nh):this.queue=[],this._flush?this._flush(this,e):(hI(this,e),uv(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const r=this.springs;Oe(Dr(e),n=>r[n].stop(!!t))}else rh(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(te.und(t))this.start({pause:!0});else{const e=this.springs;Oe(Dr(t),r=>e[r].pause())}return this}resume(t){if(te.und(t))this.start({pause:!1});else{const e=this.springs;Oe(Dr(t),r=>e[r].resume())}return this}each(t){di(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:r}=this._events,n=this._active.size>0,i=this._changed.size>0;(n&&!this._started||i&&!this._started)&&(this._started=!0,_u(t,([l,h])=>{h.value=this.get(),l(h,this,this._item)}));const s=!n&&this._started,o=i||s&&r.size?this.get():null;i&&e.size&&_u(e,([l,h])=>{h.value=o,l(h,this,this._item)}),s&&(this._started=!1,_u(r,([l,h])=>{h.value=o,l(h,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Te.onFrame(this._onFrame)}};function uv(t,e){return Promise.all(e.map(r=>oI(t,r))).then(r=>O1(t,r))}async function oI(t,e,r){const{keys:n,to:i,from:s,loop:o,onRest:l,onResolve:h}=e,c=te.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const f=te.arr(i)||te.fun(i)?i:void 0;f?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Oe(d5,b=>{const T=e[b];if(te.fun(T)){const x=t._events[b];e[b]=({finished:E,cancelled:w})=>{const A=x.get(T);A?(E||(A.finished=!1),w&&(A.cancelled=!0)):x.set(T,{value:null,finished:E||!1,cancelled:w||!1})},c&&(c[b]=e[b])}});const p=t._state;e.pause===!p.paused?(p.paused=e.pause,iu(e.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(e.pause=!0);const m=(n||Object.keys(t.springs)).map(b=>t.springs[b].start(e)),v=e.cancel===!0||JP(e,"cancel")===!0;(f||v&&p.asyncId)&&m.push(tI(++t._lastAsyncId,{props:e,state:p,actions:{pause:tv,resume:tv,start(b,T){v?(rh(p,t._lastAsyncId),T(za(t))):(b.onRest=l,T(nI(f,b,p,t)))}}})),p.paused&&await new Promise(b=>{p.resumeQueue.add(b)});const _=O1(t,await Promise.all(m));if(o&&_.finished&&!(r&&_.noop)){const b=sI(e,o,i);if(b)return hI(t,[b]),oI(t,b,!0)}return h&&Te.batchedUpdates(()=>h(_,t,t.item)),_}function oS(t,e){const r={...t.springs};return e&&Oe(Dr(e),n=>{te.und(n.keys)&&(n=nh(n)),te.obj(n.to)||(n={...n,to:void 0}),uI(r,n,i=>lI(i))}),aI(t,r),r}function aI(t,e){di(e,(r,n)=>{t.springs[n]||(t.springs[n]=r,ol(r,t))})}function lI(t,e){const r=new u5;return r.key=t,e&&ol(r,e),r}function uI(t,e,r){e.keys&&Oe(e.keys,n=>{(t[n]||(t[n]=r(n)))._prepareNode(e)})}function hI(t,e){Oe(e,r=>{uI(t.springs,r,n=>lI(n,t))})}var fp=({children:t,...e})=>{const r=X.useContext(Pf),n=e.pause||!!r.pause,i=e.immediate||!!r.immediate;e=HU(()=>({pause:n,immediate:i}),[n,i]);const{Provider:s}=Pf;return X.createElement(s,{value:e},t)},Pf=m5(fp,{});fp.Provider=Pf.Provider;fp.Consumer=Pf.Consumer;function m5(t,e){return Object.assign(t,X.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var g5=()=>{const t=[],e=function(n){GU();const i=[];return Oe(t,(s,o)=>{if(te.und(n))i.push(s.start());else{const l=r(n,s,o);l&&i.push(s.start(l))}}),i};e.current=t,e.add=function(n){t.includes(n)||t.push(n)},e.delete=function(n){const i=t.indexOf(n);~i&&t.splice(i,1)},e.pause=function(){return Oe(t,n=>n.pause(...arguments)),this},e.resume=function(){return Oe(t,n=>n.resume(...arguments)),this},e.set=function(n){Oe(t,(i,s)=>{const o=te.fun(n)?n(s,i):n;o&&i.set(o)})},e.start=function(n){const i=[];return Oe(t,(s,o)=>{if(te.und(n))i.push(s.start());else{const l=this._getProps(n,s,o);l&&i.push(s.start(l))}}),i},e.stop=function(){return Oe(t,n=>n.stop(...arguments)),this},e.update=function(n){return Oe(t,(i,s)=>i.update(this._getProps(n,i,s))),this};const r=function(n,i,s){return te.fun(n)?n(s,i):n};return e._getProps=r,e};function y5(t,e,r){const n=te.fun(e)&&e;n&&!r&&(r=[]);const i=X.useMemo(()=>n||arguments.length==3?g5():void 0,[]),s=X.useRef(0),o=XP(),l=X.useMemo(()=>({ctrls:[],queue:[],flush(x,E){const w=oS(x,E);return s.current>0&&!l.queue.length&&!Object.keys(w).some(P=>!x.springs[P])?uv(x,E):new Promise(P=>{aI(x,w),l.queue.push(()=>{P(uv(x,E))}),o()})}}),[]),h=X.useRef([...l.ctrls]),c=[],f=YE(t)||0;X.useMemo(()=>{Oe(h.current.slice(t,f),x=>{r5(x,i),x.stop(!0)}),h.current.length=t,p(f,t)},[t]),X.useMemo(()=>{p(0,Math.min(f,t))},r);function p(x,E){for(let w=x;w<E;w++){const A=h.current[w]||(h.current[w]=new p5(null,l.flush)),P=n?n(w,A):e[w];P&&(c[w]=h5(P))}}const m=h.current.map((x,E)=>oS(x,c[E])),v=X.useContext(fp),_=YE(v),b=v!==_&&t5(v);D1(()=>{s.current++,l.ctrls=h.current;const{queue:x}=l;x.length&&(l.queue=[],Oe(x,E=>E())),Oe(h.current,(E,w)=>{i==null||i.add(E),b&&E.start({default:v});const A=c[w];A&&(n5(E,A.ref),E.ref?E.queue.push(A):E.start(A))})}),YP(()=>()=>{Oe(l.ctrls,x=>x.stop(!0))});const T=m.map(x=>({...x}));return i?[T,i]:T}function v5(t,e){const r=te.fun(t),[[n],i]=y5(1,r?t:[t],r?[]:e);return r||arguments.length==2?[n,i]:n}function Ga({children:t,...e}){return t(v5(e))}var _5=class extends B1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Qu(...e);const r=this._get(),n=nv(r);F1(this,n.create(r))}advance(t){const e=this._get(),r=this.get();Ei(e,r)||(Jn(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&aS(this._active)&&e0(this)}_get(){const t=te.arr(this.source)?this.source.map(gr):Dr(gr(this.source));return this.calc(...t)}_start(){this.idle&&!aS(this._active)&&(this.idle=!1,Oe(cp(this),t=>{t.done=!1}),kn.skipAnimation?(Te.batchedUpdates(()=>this.advance()),e0(this)):ap.start(this))}_attach(){let t=1;Oe(Dr(this.source),e=>{Zr(e)&&ol(e,this),ov(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Oe(Dr(this.source),t=>{Zr(t)&&Zu(t,this)}),this._active.clear(),e0(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Dr(this.source).reduce((e,r)=>Math.max(e,(ov(r)?r.priority:0)+1),0))}};function x5(t){return t.idle!==!1}function aS(t){return!t.size||Array.from(t).every(x5)}function e0(t){t.idle||(t.idle=!0,Oe(cp(t),e=>{e.done=!0}),Ku(t,{type:"idle",parent:t}))}kn.assign({createStringInterpolator:VP,to:(t,e)=>new _5(t,e)});var cI=/^--/;function w5(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!cI.test(t)&&!(bu.hasOwnProperty(t)&&bu[t])?e+"px":(""+e).trim()}var lS={};function b5(t,e){if(!t.nodeType||!t.setAttribute)return!1;const r=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:n,children:i,scrollTop:s,scrollLeft:o,viewBox:l,...h}=e,c=Object.values(h),f=Object.keys(h).map(p=>r||t.hasAttribute(p)?p:lS[p]||(lS[p]=p.replace(/([A-Z])/g,m=>"-"+m.toLowerCase())));i!==void 0&&(t.textContent=i);for(const p in n)if(n.hasOwnProperty(p)){const m=w5(p,n[p]);cI.test(p)?t.style.setProperty(p,m):t.style[p]=m}f.forEach((p,m)=>{t.setAttribute(p,c[m])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),l!==void 0&&t.setAttribute("viewBox",l)}var bu={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E5=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),S5=["Webkit","Ms","Moz","O"];bu=Object.keys(bu).reduce((t,e)=>(S5.forEach(r=>t[E5(r,e)]=t[e]),t),bu);var T5=/^(matrix|translate|scale|rotate|skew)/,A5=/^(translate)/,C5=/^(rotate|skew)/,t0=(t,e)=>te.num(t)&&t!==0?t+e:t,Id=(t,e)=>te.arr(t)?t.every(r=>Id(r,e)):te.num(t)?t===e:parseFloat(t)===e,P5=class extends dp{constructor({x:t,y:e,z:r,...n}){const i=[],s=[];(t||e||r)&&(i.push([t||0,e||0,r||0]),s.push(o=>[`translate3d(${o.map(l=>t0(l,"px")).join(",")})`,Id(o,0)])),di(n,(o,l)=>{if(l==="transform")i.push([o||""]),s.push(h=>[h,h===""]);else if(T5.test(l)){if(delete n[l],te.und(o))return;const h=A5.test(l)?"px":C5.test(l)?"deg":"";i.push(Dr(o)),s.push(l==="rotate3d"?([c,f,p,m])=>[`rotate3d(${c},${f},${p},${t0(m,h)})`,Id(m,0)]:c=>[`${l}(${c.map(f=>t0(f,h)).join(",")})`,Id(c,l.startsWith("scale")?1:0)])}}),i.length&&(n.transform=new I5(i,s)),super(n)}},I5=class extends $P{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Oe(this.inputs,(r,n)=>{const i=gr(r[0]),[s,o]=this.transforms[n](te.arr(i)?i:r.map(gr));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Oe(this.inputs,e=>Oe(e,r=>Zr(r)&&ol(r,this)))}observerRemoved(t){t==0&&Oe(this.inputs,e=>Oe(e,r=>Zr(r)&&Zu(r,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ku(this,t)}},R5=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];kn.assign({batchedUpdates:wA.unstable_batchedUpdates,createStringInterpolator:VP,colors:vU});KP(R5,{applyAnimatedValues:b5,createAnimatedStyle:t=>new P5(t),getComponentProps:({scrollTop:t,scrollLeft:e,...r})=>r});const k5=1/149597870700,M5=1e8;function D5({prevDistance:t,travelSpeed:e,delta:r}){const i=e*r*M5*k5;return t+i}var pp={exports:{}},Dn=KP(Object.keys(fe.TYPES),{applyAnimatedValues:function(t,e){if(!t.nodeType&&!t.pluginName)return!1;(typeof(t==null?void 0:t.applyProps)=="function"?t.applyProps:fe.applyDefaultProps)(t,{},e)}}).animated,F5=Dn[fe.TYPES.BitmapText],N5=Dn[fe.TYPES.Container],O5=Dn[fe.TYPES.Graphics],B5=Dn[fe.TYPES.NineSlicePlane],L5=Dn[fe.TYPES.ParticleContainer],U5=Dn[fe.TYPES.Sprite],z5=Dn[fe.TYPES.AnimatedSprite],G5=Dn[fe.TYPES.Text],$5=Dn[fe.TYPES.TilingSprite],H5=Dn[fe.TYPES.SimpleMesh],j5=Dn[fe.TYPES.SimpleRope];const V5=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:z5,BitmapText:F5,Container:N5,Graphics:O5,NineSlicePlane:B5,ParticleContainer:L5,SimpleMesh:H5,SimpleRope:j5,Sprite:U5,Text:G5,TilingSprite:$5},Symbol.toStringTag,{value:"Module"})),W5=hv(V5);pp.exports=W5;var ih=pp.exports;function X5(t){t.beginFill(522031,.4),t.moveTo(-15,-13),t.lineTo(15,-13),t.lineTo(15,13),t.lineTo(-15,13),t.endFill()}const Y5=X.forwardRef((t,e)=>Y.jsx(fe.Graphics,{ref:e,draw:X5,visible:!1}));function Q5(t){return t<=0?"very-damaged":t<=33?"damaged":t<=67?"slightly-damaged":(t<=100,"base")}function q5(){const[t]=Be(wt.health);return Y.jsx(fe.Sprite,{image:`${we.baseUrl}/ship/hull/${Q5(t)}.png`,zIndex:3,anchor:.5})}function K5(){const[t,e]=X.useState([]),[r,n]=X.useState([]),[i]=Be(Sr.isOver),[s]=Be(wt.travelSpeed);return X.useEffect(()=>{const o=Yu(4).map(h=>ne.from(`${we.baseUrl}/ship/engine/idle-${h}.png`));e(o);const l=Yu(4).map(h=>ne.from(`${we.baseUrl}/ship/engine/powered-${h}.png`));n(l)},[]),i?null:Y.jsxs(Y.Fragment,{children:[!!t.length&&Y.jsx(fe.AnimatedSprite,{isPlaying:!0,animationSpeed:.5,textures:t,zIndex:1,anchor:.5,y:10,visible:s===1}),!!r.length&&Y.jsx(fe.AnimatedSprite,{isPlaying:!0,animationSpeed:.5,textures:r,zIndex:1,anchor:.5,y:10,visible:s>1})]})}function Z5(){const[t,e]=X.useState([]);return X.useEffect(()=>{const r=Yu(6).map(n=>ne.from(`${we.baseUrl}/ship/shield/shield-${n}.png`));e(r)},[]),t.length===0?null:Y.jsx(fe.AnimatedSprite,{isPlaying:!0,animationSpeed:.5,textures:t,zIndex:5,anchor:.5})}const dI=X.forwardRef((t,e)=>{const[r]=Be(Sr.isOver),[n]=Be(wt.shield);return Y.jsxs(ih.Container,{sortableChildren:!0,...t,children:[Y.jsx(Y5,{ref:e}),!r&&n&&Y.jsx(Z5,{}),Y.jsx(q5,{}),Y.jsx(fe.Sprite,{image:we.baseUrl+"/ship/engine.png",zIndex:2,anchor:.5}),Y.jsx(K5,{})]})}),id=48,J5=X.forwardRef(({destroyed:t},e)=>{const[r,n]=X.useState(we.canvas.width/2),[i,s]=X.useState(0),[o,l]=Be(wt.travelSpeed),[h]=Be(Sr.isOver),[c]=Be(Sr.isFinished),f=Be(wt.distanceTraveled)[1],p=X.useCallback(v=>{t||h||(v.key==="a"?r-id>=0&&n(r-id):v.key==="d"?r+id<=we.canvas.width&&n(r+id):v.key==="w"&&l(5))},[r,n,t,h]),m=X.useCallback(v=>{t||h||v.key==="w"&&l(1)},[t,h]);return X.useEffect(()=>{c&&(document.removeEventListener("keydown",p),document.removeEventListener("keyup",m),n(we.canvas.width/2))},[c]),X.useEffect(()=>(c||(document.addEventListener("keydown",p),document.addEventListener("keyup",m)),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",m)}),[r,p,t,h,c]),fe.useTick(v=>{h&&(s(i+.01),l(.3)),f(_=>D5({prevDistance:_,travelSpeed:o,delta:v}))}),Y.jsx(Ga,{from:{x:we.canvas.width/2,y:750},to:{x:r,y:o>1?650:750},children:v=>Y.jsx(dI,{ref:e,...v,rotation:i})})});function e6(){const[t]=Be(wt.shield),[e]=Be(wt.travelSpeed),[r,n]=X.useState(Cd()),[i,s]=X.useState(0);return fe.useTick(()=>{t||i+1>we.canvas.height?(s(0),n(Cd())):s(i+1*e)}),t?null:Y.jsx(fe.Sprite,{name:"Shield",image:we.baseUrl+"/environment/shield.png",x:r,y:i,scale:2})}function t6(){const t=X.useRef(null),e=X.useRef(null),[r,n]=X.useState([]),[i,s]=Be(wt.health),[o,l]=Be(wt.shield),h=Be(Sr.isOver)[1];return fe.useTick(()=>{var c;if(t.current){const f=t.current,p=e.current,m=f.children.find(_=>_.name==="Asteroid-Belt"),v=f.children.find(_=>_.name==="Shield");if(p&&m){const _=p.getBounds(),b=((c=m.children)==null?void 0:c.filter(T=>{var x;return(x=T==null?void 0:T.name)==null?void 0:x.startsWith("Asteroid")}))??[];for(const T of b){const x=T.getBounds();if(_.x<x.x+x.width&&_.x+_.width>x.x&&_.y<x.y+x.height&&_.y+_.height>x.y){const w=T.name;r.includes(w)||(n(A=>[...A,w]),o?l(!1):(s(A=>A-33.5),i-33.5<=0&&h(!0)))}else n(w=>w.filter(A=>A!==T.name))}}if(p&&v){const _=p.getBounds(),b=v.getBounds();_.x<b.x+b.width&&_.x+_.width>b.x&&_.y<b.y+b.height&&_.y+_.height>b.y&&l(!0)}}}),Y.jsxs(fe.Container,{ref:t,children:[Y.jsx(J5,{ref:e,destroyed:!!r.length}),Y.jsx(uU,{collidingAsteroids:r,setCollidingAsteroids:n}),Y.jsx(e6,{})]})}function r6(){const[t,e]=X.useState([]);return X.useEffect(()=>{const r=Yu(77).map(n=>ne.from(`${we.baseUrl}/planet/planet-${n}.png`));e(r)},[]),t.length===0?null:Y.jsx(fe.AnimatedSprite,{isPlaying:!0,animationSpeed:.2,textures:t,anchor:.5})}const n6=new Er({fontFamily:"monospace",fill:16777215,fontSize:18,fontWeight:"400",wordWrap:!0,wordWrapWidth:270}),i6=()=>Y.jsx(fe.Text,{text:`
		We made it.

		The stars are behind us, and before us lies a new world, a new beginning.

		For Earth.
		For humanity.
		For hope.`,x:60,style:n6});function s6(){const[t,e]=X.useState(!1),[r,n]=X.useState(1),[i,s]=X.useState(!1);return fe.useTick(()=>{const o=Math.floor(performance.now()/1e3);o>0&&o%4===0&&(e(!0),s(!0)),t&&r>.2&&n(r-5e-4)}),Y.jsxs(fe.Container,{children:[i&&Y.jsx(Ga,{from:{x:0,y:0},to:{x:0,y:100},config:{tension:20,friction:25},children:o=>Y.jsx(ih.Container,{...o,children:Y.jsx(i6,{})})}),Y.jsx(Ga,{from:{x:we.canvas.width/2,y:0},to:{x:we.canvas.width/2,y:we.canvas.height/2},config:{tension:20,friction:25},children:o=>Y.jsx(ih.Container,{...o,children:Y.jsx(r6,{})})}),Y.jsx(Ga,{from:{x:we.canvas.width/2,y:750},to:{x:we.canvas.width/2,y:we.canvas.height/2},config:{tension:40,friction:19},children:o=>Y.jsx(dI,{...o,scale:r})})]})}const o6=["base","hover"];function a6(){const t=Be(Sr.isOver)[1],e=Be(Sr.session)[1],r=Be(wt.travelSpeed)[1],n=Be(wt.distanceTraveled)[1],i=Be(wt.health)[1],s=Be(wt.shield)[1],[o,l]=X.useState(!1),[h,c]=X.useState([]);return X.useEffect(()=>{const f=[];for(const p of o6)f.push(ne.from(`${we.baseUrl}/ui/buttons/restart/${p}.png`));c(f)},[]),h.length===0?null:Y.jsx(fe.Sprite,{eventMode:"static",onclick:()=>{t(!1),i(100),s(!1),r(1),n(0),e(E1())},onmouseenter:()=>l(!0),onmouseleave:()=>l(!1),texture:o?h[1]:h[0],x:we.canvas.width/2,y:we.canvas.height/2+100,anchor:.5,scale:.5})}const l6=new Er({fontFamily:we.fonts,fontSize:32,fontWeight:"700",fill:["#ffffff"]}),u6=()=>Y.jsx(fe.Text,{text:"GAME OVER",style:l6,x:we.canvas.width/2,y:we.canvas.height/2,anchor:.5}),h6=new Er({fill:16777215,fontSize:12}),L1=({children:t,...e})=>Y.jsx(fe.Text,{style:h6,...e});function c6(){const[t]=Be(wt.health),e=X.useMemo(()=>{const n=new Ba;return n.beginTextureFill({texture:ne.WHITE,color:16711680,alpha:1}),n.drawRect(0,0,t,20),n.endFill(),n},[t]),r=t<0?0:Math.round(t);return Y.jsxs(fe.Container,{children:[Y.jsx(fe.Sprite,{image:we.baseUrl+"/ui/ship/health-bar.png",scale:1.6}),Y.jsx(fe.Sprite,{image:we.baseUrl+"/ui/ship/health.png",scale:1.6,x:2,y:2,mask:e}),Y.jsx(L1,{text:`${r}/100`,x:77,y:-4})]})}function d6(){const[t]=Be(wt.shield);return Y.jsx(fe.Container,{scale:1,y:15,children:Y.jsx(fe.Sprite,{image:`${we.baseUrl}/ui/ship/shield-${t?"full":"empty"}.png`})})}function f6(){const[t]=Be(wt.distanceTraveled),[e,r]=X.useState(15),n=Be(Sr.isFinished)[1],i=Be(wt.travelSpeed)[1],s=we.game.finalDistance-t;return fe.useTick(()=>{r(e+Math.sin(Date.now()/100)*.3)}),X.useEffect(()=>{s<=.01&&(n(!0),i(1))},[s]),Y.jsxs(fe.Container,{x:180,y:10,children:[Y.jsx(fe.Sprite,{image:we.baseUrl+"/ui/indicator.png",scale:.3,anchor:.5,y:e}),Y.jsx(L1,{text:`${s.toFixed(2)}ua`,x:2,y:40,anchor:.5})]})}function p6(){return Y.jsxs(fe.Container,{x:10,y:10,children:[Y.jsx(c6,{}),Y.jsx(d6,{}),Y.jsx(f6,{})]})}function m6(){const[t]=Be(Sr.isOver),[e]=Be(Sr.isFinished),[r]=Be(wt.distanceTraveled),n=X.useRef(0);return X.useEffect(()=>{t&&(n.current=r)},[t]),Y.jsxs(Y.Fragment,{children:[e?Y.jsx(s6,{}):Y.jsxs(Y.Fragment,{children:[Y.jsx(t6,{}),Y.jsx(p6,{})]}),t&&Y.jsxs(Y.Fragment,{children:[Y.jsx(u6,{}),Y.jsx(L1,{text:`You managed to travel ${n.current.toFixed(2)} astronomical units`,x:70,y:420}),Y.jsx(a6,{})]})]})}function g6(){const[t,e]=X.useState(4),[r,n]=X.useState(300);return fe.useTick(()=>{t>1&&(t<1.5?e(t-.002):t<2?e(t-.005):e(t-.01)),r<700&&n(r+1)}),Y.jsx(fe.Text,{anchor:.5,x:we.canvas.width/2,y:80,style:new Er({fontFamily:we.fonts,fontSize:32,fontWeight:r,letterSpacing:t,fill:["#ff7093","#e52554"],stroke:"#e52554",strokeThickness:1,dropShadow:!0,dropShadowColor:"#e52554",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}),text:"ASTEROID ESCAPE"})}const y6=new Er({fontFamily:we.fonts,fill:16777215,fontSize:18,fontWeight:"400",wordWrap:!0,wordWrapWidth:we.canvas.width-24}),v6=[{t:"		In the distant future, the Earth has become uninhabitable, and humanity is on the brink of extinction.",y:140},{t:"		The last remaining survivors have boarded a small but advanced spaceship, The Glider, on a desperate mission to reach a distant, habitable planet known only as Elysium.",y:220},{t:"		This planet, though distant and shrouded in mystery, is the only hope for humanity's survival.",y:350},{t:"		However, the journey is perilous. The ship must navigate through a treacherous asteroid belt before reaching safety.",y:430}];function _6(){const[t,e]=X.useState(0);return X.useEffect(()=>{const r=setTimeout(()=>{e(t+.01)},25);return t>=1&&clearTimeout(r),()=>clearTimeout(r)},[t,e]),Y.jsx(Y.Fragment,{children:v6.map((r,n)=>Y.jsx(Ga,{from:{x:15,y:r.y*2},to:{x:15,y:r.y},config:{tension:(50+n*2)/(n+1+.2),friction:25-n*2},children:i=>Y.jsx(ih.Container,{...i,children:Y.jsx(fe.Text,{text:r.t,style:y6,alpha:t},n)})},r.y*n))})}const r0=new Er({fontFamily:"monospace",fill:16777215,fontSize:14,fontWeight:"600",wordWrap:!0,wordWrapWidth:we.canvas.width-24}),x6=()=>Y.jsxs(fe.Container,{children:[Y.jsxs(fe.Container,{y:-10,children:[Y.jsx(fe.Text,{anchor:.5,style:r0,text:"Boost",y:-30}),Y.jsx(fe.Sprite,{image:`${we.baseUrl}/ui/keyboard/w.png`,scale:.8,anchor:.5})]}),Y.jsxs(fe.Container,{x:-40,children:[Y.jsx(fe.Text,{anchor:.5,style:r0,text:"Left",x:-40}),Y.jsx(fe.Sprite,{image:`${we.baseUrl}/ui/keyboard/a.png`,scale:.8,anchor:.5})]}),Y.jsxs(fe.Container,{x:40,children:[Y.jsx(fe.Text,{anchor:.5,style:r0,text:"Right",x:40}),Y.jsx(fe.Sprite,{image:`${we.baseUrl}/ui/keyboard/d.png`,scale:.8,anchor:.5})]})]}),w6=["base","hover"];function b6(){const t=Be(Sr.isStarted)[1],e=Be(wt.travelSpeed)[1],[r,n]=X.useState(!1),[i,s]=X.useState([]);return X.useEffect(()=>{const o=[];for(const l of w6)o.push(ne.from(`${we.baseUrl}/ui/buttons/play/${l}.png`));s(o)},[]),i.length===0?null:Y.jsx(fe.Sprite,{eventMode:"static",onclick:()=>{e(1),t(!0)},onmouseenter:()=>n(!0),onmouseleave:()=>n(!1),texture:r?i[1]:i[0],y:60,anchor:.5,scale:.5})}const E6=()=>Y.jsx(Ga,{from:{x:we.canvas.width/2,y:we.canvas.height+100},to:{x:we.canvas.width/2,y:630},config:{tension:40,friction:25},children:t=>Y.jsxs(ih.Container,{...t,children:[Y.jsx(x6,{}),Y.jsx(b6,{})]})});function S6(){const[t,e]=X.useState(!1),[r,n]=X.useState(!1),[i,s]=X.useState(!1);return X.useEffect(()=>{const o=setTimeout(()=>e(!0),1e3);return t===!0&&clearTimeout(o),()=>clearTimeout(o)},[t,e]),X.useEffect(()=>{const o=setTimeout(()=>n(!0),1500);return()=>clearTimeout(o)},[n]),X.useEffect(()=>{const o=setTimeout(()=>s(!0),5e3);return()=>clearTimeout(o)},[s]),Y.jsxs(Y.Fragment,{children:[Y.jsx(g6,{}),r&&Y.jsx(_6,{}),i&&Y.jsx(E6,{})]})}function T6(){const[t,e]=X.useState(256),[r]=Be(wt.travelSpeed),n=X.useMemo(()=>{const s=new SP(1,4);return s.blurY=7,s.blurX=0,s},[]),i=X.useMemo(()=>r<=1?{stars:[],clouds:[]}:{stars:[n],clouds:[n]},[n,r]);return fe.useTick(s=>{e(o=>o+.5*s*r)}),Y.jsxs(Y.Fragment,{children:[Y.jsx(fe.TilingSprite,{image:we.baseUrl+"/bg-clouds.png",tilePosition:{x:512/2,y:t},width:we.canvas.width,height:we.canvas.height,zIndex:1,filters:i.clouds}),Y.jsx(fe.TilingSprite,{image:we.baseUrl+"/bg-stars.png",tilePosition:{x:512/2,y:t/2},width:we.canvas.width,height:we.canvas.height,alpha:.3,zIndex:1,filters:i.stars})]})}const A6=()=>{const[t]=Be(Sr.isStarted),[e]=Be(Sr.session);return Y.jsxs(fe.Stage,{width:we.canvas.width,height:we.canvas.height,options:{background:"#000"},children:[Y.jsx(T6,{}),t?Y.jsx(m6,{}):Y.jsx(S6,{})]},e)};bA(document.getElementById("root")).render(Y.jsx(X.StrictMode,{children:Y.jsx(A6,{})}))});export default C6();
